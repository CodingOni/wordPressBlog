!function(){return function e(n,t,o){function r(i,s){if(!t[i]){if(!n[i]){var l="function"==typeof require&&require;if(!s&&l)return l(i,!0);if(a)return a(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var c=t[i]={exports:{}};n[i][0].call(c.exports,function(e){return r(n[i][1][e]||e)},c,c.exports,e,n,t,o)}return t[i].exports}for(var a="function"==typeof require&&require,i=0;i<o.length;i++)r(o[i]);return r}}()({1:[function(e,n,t){BeFunky.acknowledge=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.onAcknowledge,o=n.buttonText,r=void 0===o?"ok_got_it":o,a=n.heading,i=n.isCritical,s=void 0!==i&&i,l=n.disableClose,u=void 0!==l&&l,c=n.size;if(!(("string"==typeof e||Array.isArray(e))&&e.length||e instanceof HTMLElement))throw new Error("message required");var d={onClose:t,buttons:[{text:r,type:"blue"}],heading:a,body:e,isCritical:s,disableClose:u,size:c};return BeFunky.showDialog(d)}},{}],2:[function(e,n,t){BeFunky.confirm=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.onConfirm,o=n.onCancel,r=void 0===o?function(){}:o,a=n.confirmText,i=void 0===a?"ok":a,s=n.cancelText,l=void 0===s?"cancel":s,u=n.heading,c=n.isCritical,d=void 0!==c&&c,p=n.size,m=void 0===p?"small":p,g=n.imageUrl,y=void 0===g?void 0:g;if(!(("string"==typeof e||Array.isArray(e))&&e.length||e instanceof HTMLElement))throw new Error("message required");if("function"!=typeof t)throw new Error("onConfirm callback required");var f=!1,h={onClose:function(){f?t():r()},buttons:[{text:l,type:window.isFlashOpenned?"grey":"medium-grey"},{text:i,type:"blue",onClick:function(){f=!0}}],heading:u,body:e,isCritical:d,size:m,imageUrl:y};return BeFunky.showDialog(h)}},{}],3:[function(e,n,t){var o={displayError:function(e,n){var t=r(e);if(!t.firstElementChild){var o=document.createElement("div").addClass("form-errors__container");t.appendChild(o);var a=document.createElement("button").setClass("button button--circle button--outline button--white button--icon button--tiny form-errors__close-button");a.innerHTML=BeFunky.getSvgHtml("global-cancel-icon",{classes:"icon icon-size-tiny"}),a.addEventListener("click",function(){t.innerHTML=""}),t.appendChild(a)}var i=document.createElement("div").setLang(n);t.firstElementChild.appendChild(i)},clearError:function(e){r(e).innerHTML=""}};function r(e){return e instanceof HTMLElement?e.querySelector(".form-errors"):document.querySelector(e+" .form-errors")}n.exports=o},{}],4:[function(e,n,t){BeFunky.onDocumentReady(function(){var e,n,t,o;e=Array.from(document.querySelectorAll(".comparison")),n=BeFunky.isIOS||BeFunky.isAndroid,t=n?"touchmove":BeFunky.pointermove,o=window.innerHeight,e.forEach(function(e){var r=e.getBoundingClientRect(),a=e.querySelector(".comparison__image-before-container"),i=e.querySelector(".comparison__handle"),s=Date.now(),l=0,u=!1,c=void 0,d=!1,p=function(n){e.toggleClass("comparison--show-text",n)},m=BeFunky.debounce(function(e){var n=100*e/r.width;a.setStyles({width:n+"%"})},300),g=function(e){var n=e.pageX>=0?e.pageX:e.touches[0].pageX;e.preventDefault&&r.height<o/2&&e.preventDefault();var t=r.width,d=Math.max(0,Math.min(t,n-r.x)),p=d-r.width/2,g=Math.abs(d-l);l=d;var y=Date.now(),f=y-s;function h(){a.setStyles({width:d+"px"}),i.setStyles({transform:"translateX("+p+"px)"}),m(d)}s=y,g>50&&f>50?(u||(u=!0,cancelAnimationFrame(c),a.setStyles({transition:""}),i.setStyles({transition:""})),c=requestAnimationFrame(h)):(u&&(u=!1,cancelAnimationFrame(c),a.setStyles({transition:"none"}),i.setStyles({transition:"none"})),h())},y=function(n){d||(d=!0,g(n),p(!0),e.addEventListener(t,g))},f=function(){d&&(d=!1,p(!1),e.removeEventListener(t,g))};n?(e.addEventListener("touchstart",y),e.addEventListener("touchend",f)):(e.addEventListener(BeFunky.pointerdown,y),e.addEventListener(BeFunky.pointerover,function(e){BeFunky&&BeFunky.isPointerDown&&y(e)}),e.addEventListener(BeFunky.pointerup,f),e.addEventListener(BeFunky.pointerout,f)),window.addEventListener("resize",BeFunky.debounce(function(){r=e.getBoundingClientRect(),o=window.innerHeight;var n=parseFloat(a.style.width)/100*r.width;isNaN(n)||g({pageX:r.x+n})},300))})})},{}],5:[function(e,n,t){var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function r(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}BeFunky.imageGallery=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.imagesPerRow,a=void 0===t?5:t,i=n.gutterWidth,s=void 0===i?12:i,l=n.imageSelectionHandler,u=n.isSelected,c=n.isGraphic,d=n.tooltipHandler,p=n.extendItem;return function(){this.innerHTML='\n        <div class="image-gallery__images" style="padding: '+s/2+'px"></div>\n        <div class="image-gallery__message"></div>\n        <div class="image-gallery__empty-state"></div>\n    ',this.init=function(){this.initDefaultValues()},this.initDefaultValues=function(){this._message=void 0,this._emptyState="",this._images=[],this.imagesPerRow=this._imagesPerRow=a,this.imageIDRowIndexes=[],this.imagesContainer=this.querySelector(".image-gallery__images"),this.messageContainer=this.querySelector(".image-gallery__message"),this.emptyStateContainer=this.querySelector(".image-gallery__empty-state"),this.imagesContainer.addEventListener("click",this.handleItemClick),this.loadingElements=document.createElement("div").addClass("image-gallery__loading");var e=document.createElement("div").addClass("loading-spinner"),n=document.createElement("string");n.textContent="Loading...",this.loadingElements.appendChild(e),this.loadingElements.appendChild(n),this.loadingContainer=null,this.staggerLoading=!0},this.displayImages=function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.staggerLoading,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.images||!this.images.length)return this.imageIDRowIndexes=[],void(this.imagesContainer.innerHTML="");var o=t?0:this.getFirstOutdatedRowIndex();[].concat(r(this.imagesContainer.children)).filter(function(e,n){return n>=o}).forEach(function(n){return e.imagesContainer.removeChild(n)});var a=this.imageIDRowIndexes.findIndex(function(e){return e.rowIndex===o});-1===a&&(a=0);var i=this.images.slice(a);this.imageIDRowIndexes=this.imageIDRowIndexes.filter(function(e){return e.rowIndex<o});var m=document.createDocumentFragment(),g=[],y=void 0,f=o-1,h=function(){(y=document.createElement("div").addClass("image-gallery__row")).aspectRatioSum=0,m.appendChild(y),g.push(y),f++};if(h(),i.forEach(function(n){var t=e._imagesPerRow-y.aspectRatioSum,o=n.thumbWidth&&n.thumbHeight?Math.max(.75,n.thumbWidth/n.thumbHeight):1;Math.abs(t-o)>Math.abs(t)&&h();var r=document.createElement("div").addClass("image-gallery__item").setStyles({margin:s/2+"px"});BeFunky.imageGalleryItem(r,n,{imageSelectionHandler:l,isSelected:u,isGraphic:c,tooltipHandler:d,extendItem:p}),function(n,t,o){y.appendChild(n),y.aspectRatioSum+=t,e.imageIDRowIndexes.push({id:o,rowIndex:f})}(r,o,n.id)}),this.imagesContainer.appendChild(m),g.forEach(function(e,t){function o(){[].concat(r(e.children)).forEach(function(e){return e.loadImage&&e.loadImage()})}n&&0!==t?setTimeout(o,30*t):o()}),g.length){var v=g[g.length-1],k=Math.abs(this._imagesPerRow-v.aspectRatioSum);if(k>.6){var w=document.createElement("div").addClass("image-gallery__item");w.setStyles({flex:k,paddingLeft:Math.round(k-1)*s+"px",margin:s/2+"px"}),v.appendChild(w)}}},this.getFirstOutdatedRowIndex=function(){for(var e=void 0,n=0;n<this.images.length;n++){var t=this.images[n].id;if(!this.imageIDRowIndexes[n]){e=0===n?0:this.imageIDRowIndexes[n-1].rowIndex;break}if(t!==this.imageIDRowIndexes[n].id){e=this.imageIDRowIndexes[n].rowIndex;break}}return void 0===e&&(e=this.imageIDRowIndexes[this.images.length-1].rowIndex),e},this.handleItemClick=function(e){var n=e.target.parentElement;n&&n.hasClass&&n.hasClass("image-gallery__item")&&(n.selected=!n.selected)},Object.defineProperty(this,"emptyState",{set:function(e){if(this.emptyStateContainer.innerHTML="",e){if("object"!==(void 0===e?"undefined":o(e)))throw"Image Gallery emptyState must be an object";if(this._emptyState=Object.assign({},e),e.icon&&(this.emptyStateContainer.innerHTML='\n                    <svg class="icon"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#'+e.icon+'"></use></svg>'),e.text){var n=document.createElement("string").setLang(e.text);this.emptyStateContainer.appendChild(n)}if(e.buttonText&&e.buttonAction){var t=document.createElement("button").setClass("button button--blue").setLang(e.buttonText);t.addEventListener("click",e.buttonAction),this.emptyStateContainer.appendChild(t)}}else this._emptyState=void 0},get:function(){return this._emptyState}}),Object.defineProperty(this,"message",{set:function(e){if(this.messageContainer.innerHTML="",e){if("object"!==(void 0===e?"undefined":o(e)))throw"Image Gallery message must be an object";this._message=Object.assign({},e);var n=!0===e.isError;if(this.messageContainer.toggleClass("image-gallery__message--is-error",n),e.text){var t=document.createElement("string").setLang(e.text);this.messageContainer.appendChild(t)}if(e.buttonText&&e.buttonAction){var r=document.createElement("button").setClass("button "+(n?"button--small button--white":"button--grey")).setLang(e.buttonText);r.addEventListener("click",e.buttonAction),this.messageContainer.appendChild(r)}}else this._message=void 0},get:function(){return this._message}}),Object.defineProperty(this,"isLoading",{set:function(e){if(this._isLoading!==e){if("boolean"!=typeof e)throw"isLoading must be a boolean";this._isLoading=e,e?(this.loadingContainer=this.images.length?this.messageContainer:this.emptyStateContainer,this.loadingContainer.innerHTML="",this.loadingContainer.removeClass("image-gallery__message--is-error"),this.loadingContainer.appendChild(this.loadingElements.cloneNode(!0))):this.loadingContainer===this.messageContainer?this.message=this._message:this.loadingContainer===this.emptyStateContainer&&(this.emptyState=this._emptyState)}},get:function(){return this._isLoading}}),Object.defineProperty(this,"images",{set:function(e){if(this._images!==e){if(!Array.isArray(e))throw"images must be an Array";this._images=e,this.displayImages()}},get:function(){return this._images}}),Object.defineProperty(this,"imagesPerRow",{set:function(e){if(this._imagesPerRow!==e){if("number"!=typeof e)throw"imagesPerRow must be a number";this._imagesPerRow=e,this.displayImages(!1,!0)}},get:function(){return this._imagesPerRow}}),this.init()}.bind(e)()}},{}],6:[function(e,n,t){BeFunky.imageGalleryItem=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=t.imageSelectionHandler,r=t.isSelected,a=void 0===r?function(){return!1}:r,i=t.isGraphic,s=void 0!==i&&i,l=t.tooltipHandler,u=t.extendItem;return function(){var t=this,r=n.id,i=n.isTransparent,c=void 0!==i&&i;this.id="image_gallery_item--"+r,this.init=function(){this.initDefaultValues(),this.initImagePlaceholder(),"function"==typeof u&&u(e,n)},this.initDefaultValues=function(){this.selected=this._selected=a(n.id),this.toggleClass("image-gallery__item--selected",this._selected),this.imagePlaceholder=document.createElement("div"),"function"==typeof l&&(this.dataset.bfntooltip=l(n))},this.initImagePlaceholder=function(){var e=n.thumbWidth,t=n.thumbHeight,o=e&&t?e/t:1;this.setStyles({flex:o}),this.addClass("image-gallery__item--"+(o>=1?"wide":"narrow")),this.imagePlaceholder.addClass("image-gallery__placeholder").setStyles({paddingBottom:100/o+"%"}),this.appendChild(this.imagePlaceholder);var r=document.createElement("div").addClass("image-gallery__item-outline");r.innerHTML='\n            <svg class="icon icon-selected">\n                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#global-apply-icon"></use>\n            </svg>',this.appendChild(r)},this.loadImage=function(){if(n.svgPlaceholder){if(!n.thumbURL)return void(t.imagePlaceholder.innerHTML='<svg class="icon">\n                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#'+n.svgPlaceholder+'"></use>\n                </svg>');t.imagePlaceholder.innerHTML=""}var e="",o="";s?(e="url('"+n.thumbURL+"') no-repeat center",o="contain",t.graphicPlaceholder=document.createElement("div").addClass("image-gallery__graphic"),t.imagePlaceholder.appendChild(t.graphicPlaceholder)):(e="url('"+n.thumbURL+"') no-repeat center",o="cover",c&&(e+=", url('"+window.globalImagesPath+"app/checker_pattern.jpg') repeat",o+=", auto"));var r=new Image;r.onload=function(){s?t.graphicPlaceholder.setStyles({background:e,backgroundSize:o}):t.imagePlaceholder.setStyles({background:e,backgroundSize:o})},r.onerror=function(){t.hasRetried?BeFunky.logError("Failed to load thumbnail for a second time"):(t.hasRetried=!0,BeFunky.logError("Failed to load thumbnail. Trying again in 3 seconds..."),setTimeout(t.loadImage.bind(t),3e3))},r.src=n.thumbURL},Object.defineProperty(this,"selected",{set:function(e){e!==this._selected&&o(n,e)&&(this._selected=e,this.toggleClass("image-gallery__item--selected",e))},get:function(){return this._selected}}),this.init()}.bind(e)()}},{}],7:[function(e,n,t){!function(){var e=["#E14A43","#FB9F39","#F5E949","#B7D93F","#67C369","#6A91CD","#966DB8","#CF6399"],n=[0,2,4,6,1,3,5,7],t=24,o=Math.sqrt(Math.pow(t,2)/2);window.createLoadIris=function(){(function(){(function(){this.animationFactor=0,this.bladeCircleBeta=0,this.running=!1,this.active=!1,this.linesEnabled=!1,this.show=function(){this.style.display="block",this.bladeContainer.classList.add("animate-iris-blade-container");for(var e=0;e<this.bladeHolders.length;e++){var n=this.bladeHolders[e];n.classList.add("animate-iris-blade-holder")}}.bind(this),this.hide=function(){this.style.display="none",this.bladeContainer.classList.remove("animate-iris-blade-container");for(var e=0;e<this.bladeHolders.length;e++){var n=this.bladeHolders[e];n.classList.remove("animate-iris-blade-holder")}}.bind(this),this.style.position="relative",this.style.pointerEvents="none",this.style.width=2*t+"px",this.style.height=2*t+"px",this.style.display="none"}).call(this),function(){this.bladeContainer=document.createElement("div"),this.bladeContainer.style.position="absolute",this.bladeContainer.style.left=t+"px",this.bladeContainer.style.top=t+"px",this.appendChild(this.bladeContainer)}.call(this),function(){this.bladeHolders=[];for(var r=0;r<n.length;r++){var a=n[r],i=e[a],s=a/e.length*(2*Math.PI),l=document.createElement("div");l.id="blade_holder_"+a,l.style.position="absolute",l.style.left=Math.cos(s)*t-Math.cos(s+Math.PI/2)*(t/1.5)+"px",l.style.top=Math.sin(s)*t-Math.sin(s+Math.PI/2)*(t/1.5)+"px",this.bladeContainer.appendChild(l),this.bladeHolders.push(l);var u=document.createElement("div");u.id="blade_"+a,u.style.position="absolute",u.style.transform="rotate("+s*(180/Math.PI)+"deg)",l.appendChild(u);var c=document.createElement("div");c.id="blade_graphic_"+a,c.style.position="absolute",c.style.backgroundColor="rgba(0,0,0,0)",c.style.transform="rotate(-45deg)",c.style.left="-"+o+"px",c.style.bottom="-"+(t+o)+"px",c.style.border=o+1+"px solid rgba(0,0,0,0)",c.style.borderTop=o+1+"px solid "+i,c.style.opacity=.8,u.appendChild(c)}}.call(this)}).call(this)}}()},{}],8:[function(e,n,t){var o=function(){var e=document.createElement("div").setClass("load-screen");e.id="load_screen_root";var n=document.createElement("div").addClass("load-screen__iris");window.createLoadIris.call(n);var t=document.createElement("div").addClass("load-screen__message");return e.appendChild(n),e.appendChild(t),BeFunky.onDocumentReady(function(){e.parentElement||document.body.appendChild(e)}),function(e){var n=function(){return BeFunky.confirm("confirm_cancel",{onConfirm:function(){g=void 0,y(),"function"==typeof m&&m()},onCancel:function(){g=void 0},confirmText:"yes",cancelText:"no"})};e.addEventListener("click",function(){p&&(g=n())}),document.addEventListener("keyup",function(e){if(l&&!g&&27===e.which){var t=BeFunky.getModal();t&&t.isDialog||(e.stopImmediatePropagation(),p&&(g=n()))}})}(e),{containerElement:e,irisElement:n,messageElement:t}}(),r=o.containerElement,a=o.irisElement,i=o.messageElement,s="load-screen--active",l=!1,u=!1,c="",d=void 0,p=!1,m=void 0,g=void 0;function y(){l&&(l=!1,r.removeClass(s),i.innerHTML="",c="",f(!1),"function"==typeof g&&g())}function f(e){u!==e&&(u=e,e?a.show():a.hide())}BeFunky.showLoadScreen=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.message,t=void 0===n?"":n,o=e.showIris,a=void 0===o||o,u=e.progress,g=void 0===u?"":u,y=e.isCancellable,h=void 0===y||y,v=e.onCancel;l=!0;var k="";t&&(k+=function(e){try{return BeFunky.LanguageManager.getString(e)}catch(n){return e}}(t)),"number"==typeof g&&(g+="%"),"string"==typeof g&&g&&(k+=' <strong class="load-screen__progress">'+g+"</strong>"),i.innerHTML=k,c=t,f(a),t||a||BeFunky.throwError("Please specify a message when hiding the load screen iris"),r.addClass(s),function(e,n){if(clearTimeout(d),p=!1,e){var t="function"==typeof n?500:1500;d=setTimeout(function(){p=!0,m=n},t)}}(h,v)},BeFunky.hideLoadScreen=y,BeFunky.moveLoadScreen=function(e){e!==r.parentElement&&e.appendChild(r)},BeFunky.getLoadScreenMessage=function(){return c},BeFunky.isLoadScreenActive=function(){return l}},{}],9:[function(e,n,t){var o,r,a=function(){return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,n){var t=[],o=!0,r=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(o=(i=s.next()).done)&&(t.push(i.value),!n||t.length!==n);o=!0);}catch(e){r=!0,a=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw a}}return t}(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=e("body-scroll-lock"),s=((o=document.createElement("div").setClass("modal-root modal-root--is-inactive")).id="modal_root",BeFunky.onDocumentReady(function(){o.parentElement||document.body.appendChild(o)}),o),l=[],u=void 0,c={"extra-small":[320],small:[400],medium:[576],large:[960],"extra-large":[1280,800]},d=void 0;function p(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=function(e){if(e instanceof HTMLElement){if(!e.id)throw new Error("Modal elements must have unique IDs");return{modalElement:e,modalID:e.id}}if("string"==typeof e){var n=document.getElementById(e);if(!n)throw new Error("Unable to get modal element with id = "+e);return{modalElement:n,modalID:e}}throw new Error("Invalid modal element or id: "+BeFunky.getType(e))}(e),o=t.modalElement,r=t.modalID,a={closeOnClickOutside:!0,closeOnEscape:!0,destroyOnClose:!1,isCritical:!1,isDialog:!1,addSiteClass:!1,addCloseButton:!1,onOpen:void 0,onClose:void 0,onWindowResize:void 0,onArrowClick:void 0,size:void 0};void 0===n.size||Object.keys(c).includes(n.size)||(BeFunky.throwError("Invalid modal size: "+n.size+" - "+BeFunky.getType(n.size)),n.size=void 0),n=Object.assign({},a,n);var i,p,m,y=l.findIndex(function(e){return e.modalID===r}),v=-1!==y,k=v?l[y]:(i=function(e){var n=document.createElement("div").setClass("modal-root__outer"),t=document.createElement("div").setClass("modal-root__inner");return n.appendChild(t),t.appendChild(e),{outerContainer:n,innerContainer:t}}(o),p=i.innerContainer,m=i.outerContainer,{modalID:r,modalElement:o,isVisible:!0,innerContainer:p,outerContainer:m});if(Object.assign(k,n),v&&l.splice(y,1),k.isCritical)l.push(k);else{var w=l.findIndex(function(e){return e.isCritical});-1===w?l.push(k):l.splice(w,0,k)}k.lastOpened=Date.now(),function(e){var n="function"==typeof e.onArrowClick,t=Array.isArray(e.arrowButtons);if(n===t)return;n?function(e){var n=function(n){var t=document.createElement("div").setClass("modal-root__arrow-container"),o=document.createElement("button").setClass("modal-root__arrow-button modal-root__arrow-button--"+n+" button button--icon button--grey");return o.setAttribute("aria-label","left"===n?"Previous":"Next"),o.innerHTML=BeFunky.getSvgHtml("global-arrow-icon"),o.addEventListener("click",function(){return e.onArrowClick(n)}),t.appendChild(o),{container:t,button:o}},t=n("left"),o=t.button,r=t.container,a=n("right"),i=a.button,s=a.container;e.arrowButtons=[o,i];var l=e.outerContainer;l.insertBefore(r,e.innerContainer),l.appendChild(s)}(e):function(e){e.arrowButtons.map(function(e){return e.parentElement}).forEach(function(n){e.outerContainer.removeChild(n)}),delete e.arrowButtons}(e)}(k),function(e){var n=!0===e.addCloseButton,t=!!e.closeButton;if(n===t)return;n?function(e){var n=document.createElement("button").setClass("button button--icon modal-root__close-button");n.setAttribute("aria-label","Close"),n.innerHTML=BeFunky.getSvgHtml("global-cancel-icon"),n.addEventListener("click",function(){n.dispatchEvent(new Event("CLOSE"))}),e.closeButton=n,e.innerContainer.appendChild(n)}(e):function(e){e.innerContainer.removeChild(e.closeButton)}(e)}(k),k.outerContainer.toggleClass("site",k.addSiteClass),v?(k.outerContainer.removeClass("modal-root__outer--is-hidden"),k.isVisible=!0):function(e){s.appendChild(e)}(k.outerContainer);var b=l.filter(function(e){return e.isVisible});b.forEach(function(e,n){var t=e.outerContainer;t.setStyles({zIndex:n+1}),t.toggleClass("modal-root__outer--is-bottommost",0===n),t.toggleClass("modal-root__outer--is-topmost",n===b.length-1)}),u=b[b.length-1],h([k]),d=document.activeElement,f(k.outerContainer),g(),"function"==typeof k.onOpen&&k.onOpen()}function m(e){var n="string"==typeof e?e:e.id;if(!n)throw new Error("Missing modal ID");var t=l.findIndex(function(e){return e.modalID===n});if(-1===t)throw new Error("Specified modal "+n+" is not on screen");var o,r=l[t];r.outerContainer.addClass("modal-root__outer--is-hidden"),r.isVisible=!1,(u=l.slice().reverse().find(function(e){return e.isVisible}))&&u.outerContainer.addClass("modal-root__outer--is-topmost"),y(r.destroyOnClose)&&(l.splice(t,1),o=r.outerContainer,s.removeChild(o)),u?u.modalElement.contains(d)&&d.offsetParent?d.focus():f(u.outerContainer):d&&d.offsetParent&&d.focus(),g(),"function"==typeof r.onClose&&r.onClose()}function g(){s.toggleClass("modal-root--is-inactive",!u).toggleClass("modal-root--is-dialog",u&&u.isDialog),u?i.disableBodyScroll(s):i.clearAllBodyScrollLocks()}function y(e){return"function"==typeof e&&(e=e()),!!e}function f(e){e.setAttribute("tabindex","0"),e.focus(),e.addEventListener("blur",function n(){e.removeEventListener("blur",n),e.removeAttribute("tabindex")})}function h(e){requestAnimationFrame(function(){var n={availableWidth:window.innerWidth-32,availableHeight:window.innerHeight-32},t=n.availableWidth,o=n.availableHeight;e.filter(function(e){var n=e.isVisible,t=e.size,o=e.onWindowResize;return n&&(t||"function"==typeof o)}).reverse().forEach(function(e){var n=e.onWindowResize,r=e.size,i=e.modalElement;if(r){var s=a(c[r],2),l=s[0],u=s[1],d=Math.min(t,l),p=u?Math.min(o,u):o;i.setStyles({width:d+"px",height:u?p+"px":""}),"function"==typeof n&&n({availableWidth:d,availableHeight:p})}"function"==typeof n&&n({availableWidth:t,availableHeight:o})})})}BeFunky.addArrowKeyHandler({condition:function(){return u&&"function"==typeof u.onArrowClick},callback:function(e,n,t){if("keyup"===t.type&&("left"===n||"right"===n)){var o="left"===n?0:1;u.arrowButtons[o].disabled||u.onArrowClick(n)}}}),document.addEventListener("keyup",function(e){if(27===e.which&&u){var n=u,t=n.modalID,o=n.closeOnEscape;e.stopImmediatePropagation(),y(o)&&(m(t),BeFunky.reportUserAction("User closed "+t+" modal by pressing Escape"))}}),r=!1,s.addEventListener(BeFunky.pointerdown,function(e){r=u.outerContainer!==e.target}),s.addEventListener("click",function(e){if(!r&&u){var n=u,t=n.outerContainer,o=n.closeOnClickOutside,a=n.modalID;e.target===t&&(Date.now()-u.lastOpened<500||y(o)&&(m(a),BeFunky.reportUserAction("User closed "+a+" modal by clicking outside")))}}),s.addEventListener("CLOSE",function(e){var n=e.target.closest(".modal-root__inner"),t=n.firstElementChild;n===u.innerContainer?m(t):BeFunky.throwError("CLOSE fired unexpectedly in non-topmost modal",t,t&&t.id)},!0),window.addEventListener("resize",BeFunky.debounce(function(){return h(l.slice())},100)),BeFunky.openModal=p,BeFunky.closeModal=m,BeFunky.toggleModal=function(e,n,t){e?p(n,t):m(n)},BeFunky.getModal=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,n="string"==typeof e?l.find(function(n){return n.modalID===e}):u;return n?Object.assign({},n):void 0},BeFunky.isModalOpen=function(){return!!u},BeFunky.moveModalRoot=function(e){e!==s.parentElement&&e.appendChild(s)}},{"body-scroll-lock":68}],10:[function(e,n,t){var o=document.createElement("div").addClass("notifications");function r(e){return!("string"!=typeof e||!e.length)||!(!Array.isArray(e)||"string"!=typeof e[0]||!e[0].length)}function a(e){e&&o.removeChild(e)}BeFunky.onDocumentReady(function(){var e=document.querySelector(".section");e?e.insertBefore(o,e.firstChild):BeFunky.logError("Failed to append notifications container b/c section was not found")}),BeFunky.showNotification=function(e){var n=e.message,t=e.button,i=e.isDismissable,s=void 0===i||i,l=e.onDismiss,u=e.type,c=void 0===u?"error":u;if(!r(n))throw new Error("Invalid message");if(t&&!r(t.text))throw new Error("Invalid button");if(!["error","warning","success"].includes(c))throw new Error("Invalid type");t&&"function"!=typeof t.onClick&&(t.onClick=function(){}),"function"!=typeof l&&(l=function(){});var d=document.createElement("div").setClass("notification notification--"+c),p=document.createElement("string").setLang(n),m=void 0;t&&(m=document.createElement("button").setLang(t.text).setClass("button button--small button--link")).addEventListener("click",t.onClick);var g=document.createElement("div").setClass("notification__content");if(g.appendChild(p),m&&g.appendChild(m),d.appendChild(g),s){var y=document.createElement("button").setClass("button button--transparent button--icon button--small");y.innerHTML=BeFunky.getSvgHtml("global-cancel-icon",{classes:"icon icon-size-small"}),y.addEventListener("click",function(){l(),a(d)}),d.appendChild(y)}return function(e){o.insertBefore(e,o.firstChild)}(d),window.scrollTo(0,0),function(){return a(d)}}},{}],11:[function(e,n,t){function o(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}BeFunky.onDocumentReady(function(){document.getElementById("site_root")&&function(){var e=document.querySelectorAll(".site-footer__language-choice a");function n(){var n=[].concat(o(e)).find(function(e){return e.getAttribute("data-choose-lang")===BeFunky.LanguageManager.siteLanguage});n&&(document.querySelector(".site-footer__current-language").textContent=n.textContent)}n(),[].concat(o(e)).forEach(function(e){e.addEventListener("click",function(t){t.preventDefault();var o=e.getAttribute("data-choose-lang");if(!BeFunky.LanguageManager.siteLanguages.includes(o))return BeFunky.throwError("Language link missing valid language ID",o);var r=e.href.split("?")[0].split("#")[0]!==window.location.href.split("?")[0].split("#")[0],a=!1,i=BeFunky.Params.siteUrl+"oauth.php?mode=langEdit&lang="+o+"&CSRFtoken="+window.getCsToken();function s(){a||(a=!0,window.location.href=e.href)}BeFunky.request(i,{responseType:"text"},function(e){var n=e.error;n&&BeFunky.logError("Unable to change language",n),r&&s()}),r&&(BeFunky.showLoadScreen(),setTimeout(function(){BeFunky.throwError("Language change timed out after 1500ms"),setTimeout(s,50)},1500)),BeFunky.LanguageManager.siteLanguage=o,BeFunky.LanguageManager.language=o,n()})}),[].concat(o(document.querySelectorAll("#get_started_modal .button"))).forEach(function(e){e.addEventListener("click",function(){return BeFunky.closeModal("get_started_modal")})})}()})},{}],12:[function(e,n,t){var o=function(){return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,n){var t=[],o=!0,r=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(o=(i=s.next()).done)&&(t.push(i.value),!n||t.length!==n);o=!0);}catch(e){r=!0,a=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw a}}return t}(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function r(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}var a=e("tabbable");function i(){var e=document.querySelector(".site-nav__popup-root"),n=document.querySelector(".site-nav__hamburger"),t=document.querySelector(".site-nav__popup-close"),o=document.querySelectorAll(".site-nav__popup-accordion"),a=document.getElementById("site_root");n.addEventListener("click",function(n){n.stopPropagation(),function(){if(i)return;i=!0,e.addClass("site-nav__popup-root--active"),a.addClass("site-root--site-nav-popup-active"),document.addEventListener("click",s)}()}),t.addEventListener("click",s),e.addEventListener("click",function(e){return e.stopPropagation()}),[].concat(r(o)).forEach(function(e){e.addEventListener("click",function(){return function(e){var n="site-nav__popup-accordion--open",t=e.hasClass(n);o.removeClass(n),t||e.addClass(n)}(e)})});var i=!1;function s(){i&&(i=!1,e.removeClass("site-nav__popup-root--active"),a.removeClass("site-root--site-nav-popup-active"),document.removeEventListener("click",s))}}BeFunky.updateSiteNavForUser=function(e,n,t){var a=document.getElementById("site_nav");if(a){var i=document.querySelector(".site-nav__user-circle"),s=[].concat(r(document.querySelectorAll(".site-nav__user-email"))),l=s.map(function(e){return e.parentElement});i.textContent=e.slice(0,1).toUpperCase()||"?",l.forEach(function(e){e.title=n}),s[0].textContent=u(n,20),s[1].textContent=u(n,25),a.removeClass("site-nav--not-signed-in").addClass("site-nav--signed-in"),t&&a.addClass("site-nav--user-is-plus"),window.innerWidth>767&&BeFunky.measureSiteNavDropdowns()}function u(e,n){var t=e.length-n;if(t<=0)return e;if(t>0){var r=Math.round(.618*n),a=e.split("@"),i=o(a,2),s=i[0],l=i[1];if(l.length<=r)return s.slice(0,s.length-t-1)+"...@"+l;if(s.length<r)return s+"@"+l.slice(0,l.length-t-1)+"...";var u=Math.ceil(t/2);return s.slice(0,s.length-u-1)+"...@"+l.slice(0,l.length-u-1)+"..."}}},BeFunky.onDocumentReady(function(){if(document.getElementById("site_root")&&(function(){var e=document.querySelector(".site-nav__dropdown-root"),n=document.querySelector(".site-nav__dropdown-bg"),t=document.querySelector(".site-nav__dropdown-container"),o=document.querySelector(".site-nav__dropdown-arrow"),r=Array.from(document.querySelectorAll(".site-nav__item[data-dropdown]")),i=Array.from(document.querySelectorAll(".site-nav__dropdown-section[data-dropdown]")),s=[],l=!1;function u(r){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(l!==r||a){l&&l!==r&&(l.opener.setAttribute("aria-expanded",!1),l.content.addClass("focus-avoid"),l=r,e.removeClass("site-nav__dropdown-root--disable-transitions")),l||(l=r,e.addClass("site-nav__dropdown-root--disable-transitions"),u(r,!0),document.addEventListener("mouseover",d),document.addEventListener("touchstart",d)),l=r;var i=Math.round(r.openerMidX-r.contentWidth/2+r.xOffset),c=Math.round(r.openerMidX+r.arrowOffset);o.setStyles({transform:"translateX("+c+"px)"}),t.setStyles({transform:"translateX("+i+"px)",width:r.contentWidth+"px",height:r.contentHeight+"px"}),n.setStyles({transform:"translateX("+i+"px) scaleX("+r.contentWidth/100+") scaleY("+r.contentHeight/100+")"}),s.forEach(function(e){var n=e.index,t=e.section,o=void 0;o=n<r.index?"left":n===r.index?"active":"right",t.setClass("site-nav__dropdown-section site-nav__dropdown-section--"+o)}),r.opener.setAttribute("aria-expanded",!0),e.removeClass("site-nav__dropdown-root--inactive"),r.content.removeClass("focus-avoid")}}function c(){l&&(l.opener.setAttribute("aria-expanded",!1),l.content.addClass("focus-avoid"),l=!1,e.addClass("site-nav__dropdown-root--inactive"),document.removeEventListener("mouseover",d),document.removeEventListener("touchstart",d))}function d(n){r.includes(n.target)||e.contains(n.target)||l&&l.content.contains(document.activeElement)||c()}function p(){window.isFlashOpenned||(e.setStyles({transform:"none",transition:"none"}),window.requestAnimationFrame(function(){s.forEach(function(e){var n=window.innerWidth,t=e.content.getBoundingClientRect(),o=e.opener.getBoundingClientRect(),r=o.left+o.width/2,a=r-t.width/2,i=r+t.width/2,s=0;a<0?s=a:window.innerWidth<i&&(s=n-i),Object.assign(e,{contentWidth:t.width,contentHeight:t.height,openerMidX:r,xOffset:s})}),e.setStyles({transform:"",transition:""}),l&&u(l,!0)}))}r.forEach(function(e){var n=e.getAttribute("data-dropdown"),t=i.find(function(e){return e.getAttribute("data-dropdown")===n});if(!t)return BeFunky.throwError('Unable to find dropdown section: "'+n+'"');var o=t.firstElementChild,r={index:s.length,name:n,opener:e,section:t,content:o,arrowOffset:parseInt(t.getAttribute("data-arrow-offset"))||-8};s.push(r),e.addEventListener("mouseenter",function(){u(r)}),e.addEventListener("click",function(){BeFunky.handleNextFocus(e,0,!1)}),e.delegateFocus=function(e){u(r);var n=a(o);return-1===e?n[n.length-1]:n[0]},o.addClass("focus-avoid"),o.exitFocusTrap=function(n){o.addClass("focus-avoid"),BeFunky.handleNextFocus(e,n),l===r&&c()},e.setAttribute("aria-haspopup",!0),e.setAttribute("aria-expanded",!1)}),(p=BeFunky.debounce(p,100))(),window.addEventListener("load",p),window.addEventListener("resize",p),BeFunky.LanguageManager.addLanguageUpdateListener(p),BeFunky.measureSiteNavDropdowns=p}(),i(),function(){[document.querySelector(".site-nav__dropdown-link--sign-out"),document.querySelector(".site-nav__popup-button--sign-out")].forEach(function(e){var n=window.location.href;n.endsWith("/")&&["/myphotos","/my-account"].every(function(e){return!n.includes(e)})&&(e.href+="?next="+encodeURIComponent(n))});var e=document.getElementById("site_nav"),n=document.querySelector(".section");n&&(n.hasClass("section--background-none")||n.hasClass("section--background-offwhite")?e.addClass("site-nav--over-light-background"):n.hasClass("section--background-dark")&&e.addClass("site-nav--over-dark-background"))}(),window.alreadySignedInUser)){var e=window.alreadySignedInUser,n=e.username,t=e.email,o=e.isPlus;BeFunky.updateSiteNavForUser(n,t,o)}})},{tabbable:70}],13:[function(e,n,t){BeFunky.Params.FlashPluginPanelStrings={tr:{title:"Chrome için Flash'ı etkinleştir",desc:"Chrome şu anda BeFunky'yi kullanman için Flash'ı etkinleştirmeni istiyor. Merak etme, bunu yapmak çok kolay. Aşağıdaki '<span style=\"font-weight:700;\">Flash'ı Etkinleştir</span>' düğmesine tıkla, sonra Chrome'un bilgi isteği penceresi açılınca '<span style=\"font-weight:700;\">İzin Ver</span>'e tıkla.",btn:"Flash'ı Etkinleştir",lnk:'Hâlâ sorun yaşıyorsan <a href="https://support.befunky.com/hc/en-us/articles/218015043-How-to-enable-Flash-Player" target="_blank" style="color: #387DCD !important;">buraya tıkla</a>.',wait:"Befunky Yüklenirken Lütfen Bekleyin..."},ru:{title:"Включить Flash в Chrome",desc:"Для использования BeFunky вам необходимо активировать работу Flash в браузере Chrome. Не волнуйтесь, в этом нет ничего сложного. Нажмите кнопку '<span style=\"font-weight:700;\">Включить Flash</span>' ниже, а затем нажмите '<span style=\"font-weight:700;\">Разрешить</span>' при появлении запроса от Chrome.",btn:"Включить Flash",lnk:'Если вам не удалось решить проблему, <a href="https://support.befunky.com/hc/en-us/articles/218015043-How-to-enable-Flash-Player" target="_blank" style="color: #387DCD !important;">нажмите здесь</a>',wait:"Пожалуйста, подождите, BeFunky загружается…"},es:{title:"Habilitar Flash para Chrome",desc:"Chrome ahora requiere que habilites Flash para usar BeFunky, pero no hay de qué preocuparse, es muy fácil de hacer. Haz clic en el botón '<span style=\"font-weight:700;\">Habilitar Flash</span>' que aparece abajo y después en '<span style=\"font-weight:700;\">Permitir</span>' cuando aparezca el mensaje de Chrome.",btn:"Habilitar Flash",lnk:'Si aún tienes dificultades, <a href="https://support.befunky.com/hc/en-us/articles/218015043-How-to-enable-Flash-Player" target="_blank" style="color: #387DCD !important;">haz clic aquí</a>.',wait:"Por favor, espere mientras se carga BeFunky..."},pt:{title:"Habilitar flash para Chrome",desc:"O Chrome agora requer que você habilite o Flash para utilizar o BeFunky. Não se preocupe, é fácil. Clique no botão '<span style=\"font-weight:700;\">Habilitar Flash</span>' abaixo e depois clique em '<span style=\"font-weight:700;\">Permitir</span>' quando o aviso do Chrome for exibido.",btn:"Habilitar Flash",lnk:'Caso você ainda esteja tendo problemas, <a href="https://support.befunky.com/hc/en-us/articles/218015043-How-to-enable-Flash-Player" target="_blank" style="color: #387DCD !important;">clique aqui</a>.',wait:"Aguarde enquanto o BeFunky é carregado…"},fr:{title:"Activer Flash pour Chrome",desc:"Chrome vous demande maintenant d'activer Flash pour utiliser BeFunky. Ne vous inquiétez pas, c'est très simple. Cliquez sur le bouton '<span style=\"font-weight:700;\">Activer Flash</span>' ci-dessous puis sur '<span style=\"font-weight:700;\">Autoriser</span>' à l'invite de Chrome.",btn:"Activer Flash",lnk:'Si le problème persiste, <a href="https://support.befunky.com/hc/en-us/articles/218015043-How-to-enable-Flash-Player" target="_blank" style="color: #387DCD !important;">cliquez ici</a>.',wait:"Veuillez patienter pendant que BeFunky charge..."},de:{title:"Aktivieren Sie Flash für Chrome",desc:"Chrome erfordert nun, dass Sie Flash aktivieren, sodass Sie BeFunky nutzen können. Keine Sorge, das ist einfach. Klicken Sie unten auf die Schaltfläche '<span style=\"font-weight:700;\">Flash aktivieren</span>' und anschließend, wenn die Aufforderung von Chrome erscheint, auf '<span style=\"font-weight:700;\">Zulassen</span>'.",btn:"Flash aktivieren",lnk:'Sollten Sie dennoch Probleme haben, <a href="https://support.befunky.com/hc/en-us/articles/218015043-How-to-enable-Flash-Player" target="_blank" style="color: #387DCD !important;">klicken Sie hier</a>.',wait:"Bitte warten, während BeFunky geladen wird..."},it:{title:"Abilita Flash per Chrome",desc:"Ora, Chrome ti richiede di abilitare Flash per usare BeFunky. Non preoccuparti, puoi farlo facilmente. Clicca sul tasto '<span style=\"font-weight:700;\">Abilita Flash</span>' qui sotto, poi su '<span style=\"font-weight:700;\">Consenti</span>' quando viene visualizzata la richiesta di Chrome.",btn:"Abilita Flash",lnk:'Se continui ad avere problemi, <a href="https://support.befunky.com/hc/en-us/articles/218015043-How-to-enable-Flash-Player" target="_blank" style="color: #387DCD !important;">clicca qui</a>',wait:"Attendi il caricamento di BeFunky..."},ar:{title:"تمكين Flash لمستعرض Chrome",desc:"يتطلب مستعرض Chrome الآن تمكين الإضافة Flash لاستخدام BeFunky. لا داعي للقلق، فهذا أمر سهل تنفيذه. انقر فوق الزر تمكين 'Flash' أدناه، ثم انقر فوق السماح عندما تظهر مطالبة مستعرض Chrome بذلك.",btn:"تمكين Flash",lnk:'<a href="https://support.befunky.com/hc/en-us/articles/218015043-How-to-enable-Flash-Player" target="_blank" style="color: #387DCD !important;">إذا كنت لا تزال تواجه مشكلات، فانقر هنا.</a>',wait:"يُرجى الانتظار بينما يتم تحميل BeFunky…"},zh:{title:"在Chrome上启用Flash",desc:'Chrome现在需要您启用Flash才能使用BeFunky。别担心，这很容易做到。点击下面的"<span style="font-weight:700;">启用Flash</span>"按钮，然后在Chrome的提示出现时点击"<span style="font-weight:700;">允许</span>"。',btn:"启用Flash",lnk:'如果您仍有问题，<a href="https://support.befunky.com/hc/en-us/articles/218015043-How-to-enable-Flash-Player" target="_blank" style="color: #387DCD !important;">请点击此处。</a>',wait:"请等待BeFunky加载…"},ja:{title:"ChromeでFlashを有効にしてください",desc:'BeFunkyを利用するには、ChromeでFlashを有効にする必要があります。でも、ご心配なく。簡単に設定できます。下の[<span style="font-weight:700;">Flashを有効にする</span>]ボタンをクリックし、Chromeのダイアログが表示されたら、[<span style="font-weight:700;">許可する</span>]をクリックしてください。',btn:"Flashを有効にする",lnk:'それでも問題が解決しない場合は、<a href="https://support.befunky.com/hc/en-us/articles/218015043-How-to-enable-Flash-Player" target="_blank" style="color: #387DCD !important;">こちらをクリックしてください。</a>',wait:"BeFunkyをロード中です。少々お待ちください・・・"},ko:{title:"Chrome 전용 플래시 활성화",desc:'지금 Chrome은 BeFunky를 사용하기 이해 플래시를 활성화해야 합니다. 하지만, 걱정하지 마십시오. 이는 간단하게 실시할 수 있습니다. 아래 ‘<span style="font-weight:700;">플래시 활성화</span>’ 버튼을 클릭한 다음, Chrome 메시지가 표시되면 ‘<span style="font-weight:700;">허용</span>’을 클릭합니다.',btn:"플래시 활성화",lnk:'그래도 문제가 지속되는 경우, <a href="https://support.befunky.com/hc/en-us/articles/218015043-How-to-enable-Flash-Player" target="_blank" style="color: #387DCD !important;">여기를 클릭하십시오</a>.',wait:"BeFunky를 로드하는 동안 기다려 주십시오..."},def:{title:"Enable Flash For Chrome",desc:"Chrome now requires you to enable Flash to use BeFunky. Don't worry, it's easy to do. Click the '<span style=\"font-weight:700;\">Enable Flash</span>' button below, then click '<span style=\"font-weight:700;\">Allow</span>' when Chrome's prompt appears.",btn:"Enable Flash",lnk:'If you\'re still having trouble, <a href="https://support.befunky.com/hc/en-us/articles/218015043-How-to-enable-Flash-Player" target="_blank" style="color: #387DCD !important;">click here</a>',wait:"Please Wait While BeFunky Loads..."}}},{}],14:[function(e,n,t){window.language=window.navigator.languages?window.navigator.languages[0]:window.navigator.language||window.navigator.userLanguage||navigator.browserLanguage||navigator.systemLanguage,window.browserlng="en";try{var o=language.substr(0,2);"ar"!=o&&"tr"!=o&&"ru"!=o&&"ko"!=o&&"it"!=o&&"de"!=o&&"es"!=o&&"zh"!=o&&"ja"!=o&&"pt"!=o&&"fr"!=o||(window.browserlng=o)}catch(e){}BeFunky.Params={isSecure:!1,url:"",imagesUrl:"",profilePicturePath:"",authe:!1,siteUrl:"",siteUrlSecured:"",galleryUserId:"",galleryImageId:"",loggedInUserkey:"",galleryUserNick:"",exploreUserNick:"",isSocialUser:"false",facebookUserAge:-1,socialLoginCount:0,nextUri:"",swfUrl:"",swfId:"",swfVersion:"",swfFlashVars:{},openurl:"",SessionLoginCount:"",isPageExplore:"",isPageGallery:"",isLoggedIn:"false",pageType:"",menuType:"",followStatus:"",gelleryMode:"",loggedInUserNick:"",totalImageCount:"",usersImagesCount:0,isShowAds:0}},{}],15:[function(e,n,t){BeFunky.User={email:"",username:"",language:"",galleryPrivacy:"",isNewUser:!1,FlashVarsObject:{user_name:"",email:"",pl:"",isGalleryPrivacy:"",high_resolution:"",watermark:"",multiple_file_upload:"",isOpenBefunkyGalleryShare:""},ppicsrc:null,SetUserData:function(){},counts:{myPhotos:0,followers:0,following:0,publicPhotos:0},aboutYouText:null,profileBackground:null}},{}],16:[function(e,n,t){e("./polyfills/Array"),e("./polyfills/Object"),e("./polyfills/String"),e("./polyfills/DOM"),e("./managers/BeFunkyInit"),e("./datas/BeFunkyParamsVo"),e("./datas/BeFunkyUserVo"),e("./datas/BeFunkyFlashPluginLang"),e("./utils/Logging"),e("./utils/BrowserSettings"),e("./utils/DOMExtensions"),e("./utils/PointerEvents"),e("./utils/Helpers"),e("./utils/Request"),e("./managers/LanguageManager"),e("./components/load_iris"),e("./components/load_screen"),e("./components/notification"),e("./managers/Router"),e("./components/site_nav"),e("./components/site_footer"),e("./managers/BeFunkyApplicationManager"),e("./managers/WindowSizeHelper"),e("./managers/GlobalHelpers"),e("./managers/GlobalEventManager"),e("./managers/BeFunkyModalManager"),e("./managers/CaptchaWidget"),e("./managers/CookieManager"),e("./managers/AdManager"),e("./managers/DigicertManager"),e("./managers/BeFunkyAccountClose"),e("./managers/SystemInformationManager"),e("./managers/WebGLSupportChecker"),e("./managers/GoogleManager"),e("./managers/DropboxManager"),e("./managers/SocialMediaManager"),e("./managers/PanelsCallFromFlash"),e("./managers/ArrowKeyManager"),e("./services/BeFunkyImagesService"),e("./services/FacebookAuth"),e("./modals/BeFunkyThankYouModal"),e("./modals/BeFunkyWelcomeModal"),e("./modals/ImageLibrary"),e("./modals/LoginRegisterFpModal"),e("./modals/MessageModal"),e("./modals/StatementModal"),e("./modals/TeaserModal"),e("./modals/UpgradeModal"),e("./modals/UserPhotoModal"),e("./modals/VimeoModal"),e("./components/modal"),e("./modals/Dialog"),e("./components/acknowledge_dialog"),e("./components/confirmation_dialog"),e("./managers/FocusTabManager"),e("./managers/PrismicButtonManager"),e("./components/image_comparison"),e("./components/image_gallery"),e("./components/image_gallery_item"),e("./pages/page_explore"),e("./pages/page_gallery"),e("./pages/page_my_photos"),e("./pages/page_single_image"),e("./pages/page_my_account")},{"./components/acknowledge_dialog":1,"./components/confirmation_dialog":2,"./components/image_comparison":4,"./components/image_gallery":5,"./components/image_gallery_item":6,"./components/load_iris":7,"./components/load_screen":8,"./components/modal":9,"./components/notification":10,"./components/site_footer":11,"./components/site_nav":12,"./datas/BeFunkyFlashPluginLang":13,"./datas/BeFunkyParamsVo":14,"./datas/BeFunkyUserVo":15,"./managers/AdManager":18,"./managers/ArrowKeyManager":19,"./managers/BeFunkyAccountClose":20,"./managers/BeFunkyApplicationManager":21,"./managers/BeFunkyInit":22,"./managers/BeFunkyModalManager":23,"./managers/CaptchaWidget":24,"./managers/CookieManager":25,"./managers/DigicertManager":26,"./managers/DropboxManager":27,"./managers/FocusTabManager":28,"./managers/GlobalEventManager":29,"./managers/GlobalHelpers":30,"./managers/GoogleManager":31,"./managers/LanguageManager":32,"./managers/PanelsCallFromFlash":33,"./managers/PrismicButtonManager":34,"./managers/Router":35,"./managers/SocialMediaManager":36,"./managers/SystemInformationManager":37,"./managers/WebGLSupportChecker":38,"./managers/WindowSizeHelper":39,"./modals/BeFunkyThankYouModal":40,"./modals/BeFunkyWelcomeModal":41,"./modals/Dialog":42,"./modals/ImageLibrary":43,"./modals/LoginRegisterFpModal":44,"./modals/MessageModal":45,"./modals/StatementModal":46,"./modals/TeaserModal":47,"./modals/UpgradeModal":48,"./modals/UserPhotoModal":49,"./modals/VimeoModal":50,"./pages/page_explore":51,"./pages/page_gallery":52,"./pages/page_my_account":53,"./pages/page_my_photos":54,"./pages/page_single_image":55,"./polyfills/Array":56,"./polyfills/DOM":57,"./polyfills/Object":58,"./polyfills/String":59,"./services/BeFunkyImagesService":60,"./services/FacebookAuth":61,"./utils/BrowserSettings":62,"./utils/DOMExtensions":63,"./utils/Helpers":64,"./utils/Logging":65,"./utils/PointerEvents":66,"./utils/Request":67}],17:[function(e,n,t){var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e("./global"),"function"==typeof window.webGLSupportControl?window.isBeFunkyCoreLoaded=!0:(console.log("unexpected execution : window.webGLSupportControl = "+o(window.webGLSupportControl)),setTimeout(function(){window.isBeFunkyCoreLoaded=!0},333))},{"./global":16}],18:[function(e,n,t){window.flashFreeTop=100,window.isflashFreeRight=!0,window.flashFreeRight=170,window.adRefreshCounter=0,window.googletag=window.googletag||{},googletag.cmd=googletag.cmd||[],window.ad_slot1=null,window.ad_slot2=null,window.ad_slot3=null,window.is_ads_added=!1,window.is_ads_initted=!1,window.slot_rendered_count=0,window.isadblocked=!1,window.checkAdblockIntervarCount=0,window.initAds=function(){"none"===document.querySelector(".doubleclick").style.display?(slot_rendered_count=0,checkAdblockIntervarCount=5,checkAdBlocker(!1,!0)):(!function(){var e=document.createElement("script");e.async=!0,e.type="text/javascript";var n="https:"==document.location.protocol;e.src=(n?"https:":"http:")+"//www.googletagservices.com/tag/js/gpt.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}(),googletag.cmd.push(function(){googletag.pubads().enableSingleRequest(),googletag.enableServices(),is_ads_initted=!0,googletag.pubads().addEventListener("slotRenderEnded",function(e){slot_rendered_count+=1})}))},window.addAds=function(){0!=is_ads_initted?(null!=ad_slot1&&0!=is_ads_initted&&googletag.destroySlots([ad_slot1]),ad_slot1=null,is_ads_added=!1,googletag.cmd.push(function(){ad_slot1=googletag.defineSlot("/291414075/BeFunky_AllPages_Above_The_Fold_970_90",[728,90],"div-gpt-ad-1466445154244-0").addService(googletag.pubads())}),setTimeout(function(){null!=ad_slot1&&0!=is_ads_initted&&0==is_ads_added&&(googletag.cmd.push(function(){googletag.display("div-gpt-ad-1466445154244-0")}),is_ads_added=!0,addRightAds(isFlashCreationComplated))},333)):0==isadblocked?setTimeout("addAds()",100):setTimeout("checkAdBlocker(true)",555)},window.addRightAds=function(e){if(flashFreeRight>0&&1==isflashFreeRight&&BeFunky.Params.isShowAds>0&&0==("1"==BeFunky.User.FlashVarsObject.pl||BeFunky.User.FlashVarsObject.pl>0)){try{document.getElementById("0x00001002").style.cssText+=";display: block !important;"}catch(e){}if(1==is_ads_added&&0!=is_ads_initted){null!=ad_slot2&&googletag.destroySlots([ad_slot2]),ad_slot2=null,ad_slot3=null;Date.now();googletag.cmd.push(function(){ad_slot2=googletag.defineSlot("/291414075/wide_skyscrapper",[160,600],"div-gpt-ad-1466462088410-0").addService(googletag.pubads())}),setTimeout(function(){try{var e=setInitFlashHeight()/2-300;if(e<5&&(e=5),document.getElementById("0x00001002").setStyles({"padding-top":e+"px"}),170==flashFreeRight&&null!=ad_slot2)try{googletag.cmd.push(function(){googletag.display("div-gpt-ad-1466462088410-0")})}catch(e){}if(0==slot_rendered_count)setTimeout("checkAdBlocker()",1e3);else try{document.getElementById("bfn-plus-dsp-bottom").style.cssText+=";display: none !important;",document.getElementById("bfn-plus-dsp-right").style.cssText+=";display: none !important;"}catch(e){}}catch(e){}},555)}else 0==slot_rendered_count&&setTimeout("checkAdBlocker()",1e3)}},window.checkAdBlocker=function(e,n){try{document.getElementById("bfn-plus-dsp-bottom").style.cssText+=";display: none !important;",document.getElementById("bfn-plus-dsp-right").style.cssText+=";display: none !important;"}catch(e){}if(0==slot_rendered_count)if(checkAdblockIntervarCount>4){if(isadblocked=!0,e||window.bf_eventTrack("EXTERNAL","AD_BLOCK","OPENED"),0==(n|=!1)&&BeFunky.Params.isShowAds>0&&0==("1"==BeFunky.User.FlashVarsObject.pl||BeFunky.User.FlashVarsObject.pl>0)){try{document.getElementById("bfn-plus-dsp-bottom").style.cssText+=";display: block !important;",document.querySelector("#bfn-plus-dsp-bottom img").dataset.src!=document.querySelector("#bfn-plus-dsp-bottom img").src&&(document.querySelector("#bfn-plus-dsp-bottom img").src=document.querySelector("#bfn-plus-dsp-bottom img").dataset.src)}catch(e){}if(flashFreeRight>0&&1==isflashFreeRight){document.getElementById("0x00001002").style.cssText+=";display: block !important;";var t=setInitFlashHeight()/2-300;t<5&&(t=5),document.getElementById("0x00001002").setStyles({"padding-top":t+"px"});try{document.getElementById("bfn-plus-dsp-right").style.cssText+=";display: block !important;",document.querySelector("#bfn-plus-dsp-right img").dataset.src!=document.querySelector("#bfn-plus-dsp-right img").src&&(document.querySelector("#bfn-plus-dsp-right img").src=document.querySelector("#bfn-plus-dsp-right img").dataset.src)}catch(e){}}}}else checkAdblockIntervarCount+=1,setTimeout("checkAdBlocker()",1e3)},window.removeAds=function(e){if(1!=e){try{document.getElementById("reklamDiv").style.cssText+=";display: none !important;",document.getElementById("0x00001002").style.cssText+=";display: none !important;"}catch(e){}document.getElementById("reklamDiv").innerHTML="",document.getElementById("0x00001002").innerHTML=""}flasRightBarAdDisplay(!0,e)},window.refreshAds=function(e){setTimeout(function(){try{1==is_ads_added&&null!=ad_slot1&&0!=is_ads_initted&&BeFunky.Params.isShowAds>0&&0==("1"==BeFunky.User.FlashVarsObject.pl||BeFunky.User.FlashVarsObject.pl>0)&&"none"!=document.getElementById("reklamDiv").style.display&&(googletag.pubads().refresh([ad_slot1]),null!=ad_slot2&&170==flashFreeRight&&"none"!=document.getElementById("reklamDiv").style.display?googletag.pubads().refresh([ad_slot2]):null!=ad_slot3&&130==flashFreeRight&&googletag.pubads().refresh([ad_slot3]))}catch(e){}},2500)},window.flasRightBarAdDisplay=function(e,n){var t=!1;if(null!=e&&1==e&&(t=!0),1==t)try{if(1!=n){document.getElementById("reklamDiv").removeClass("top-reklam-with-app").addClass("top-reklam-normal"),document.getElementById("relamIc").removeClass("top-reklam-with-app").addClass("top-reklam-normal");try{document.getElementById("reklamDiv").style.cssText+=";display: none !important;"}catch(e){}null!=ad_slot1&&0!=is_ads_initted&&(googletag.destroySlots([ad_slot1]),ad_slot1=null)}try{document.getElementById("0x00001002").style.cssText+=";display: none !important;"}catch(e){}null!=ad_slot2&&0!=is_ads_initted&&(googletag.destroySlots([ad_slot2]),ad_slot2=null)}catch(e){}else{try{document.getElementById("reklamDiv").removeClass("top-reklam-normal").addClass("top-reklam-with-app"),document.getElementById("relamIc").removeClass("top-reklam-normal").addClass("top-reklam-with-app");try{document.getElementById("reklamDiv").style.cssText+=";display: block !important;"}catch(e){}if(document.getElementById("0x00001002").innerHTML.length>0&&document.getElementById("div-gpt-ad-1466462088410-0").innerHTML.length>0&&flashFreeRight>0)try{document.getElementById("0x00001002").style.cssText+=";display: block !important;"}catch(e){}}catch(e){}try{BeFunky.Params.isShowAds>0&&addAds()}catch(e){}}}},{}],19:[function(e,n,t){var o={37:"left",39:"right",38:"up",40:"down"},r=[];function a(e){if(!BeFunky.isLoadScreenActive()){var n=o[e.keyCode];if(n){var t=document.activeElement;if(t){var a=r.find(function(e){return(0,e.condition)(t)});a&&(a.callback(t,n,e)||(e.stopImmediatePropagation(),e.preventDefault()))}}}}BeFunky.addArrowKeyHandler=function(e){"function"==typeof e.callback&&"function"==typeof e.condition?r.includes(e)||r.push(e):BeFunky.throwError("invalid arrow key handler",e)},document.addEventListener("keydown",a),document.addEventListener("keyup",a)},{}],20:[function(e,n,t){var o=function(){return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,n){var t=[],o=!0,r=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(o=(i=s.next()).done)&&(t.push(i.value),!n||t.length!==n);o=!0);}catch(e){r=!0,a=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw a}}return t}(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();BeFunky.closeAccount=function(e){var n={mode:"closeAccount",closeKey:e,CSRFtoken:window.getCsToken()},t=BeFunky.Params.siteUrl+"oauth.php",r={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Object.entries(n).map(function(e){var n=o(e,2);return n[0]+"="+n[1]}).join("&")};BeFunky.showLoadScreen(),BeFunky.request(t,r,function(e){var n=e.error,t=e.response;if(n||!t.server_response||"true"!==t.server_response.isSuccess)return BeFunky.hideLoadScreen(),BeFunky.throwError("Unable to close account",JSON.stringify({error:n,response:t})),void i();BeFunky.showLoadScreen({message:"closing_account",progress:0}),setTimeout(BeFunky.updateAccountCloseStatus,500)})};var r=!1,a=0;function i(){var e=document.createElement("div"),n=document.createElement("p").setLang("error_close_account"),t=document.createElement("p").setLang("error_close_account_solution",{contact_support:function(){return'<a href="https://support.befunky.com/hc/en-us/requests/new">'+BeFunky.LanguageManager.getString("contact_support")+"</a>"}});e.appendChild(n),e.appendChild(t),BeFunky.acknowledge(e)}BeFunky.updateAccountCloseStatus=function(){if(!r){r=!0;var e={mode:"accountCloseStatus",CSRFtoken:window.getCsToken()},n=BeFunky.Params.siteUrl+"oauth.php",t={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Object.entries(e).map(function(e){var n=o(e,2);return n[0]+"="+n[1]}).join("&")};BeFunky.request(n,t,function(e){var n=e.error,t=e.response;if(r=!1,n||!t.data)return BeFunky.hideLoadScreen(),BeFunky.throwError("Unable to get account close status",JSON.stringify({error:n,response:t})),void i();var o=parseInt(t.data.stepPercentageComplete)||0;if(o?a=o:a++,BeFunky.showLoadScreen({message:"closing_account",progress:a}),1===parseInt(t.data.isFinished))return BeFunky.hideLoadScreen(),void BeFunky.acknowledge("account_deleted",{onAcknowledge:function(){window.location.href=window.siteUrl+"sign-out/"}});setTimeout(BeFunky.updateAccountCloseStatus,100)})}}},{}],21:[function(e,n,t){function o(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}BeFunky.isUseHTML5=!0,BeFunky.html5app_created=!1,BeFunky.readyHtml5App=function(){if(!BeFunky.html5app_created&&!window.isMobile){BeFunky.showLoadScreen();var e=document.getElementById("bfn-app"),n=setInterval(function(){null!==BeFunky.appTemplate&&BeFunky.isUseHTML5&&null!==BeFunky.appTemplate&&!1===BeFunky.appTemplatePosted&&(e.appendChild(BeFunky.appTemplate.content),BeFunky.appTemplatePosted=!0),window.PIXI&&window.BFN&&window.BFN.readyApp&&null!==BeFunky.appTemplate&&BeFunky.svgSpriteLoaded&&(clearInterval(n),BeFunky.hideLoadScreen(),BFN.readyApp(function(){requestAnimationFrame(function(){BeFunky.html5app_created=!0,setTimeout(function(){try{BFN.BfnService.getUserData()}catch(e){}},333)})},function(){try{void 0!==BeFunky.Params.graphics_tag_version&&(BFN.assetsDataVersions.goodies_tags=BeFunky.Params.graphics_tag_version)}catch(e){}}))},10)}},BeFunky.appTemplate=null,BeFunky.appTemplatePosted=!1,BeFunky.prepareHtml5App=function(){BeFunky.isUseHTML5&&!window.isMobile&&Promise.all([BeFunky.loadSVGSprite,BeFunky.loadAppHTML()]).then(function(){flashCreationComplateHandler()},function(e){BeFunky.throwError("App could not start up b/c SVG or HTML failed to load",e)})},BeFunky.loadAppHTML=function(){return new Promise(function(e,n){var t=window.globalAssetsPath+"html/bfn-app-min"+BeFunky.Params.BFN_APP_HTML_VERSION+".txt",o=t.replace(window.staticServerUrl,window.staticServerUrlCloudFront),r={responseType:"text",fallbackURLs:[t,o]};BeFunky.request(t,r,function(o){var r=o.error,a=o.response;if(r)return BeFunky.logError("Unable to download app HTML txt file",t,r),n(r);BeFunky.appTemplate=document.createElement("template"),BeFunky.appTemplate.innerHTML=a,e()})})},BeFunky.svgSpriteLoaded=!1,BeFunky.loadSVGSprite=new Promise(function(e,n){var t=window.globalAssetsPath+"icons/sprite"+window.svgSpriteVersion+".svg",o=t.replace(window.staticServerUrl,window.staticServerUrlCloudFront),r={responseType:"text",fallbackURLs:[t,o]};BeFunky.request(t,r,function(t){var o=t.error,r=t.response;if(o)return BeFunky.logError("Unable to download SVG sprite",o),n(o);var a=r.match(/<svg ([\s\S]*?)<\/svg>/g);if(!a||!a[0])return BeFunky.logError("Invalid SVG sprite response:",r),n("invalid_response");BeFunky.onDocumentReady(function(){document.getElementById("svgContainer").innerHTML=a[0],BeFunky.svgSpriteLoaded=!0}),e()})}),window.caledFunctionName=null,window.calledParams=null,window.isFlashOpenned=!1,BeFunky.siteScrollY=0,window.openFlash=function(){if(console.log("Opening "+(BeFunky.isUseHTML5?"WebGL":"Flash")+" app"),window.isMobile)BeFunky.logError("App not opened b/c device is mobile");else{BeFunky.siteScrollY=window.pageYOffset||0,window.isFlashOpenned=!1!==BeFunky.Params.isFlashPlayerCorrect||!0===BeFunky.isUseHTML5;var e=document.getElementById("bfn-app"),n=document.getElementById("appl-for-flash");if(BeFunky.isUseHTML5&&e&&"block"===e.style.display)BeFunky.logError("openFlash called unnecessarily b/c WebGL app is already open");else{BeFunky.moveModalRoot(e),BeFunky.moveLoadScreen(e),document.getElementById("main").setStyles({top:"0px",left:"",width:setInitFlashWidth()+"px",height:setInitFlashHeight()+"px"});var t=document.getElementById("site_root")||document.getElementById("wrapper");if(t.setStyles({display:"none"}),t.contains(document.activeElement)&&(console.log("Removing focus from focused element on page while opening app."),document.activeElement.blur()),document.body.addClass("prevent-body-scroll"),BeFunky.LanguageManager.updateLanguageStrings(!0),BeFunky.isUseHTML5)return e.setStyles({display:"block"}),n.setStyles({display:"none"}),void BeFunky.readyHtml5App();n.setStyles({top:0,left:0,display:"block"}),e.setStyles({display:"none"});var o=document.getElementById(BeFunky.Params.swfId);try{o.setAttribute("width",setInitFlashWidth()),o.setAttribute("height",setInitFlashHeight())}catch(e){}BeFunky.isPlus()||1!==BeFunky.Params.isShowAds||calculateAdWidth(),window.scrollTo(0,0),BeFunky.isPlus()||1!==BeFunky.Params.isShowAds||flasRightBarAdDisplay(),setTimeout(function(){try{window.dispatchEvent(new Event("resize"))}catch(e){}},30);var r=void 0,a=o,i=setInterval(function(){a||(a=document.getElementById(BeFunky.Params.swfId)),isFlashCreationComplated?(clearInterval(i),r&&r()):r||a&&"function"===a.PercentLoaded||(r=BeFunky.promptUserToEnableFlash())},111)}}},BeFunky.cleanupEnterAppImmediately=function(){var e=document.getElementById("site_root");e?e.removeClass("site-root--enter-app-immediately"):BeFunky.throwError("Unable to find #site_root")},window.urlUpload=function(e,n,t){BeFunky.befunkyPopupContainerClose(),caledFunctionName=null!=t?t:"url",calledParams={url:e},(1==isFlashCreationComplated&&0==BeFunky.isUseHTML5||1==isFlashCreationComplated&&1==BeFunky.isUseHTML5&&1==BeFunky.html5app_created)&&callFunctionToSwitch()},window.designerTemplate=null,window.setDesignerTemplate=function(e){BeFunky.isUseHTML5?BFN.BfnService.updateDefaultDesignerTemplate(e):document.getElementById(BeFunky.Params.swfId).updateDefaultDesignerTemplate(e)},window.currentBlockedBrowser=null,window.goToenableFlashPlugin=function(e){(e.includes("adobe.com")||e.includes("befunky.com"))&&(window.location.href=e,window.setCookie("cufpeclck","1",365),window.bf_eventTrack("EXTERNAL","FLASH_DETECT","CLICK_ENABLE"))},window.setApplicationMode=function(e){e&&"string"==typeof e||(e="photoeditor"),BeFunky.isUseHTML5?BFN.AppModel.applicationModeChange(e):document.getElementById(BeFunky.Params.swfId).ApplicationModeChange(e)},window.openUploadPanel=function(e){var n=window.deepLinkRouteData[e]||e||{},t=n.type,o=void 0===t?"photoeditor":t,r=n.img,a=n.template,i=n.ignoreExistingProject,s=void 0!==i&&i,l=n.availability;if(window.isMobile)return BeFunky.logError("Deep link to app not opened b/c device is mobile"),BeFunky.cleanupEnterAppImmediately(),BeFunky.handleMobileUserAttemptToOpenApp(l),void BeFunky.leaveCreateRoute();if(console.log("Handling "+(BeFunky.isUseHTML5?"WebGL":"Flash")+" deep link. Type = "+o+". Waiting on WebGl? "+(BeFunky.webGLDetectionComplete?"no":"yes")),BeFunky.webGLDetectionComplete)if(BeFunky.Params.isShowAds<1&&flashFreeTop>0&&(window.removeAds(),window.flashFreeTop=0,window.flashFreeRight=0,window.isflashFreeRight=!1),a&&(window.designerTemplate=a),r&&BeFunky.waitUntil({condition:function(){return window.isFlashCreationComplated},onSuccess:function(){window.isNeedUploadSeoImage=!s,urlUpload(r,!1,o)},onTimeout:function(){BeFunky.logError("Unable to load deep link image b/c app creation timed out",{type:o,img:r})},interval:200,maxAttempts:50}),BeFunky.isUseHTML5){if(BeFunky.cleanupEnterAppImmediately(),BeFunky.html5app_created)try{setApplicationMode(o)}catch(e){}else{caledFunctionName="collage"===o?"collage":"designer"===o?"designer":null!=o?o:"binaryData",calledParams=null;try{setApplicationMode(o)}catch(e){}}openFlash()}else{var u=null,c=null;try{var d=get_browser();u=d.name,c=Number(d.version)}catch(e){}null==u&&(u=1==/Chrome/i.test(navigator.userAgent)?"Chrome":null);var p=1==/Edge\/\d./i.test(navigator.userAgent)?"Edge":null;null!=p&&(u=p),window._onLoad(function(){if(BeFunky.cleanupEnterAppImmediately(),1==BeFunky.Params.isFlashPlayerCorrect){if(isFlashCreationComplated){try{setApplicationMode(o),"photoeditor"==o&&document.getElementById(BeFunky.Params.swfId).UploadedFunction()}catch(e){}data_=null,name_=null}else{caledFunctionName="collage"==o?"collage":"designer"==o?"designer":null!=o?o:"binaryData",calledParams=null;try{setApplicationMode(o)}catch(e){}}if(openFlash(),null!=u&&null!=c&&0==isNaN(c)&&("CHROME"==u.toUpperCase()&&c>55||"EDGE"==u.toUpperCase()&&c>=15))"1"==getCookie("cufpeclck")&&(setCookie("cufpeclck","2",365),bf_eventTrack("EXTERNAL","FLASH_DETECT","FLASH_SHOW"));return!0}if(0==BeFunky.Params.isFlashPlayerCorrect){try{document.getElementById("flashPluginDisabledPanel").style.display="none"}catch(e){}return null!=u&&null!=c&&0==isNaN(c)&&("CHROME"==u.toUpperCase()&&c>55||"EDGE"==u.toUpperCase()&&c>=15)?BeFunky.promptUserToEnableFlash():BeFunky.promptUserToUpdateFlash(),!1}})}else{var m=Date.now(),g=!1;BeFunky.waitUntil({condition:function(){return!g&&Date.now()-m>1e3&&(BeFunky.logError("Waiting on __bfnDefferReady()... WebGL detection must complete before opening app."),g=!0),BeFunky.webGLDetectionComplete},onSuccess:function(){window.openUploadPanel(e)},onTimeout:function(){BeFunky.logError("Unable to open app b/c __bfnDefferReady() was not called after 10 seconds"),BeFunky.cleanupEnterAppImmediately(),BeFunky.leaveCreateRoute()},interval:100,maxAttempts:100})}},BeFunky.leaveCreateRoute=function(){setTimeout(function(){BeFunky.isCreateRoute()&&(BeFunky.sessionRoutes.length>1?window.history.back():BeFunky.canonicalRoute?BeFunky.pushRoute(BeFunky.canonicalRoute):BeFunky.throwError("Unable to leave create route"))},0)},BeFunky.handleMobileUserAttemptToOpenApp=function(e){var n="web_mobile_apps"===e,t="web_visionn_app"===e&&BeFunky.isIOS;if(n||t){var o=document.createElement("div");o.appendChild(document.createElement("p").setLang("try_mobile_app")),o.appendChild(document.createElement("p").setLang("edits_on_the_go"));var r=BeFunky.isIOS?"open_app_store":"open_play_store";return BeFunky.confirm(o,{confirmText:r,onConfirm:function(){window.open(s(),"_blank")}})}var a=document.createElement("div");a.appendChild(document.createElement("p").setLang("accessible_from_desktop")),a.appendChild(document.createElement("p").setLang("great_mobile_app"));var i=BeFunky.isIOS?"open_app_store":"open_play_store";return BeFunky.confirm(a,{confirmText:i,onConfirm:function(){window.open(s(),"_blank")}});function s(){return t?"https://itunes.apple.com/app/apple-store/id1142803226?mt=8":BeFunky.isIOS?"https://itunes.apple.com/us/app/befunky-photo-editor/id442716817?mt=8":"https://play.google.com/store/apps/details?id=air.com.befunky."+(/mobile/i.test(navigator.userAgent)?"BeFunkyPhotoEditor":"BeFunkyPad")}},BeFunky.trackDeepLink=function(e,n){if("string"!=typeof e)return BeFunky.throwError("Invalid action: "+BeFunky.getType(e),e);if(window.isMobile&&(e=e+"_"+(BeFunky.isIOS?"IOS":"ANDROID")),!n){var t=[].concat(o(BeFunky.sessionRoutes)).reverse().find(function(e){return!BeFunky.isCreateRoute(e)});if(!t)return console.log("Session routes:",JSON.stringify(BeFunky.sessionRoutes)),void(BeFunky.isUseHTML5?BeFunky.throwError("Unable to find non-create route to track Deep Link button click"):BeFunky.logError("Deep Link button clicked after user failed to enter Flash app via deep link"));n="/"===t?"HOME":t.split("?")[0].split("#")[0].replace(/(^\/)|(\/$)/g,"").replace(/\//g,"_").toUpperCase()}window.bf_eventTrack("EXTERNAL",e,n)},window.hideEditor=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(console.log("Hiding "+(BeFunky.isUseHTML5?"WebGL":"Flash")+" app"),BeFunky.isUseHTML5?document.getElementById("appl-for-flash").setStyles({display:"none"}):document.getElementById("appl-for-flash").setStyles({top:"-5000px",left:"-5000px"}),document.getElementById("bfn-app").setStyles({display:"none"}),BeFunky.moveModalRoot(document.body),BeFunky.moveLoadScreen(document.body),document.getElementById("main").setStyles({top:"-5000px",left:"-5000px"}),(document.getElementById("site_root")||document.getElementById("wrapper")).setStyles({display:""}),flasRightBarAdDisplay(!0),BeFunky.isPlus()||calculateAdWidth(),!0!==BeFunky.befunkyPopupDivOpened&&document.body.removeClass("prevent-body-scroll"),window.isFlashOpenned=!1,BeFunky.LanguageManager.updateLanguageStrings(!0),(BeFunky.isUseHTML5||!e)&&BeFunky.isCreateRoute()){var n=[].concat(o(BeFunky.sessionRoutes)).reverse()[1];"string"==typeof n?BeFunky.pushRoute(n):"string"==typeof BeFunky.canonicalRoute?BeFunky.pushRoute(BeFunky.canonicalRoute):BeFunky.logError("Unable to swap out create route for new one"),BeFunky.isUseHTML5||window.hideModalBackgroundImage()}return window.scrollTo?window.scrollTo(0,BeFunky.siteScrollY):document.documentElement.scrollTop=BeFunky.siteScrollY,BeFunky.measureSiteNavDropdowns&&BeFunky.measureSiteNavDropdowns(),!1},window.isFlashCreationComplated=!1,window.flashCreationComplateHandler=function(){if(0==BeFunky.isUseHTML5){try{document.getElementById("flashPluginDisabledPanel").style.display="none"}catch(e){}if(""!=BeFunky.Params.openurl&&urlUpload(BeFunky.Params.openurl),isFlashCreationComplated=!0,callFunctionToSwitch(),1==BeFunky.ISNOT_FLASH_LOGGEDIN&&BeFunky.User.FlashVarsObject){try{document.getElementById(BeFunky.Params.swfId).userValueObj(BeFunky.User.FlashVarsObject)}catch(e){}BeFunky.ISNOT_FLASH_LOGGEDIN=!1}}else{var e=function(){if(""!=BeFunky.Params.openurl&&urlUpload(BeFunky.Params.openurl),callFunctionToSwitch(),isFlashCreationComplated=!0,1==BeFunky.ISNOT_FLASH_LOGGEDIN&&BeFunky.User.FlashVarsObject){try{BFN.BfnService.getUserData()}catch(e){}BeFunky.ISNOT_FLASH_LOGGEDIN=!1}};if(1==BeFunky.html5app_created)e();else if(1==BeFunky.isUseHTML5&&0==BeFunky.html5app_created)var n=setInterval(function(){if(1==BeFunky.html5app_created){try{clearInterval(n)}catch(e){}n=null,e()}},100);window._onLoad(function(){setTimeout(function(){createJavascriptElements("https://apis.google.com/js/api.js?onload=onDrvApiLoad")},500)})}},window.isNeedUploadSeoImage=!1,window.openEditor=function(e,n){return openUploadPanel(e)},window.callFunctionToSwitch=function(){switch(caledFunctionName){case"binaryData":if(setApplicationMode("photoeditor"),0==BeFunky.isUseHTML5)try{document.getElementById(BeFunky.Params.swfId).UploadedFunction()}catch(e){}break;case"webcam":if(setApplicationMode("photoeditor"),openFlash(),0==BeFunky.isUseHTML5)try{document.getElementById(BeFunky.Params.swfId).ToJsOpenWebcamPanel()}catch(e){}break;case"url":if(setApplicationMode("photoeditor"),openFlash(),0==BeFunky.isUseHTML5)try{document.getElementById(BeFunky.Params.swfId).ToJsUrlUploader(calledParams.url,null,!1)}catch(e){}else try{BFN.BfnService.ToJsUrlUploader(calledParams.url,null,1!=isNeedUploadSeoImage,isNeedUploadSeoImage?"sample":"befunky")}catch(e){}break;case"collage":try{setApplicationMode("collage")}catch(e){}break;case"designer":window.designerTemplate&&(setDesignerTemplate(window.designerTemplate),window.designerTemplate=null);try{setApplicationMode("designer")}catch(e){}break;default:try{setApplicationMode(caledFunctionName)}catch(e){}if(calledParams&&calledParams.url)if(0==BeFunky.isUseHTML5)try{document.getElementById(BeFunky.Params.swfId).ToJsUrlUploader(calledParams.url,null,!1)}catch(e){}else try{BFN.BfnService.ToJsUrlUploader(calledParams.url,null,1!=isNeedUploadSeoImage,isNeedUploadSeoImage?"sample":"befunky")}catch(e){}}calledParams&&calledParams.data&&(calledParams.data=null),calledParams&&calledParams.name&&(calledParams.name=null),calledParams&&calledParams.url&&(calledParams.url=null),calledParams&&calledParams.template&&(calledParams.template=null),calledParams=null,caledFunctionName=null,isNeedUploadSeoImage=!1},BeFunky.promptUserToUpdateFlash=function(){var e=document.createElement("p").setLang("update_flash_prompt"),n=document.createElement("p").setLang("enable_flash_link",{tutorial:function(){return'<a href="https://support.befunky.com/hc/en-us/articles/218015043-How-to-enable-Flash-Player" target="_blank" rel="noopener">'+BeFunky.LanguageManager.getString("tutorial")+"</a>"}}),t=document.createElement("div");t.appendChild(e),t.appendChild(n),BeFunky.acknowledge(t,{buttonText:"update_flash_button",onAcknowledge:function(){window.open("https://get.adobe.com/flashplayer/","_blank")}})},BeFunky.promptUserToEnableFlash=function(){var e="";e=BeFunky.isChrome?"Chrome":BeFunky.isFirefox?"Firefox":BeFunky.isSafari?"Safari":BeFunky.isEdge?"Microsoft Edge":BeFunky.LanguageManager.getString("your_browser");var n=document.createElement("p").setLang("enable_flash_prompt",{browser:e,enable_flash_button:function(){return BeFunky.LanguageManager.getString("enable_flash_button")}}),t=document.createElement("p").setLang("enable_flash_link",{tutorial:function(){return'<a href="https://support.befunky.com/hc/en-us/articles/218015043-How-to-enable-Flash-Player" target="_blank" rel="noopener">'+BeFunky.LanguageManager.getString("tutorial")+"</a>"}}),o=document.createElement("div");if(o.appendChild(n),o.appendChild(t),window.bf_eventTrack("EXTERNAL","FLASH_DETECT","SHOW_ENABLE"),!BeFunky.isFirefox)return BeFunky.acknowledge(o,{heading:["enable_flash_heading",{browser:e}],buttonText:"enable_flash_button",onAcknowledge:function(){if(!window.isFlashCreationComplated){goToenableFlashPlugin("https://get.adobe.com/flashplayer/");var n=document.createElement("div"),o=document.createElement("div").setStyles({position:"absolute",left:"-6rem",top:"-4rem",color:"white",fontSize:"100px",transform:"rotate(-45deg)"});o.textContent="↑",(BeFunky.isEdge||"ar"===window.browserlng)&&o.setStyles({left:"",right:"-6rem",transform:"rotate(45deg)"}),n.appendChild(o),n.appendChild(t),BeFunky.acknowledge(n,{heading:["enable_flash_heading",{browser:e}],onAcknowledge:function(){}})}}});document.getElementById("flashPluginDisabledPanel").setStyles({display:"block"})}},{}],22:[function(e,n,t){void 0===window.BeFunky&&(window.BeFunky={}),BeFunky.Init=function(){if(window.isElCapitan)try{BeFunky.Params.swfFlashVars.forcejssave=/Safari/i.test(navigator.userAgent)&&1!=/Chrome/i.test(navigator.userAgent)&&1!=/Firefox/i.test(navigator.userAgent)&&1!=/Opera/i.test(navigator.userAgent)?1:0}catch(e){}if(window.isHighSierra)try{BeFunky.Params.swfFlashVars.forcejsupload=/Safari/i.test(navigator.userAgent)&&1!=/Chrome/i.test(navigator.userAgent)&&1!=/Firefox/i.test(navigator.userAgent)&&1!=/Opera/i.test(navigator.userAgent)?1:0}catch(e){}var e="en";try{e=window.language.substr(0,2)}catch(e){}if(""===BeFunky.Params.swfFlashVars.language)BeFunky.Params.swfFlashVars.promptLang=e;else{var n=(BeFunky.sessionRoutes[0]||window.location.href.replace(window.siteUrl,"/")).split("/").filter(Boolean)[0];"en"!==(n=BeFunky.LanguageManager.languages.includes(n)?n:"en")&&BeFunky.Params.swfFlashVars.language!==e&&BeFunky.Params.swfFlashVars.language!==n&&(BeFunky.Params.swfFlashVars.promptLang=n)}if(0==BeFunky.isUseHTML5&&"undefined"!=typeof swfobject&&null!==swfobject){try{document.getElementById("bfn-app").innerHTML=""}catch(e){}var t={id:BeFunky.Params.swfId,name:BeFunky.Params.swfId,src:BeFunky.Params.swfUrl+BeFunky.Params.swfId+".swf",movie:BeFunky.Params.swfUrl+BeFunky.Params.swfId+".swf",align:"middle",style:"background-color:#1e242c;",allowscriptaccess:"always",policyFile:BeFunky.Params.siteUrl+"crossdomain.xml"};swfobject.embedSWF(BeFunky.Params.swfUrl+BeFunky.Params.swfId+".swf","flashContainer",setInitFlashWidth(),setInitFlashHeight(),BeFunky.Params.swfMinVersion,BeFunky.Params.swfUrl+"playerProductInstall.swf",BeFunky.Params.swfFlashVars,{quality:"high",bgcolor:"#2D2D2D",allowscriptaccess:"always",allowFullScreen:"true",allowfullscreeninteractive:"true",wmode:"window"},t),setTimeout(function(){createJavascriptElements("https://apis.google.com/js/api.js?onload=onDrvApiLoad")},500);var o=Date.now();BeFunky.waitUntil({condition:function(){return!!document.getElementById(BeFunky.Params.swfId)},onSuccess:function(){var e=Date.now()-o;console.log("Flash <object> injected in "+e/1e3+"s")},onTimeout:function(){BeFunky.logError("Flash <object> NOT injected")},maxAttempts:1e3})}BeFunky.prepareHtml5App(),BeFunky.isUseHTML5||(window.onbeforeunload=function(){if(isFlashOpenned&&isFlashCreationComplated)return"You are about to leave BeFunky, if you do not save your changes they will be lost."});try{BeFunky.Params.isShowAds>0&&0==BeFunky.isUseHTML5&&initAds()}catch(e){}try{BeFunky.Params.isCreatePage&&null==$googleDriveState&&(document.getElementById("befunky-state").style.display="block",document.querySelector("#chrome-extension-button").addEventListener("click",function(e){var n=document.getElementById("chrome-extension-button").getAttribute("data-url");null!=n&&n.length>0&&(window.bf_eventTrack("EXTERNAL","CHROME_EXTENSION","OPEN"),setTimeout(function(){try{try{setApplicationMode("photoeditor")}catch(e){}if(n.includes("http"))if(0==BeFunky.isUseHTML5)try{document.getElementById(BeFunky.Params.swfId).ToJsUrlUploader(n,null,!1)}catch(e){}else try{BFN.BfnService.ToJsUrlUploader(n,null,!0,"chrome_extension")}catch(e){}else{var e=n.split(",");if(n=e[1],0==BeFunky.isUseHTML5)try{document.getElementById(BeFunky.Params.swfId).ToJsBase64Uploader(n)}catch(e){}else try{BFN.BfnService.ToJsBase64Uploader(n,void 0,"chrome_extension")}catch(e){}}}catch(e){}},1500))}))}catch(e){}BeFunky&&BeFunky.Params&&""==BeFunky.Params.country&&setTimeout(function(){if(1==navigator.cookieEnabled){var e="mode=user_country&iso=&CSRFtoken="+getCsToken();postToJAJ(BeFunky.Params.siteUrl+"processing.php",e,function(e){},"json")}},111)},window.ravenConfigure=function(){try{"undefined"!=typeof Raven&&Raven.config("https://b2869f1592ed45e586418602b8f9fd0a@sentry.io/301341",{release:window.sentry_release_version,environment:window.sentry_env,whitelistUrls:[/https?:\/\/(?:[\w\-\_]+\.)?befunky\.com/,/d1oanepa5dm267\.cloudfront\.net/,/d75ljpmh88vxs\.cloudfront\.net/,/befunky\.global\.ssl\.fastly\.net/,/befunky\.freetls\.fastly\.net/],ignoreErrors:[/Error: Access is denied./,/SecurityError:.*/,"originalCreateNotification","canvas.contentDocument","MyApp_RemoveAllHighlights","http://tt.epicplay.com","Can't find variable: ZiteReader","jigsaw is not defined","ComboSearch is not defined","http://loading.retry.widdit.com/","atomicFindClose","fb_xd_fragment","bmi_SafeAddOnload","EBCallBackMessageReceived","conduitPage","Script error.","TypeError: no access","NotFoundError: Node was not found","Error calling method on NPObject!","TypeError: a.touchHover is not a function","TypeError: Unspecified error.","Object doesn't support property or method 'attachEvent'","Object doesn't support property or method 'CallFunction'"]}).install()}catch(e){}},window.isWindowLoaded=!1,window.ready(function(){window.isWindowLoaded=!0,ravenConfigure()}),window.defferInit=function(e){if(BeFunky.Params.siteUrl.indexOf("www.befunky.com")<0&&0!=window.webgl_is_supported||0!=window.webgl_is_supported||0!=isHighSierraWithSafari11&&0!=window.webgl_is_supported?BeFunky.isUseHTML5=!window.goToFlash:BeFunky.isUseHTML5=!1,!1!==BeFunky.isUseHTML5)swfobject=null,BeFunky.Init(),CheckVersion();else{var n=function(){swfobject=swfobject();try{swfobject.getFlashPlayerVersion().major>=11&&1}catch(e){}CheckVersion(),window._onLoad(function(){BeFunky.Init()})};"undefined"!=typeof swfobject&&null!==swfobject?n():BeFunky.waitUntil({condition:function(){return"undefined"!=typeof swfobject&&null!==swfobject},onSuccess:function(){n()},onTimeout:function(){BeFunky.logError("swf object not loaded")},maxAttempts:1e3})}try{ga("set","dimension2",1==BeFunky.isUseHTML5?"HTML5":"FLASH")}catch(e){}try{ga("send","pageview")}catch(e){}if(e)try{window.bf_fbEventTrack("PageView")}catch(e){}}},{}],23:[function(e,n,t){BeFunky.befunkyPopupDivOpened=!1;var o=[];function r(){BeFunky.LoginPanelObj.isLoggedInNextFunction&&BeFunky.LoginPanelObj.isLoggedInNextFunction===openFlash?openFlash():BeFunky.LoginPanelObj.closeNextFunction&&BeFunky.LoginPanelObj.closeNextFunction===openFlash?openFlash():BeFunky.LoginPanelObj.closeNextFunction&&"function"==typeof BeFunky.LoginPanelObj.closeNextFunction&&BeFunky.LoginPanelObj.closeNextFunction(),BeFunky.getModal()||hideModalBackgroundImage(),BeFunky.disposeServise()}BeFunky.befunkyPopupContainerOpen=function(e,n){var t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=e.replace("#",""),i=document.getElementById(a);if(n||(n={}),o.includes(a)||o.push(a),t){var s=BeFunky.getModal(),l=s?s.modalElement.id:void 0;if(o.includes(l)){BeFunky.preventModalDispose=!0,BeFunky.closeModal(l),BeFunky.preventModalDispose=!1;var u=document.getElementById("modal_root");u.addClass("modal-root--disable-transitions"),requestAnimationFrame(function(){u.removeClass("modal-root--disable-transitions")})}}BeFunky.befunkyPopupDivOpened=!0;var c=n.addCaptcha&&i.querySelector(".captcha"),d=n.addDigiCert&&i.querySelector(".digicert");BeFunky.openModal(i,{onOpen:function(){!function(){if(c){var e=i.querySelector("[type=submit]");e.disabled=!0,BeFunky.renderOrResetCaptcha(c,function(){e.disabled=!1})}}(),d&&(setupDcId(),d.innerHTML='<div id="'+__dcid[0][0]+'" data-language="en"></div>',initdigicert()),"register_modal"===a&&clearInputWithAutocompleteOff(i),function(e){try{if(!BeFunky.isChrome)return;[].concat(function(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}(e.querySelectorAll(".material-field__input:-webkit-autofill"))).forEach(function(e){e.addClass("material-field__input--autofilled"),e.addEventListener("change",function n(){e.removeEventListener("change",n),e.removeClass("material-field__input--autofilled")})})}catch(e){}}(i)},onClose:function(){c&&c.parentElement.replaceChild(document.createElement("div").addClass("captcha"),c),d&&(d.innerHTML=""),function(e){var n=e.querySelector(".form-errors");n&&(n.innerHTML="");e.querySelectorAll(".material-field__input--invalid").removeClass("material-field__input--invalid")}(i),BeFunky.preventModalDispose?BeFunky.befunkyPopupDivOpened=!1:r(),"function"==typeof i.onModalClose&&i.onModalClose()},addSiteClass:!0,addCloseButton:!0,size:"large",isCritical:!!n.isCritical,destroyOnClose:!!n.destroyOnClose})},BeFunky.befunkyPopupContainerClose=function(){if(BeFunky.befunkyPopupDivOpened){BeFunky.registerComeFromUpgrade=!1;var e=BeFunky.getModal(),n=e?e.modalElement.id:void 0;n&&BeFunky.closeModal(n);var t=document.getElementById("modal_root");t.addClass("modal-root--disable-transitions"),requestAnimationFrame(function(){t.removeClass("modal-root--disable-transitions"),r()})}return!1},BeFunky.disposeServise=function(){BeFunky.befunkyPopupDivOpened=!1,null!==document.getElementById("hiddenFancyContainer")&&(document.getElementById("hiddenFancyContainer").innerHTML=""),BeFunky.LoginPanelObj.panelType="SIGNIN",BeFunky.LoginPanelObj.isLoggedInNextFunction=!1,BeFunky.LoginPanelObj.closeNextFunction=!1,BeFunky.isCaptchaResetted=!1,BeFunky.registerComeFromUpgrade=!1}},{}],24:[function(e,n,t){BeFunky.captchaWidget=null,BeFunky.renderOrResetCaptcha=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};if(!e)return BeFunky.throwError("Unable to find captcha container"),n();!function(e){if(t())return e();var n="//www.google.com/recaptcha/api.js?"+["hl="+BeFunky.LanguageManager.language,"render=explicit"].join("&");function t(){return window.grecaptcha&&"function"==typeof window.grecaptcha.render}window.createJavascriptElements(n),BeFunky.waitUntil({condition:t,interval:300,maxAttempts:1e3,onSuccess:e,onTimeout:function(){BeFunky.throwError("Unable to load Google ReCAPTCHA",{grecaptcha:window.grecaptcha})}})}(function(){if(e.firstElementChild)return window.grecaptcha.reset(),n();var t=BeFunky.Params.IS_LC?"6LfoOpkUAAAAAElr56t1u2CFQIiARxbVfo04Ud5_":"6LcXOpkUAAAAAOKNQzyDv-gS8Nu6cTgwW6m3sXQu";return BeFunky.captchaWidget=window.grecaptcha.render(e,{sitekey:t,hl:BeFunky.LanguageManager.language,size:"invisible",callback:function(e){""!==e&&(BeFunky.invisibleCaptchaHandler(e),console.log("User successfully completed captcha"))}}),n()})},BeFunky.getCaptchaResponse=function(){try{return window.grecaptcha.getResponse(BeFunky.captchaWidget)}catch(e){}return""},BeFunky.invisibleCaptchaHandler=function(){"function"==typeof BeFunky.executeCaptchaCallback&&(BeFunky.executeCaptchaCallback(),BeFunky.executeCaptchaCallback=null)},BeFunky.executeCaptchaCallback=null,BeFunky.executeCaptcha=function(e){if(BeFunky.executeCaptchaCallback=e,window.grecaptcha.execute(BeFunky.captchaWidget),window.innerHeight<650){var n=void 0;BeFunky.waitUntil({condition:function(){return!!(n=n||[].concat(function(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}(document.querySelectorAll('iframe[title^="recaptcha"]'))).find(function(e){try{return"hidden"!==e.parentElement.parentElement.style.visibility}catch(e){}return!1}))},onTimeout:function(){},onSuccess:function(){var e=n.parentElement.getBoundingClientRect().top;n.parentElement.setStyles({maxHeight:"calc(100vh - "+e+"px)",overflowY:"auto"})},interval:300,maxAttempts:15})}}},{}],25:[function(e,n,t){window.setCookie=function(e,n,t){var o=new Date;o.setDate(o.getDate()+t);var r=encodeURI(n)+(null==t?"":"; expires="+o.toUTCString()+"; path=/");document.cookie=e+"="+r},window.getCookie=function(e){var n=document.cookie,t=n.indexOf(" "+e+"=");if(-1===t&&(t=n.indexOf(e+"=")),-1===t)n=null;else{t=n.indexOf("=",t)+1;var o=n.indexOf(";",t);-1===o&&(o=n.length),n=decodeURI(n.substring(t,o))}return n}},{}],26:[function(e,n,t){window.__dcid=null,window.setupDcId=function(){null===__dcid&&(__dcid=[],BeFunky.Params.siteUrl.includes("www.befunky.com")?__dcid.push(["DigiCertClickID_AJLt6s8v","3","s","black","AJLt6s8v"]):__dcid.push(["DigiCertClickID_NazvGaQE","10","s","black","NazvGaQE"]))},window.initdigicert=function(){var e="//seal.digicert.com/seals/cascade/seal.min.js";try{var n=document.querySelector('script[src="'+e+'"]');n.parentNode.removeChild(n)}catch(e){}!function(){var n=document.createElement("script");n.async=!0,n.src=e;var t=document.getElementsByTagName("script"),o=t[t.length-1];o.parentNode.insertBefore(n,o.nextSibling)}()}},{}],27:[function(e,n,t){function o(e){if("undefined"!=typeof Dropbox)return window.dropboxApiLoaded=!0,void(null!==e&&e());var n,t,r,a,i;0==dropboxApiRequested&&(window.dropboxApiRequested=!0,n=document,t="script",r="dropboxjs",i=n.getElementsByTagName(t)[0],n.getElementById(r)||((a=n.createElement(t)).id=r,a.setAttribute("data-app-key","xcse408r9ipxqtk"),a.src="https://www.dropbox.com/static/api/2/dropins.js",i.parentNode.insertBefore(a,i))),setTimeout(function(){o(e)},555)}window.loadExternalImage=function(e,n){var t=new Image;t.setAttribute("crossOrigin","Anonymous"),t.onload=function(){var e=document.createElement("CANVAS"),o=e.getContext("2d");e.height=this.height,e.width=this.width,o.drawImage(this,0,0);var r=e.toDataURL("image/png");if(r=(r=(r=r.replace("image/jpeg;","")).replace("image/png;","")).replace("data:base64,",""),e=null,o=null,t=null,0==BeFunky.isUseHTML5)try{document.getElementById(BeFunky.Params.swfId).ToJsBase64Uploader(r)}catch(e){}else try{BFN.BfnService.ToJsBase64Uploader(r,n,"dropbox")}catch(e){}},t.src=e},window.dropboxApiLoaded=!1,window.dropboxApiRequested=!1,window.dBoxOpenPicker=function(){var e=document.getElementById("dropbox-btn");if(null!=e&&(e.removeEventListener("click",window.dBoxOpenPicker),e.removeEventListener("click",window.dBoxSaveFileHandler)),0==window.dropboxApiLoaded){var n=document.getElementById("dropbox-btn");return null==n&&((n=document.createElement("button")).setAttribute("style","display:none"),n.id="dropbox-btn",document.body.appendChild(n)),n.addEventListener("click",window.dBoxOpenPicker),void o(function(){n.click()})}document.body.addClass("prevent-body-scroll");var t={success:function(e){try{"none"!=document.getElementById("modalBackgroundImg").style.display&&hideModalBackgroundImage()}catch(e){}try{setApplicationMode("photoeditor")}catch(e){}openFlash();try{loadExternalImage(e[0].link,e[0].name)}catch(e){}},cancel:function(){try{"none"!=document.getElementById("modalBackgroundImg").style.display&&hideModalBackgroundImage()}catch(e){}openFlash()},linkType:"direct",multiselect:!1,extensions:[".jpg",".jpeg",".png",".bmp",".gif"]};Dropbox.choose(t)},window.dBoxSaveFileHandler=function(){var e=document.getElementById("dropbox-btn");null!=e&&(e.removeEventListener("click",window.dBoxOpenPicker),e.removeEventListener("click",window.dBoxSaveFileHandler)),window.dBoxSaveFile(window.dBoxSaveFileObj.url,window.dBoxSaveFileObj.filename)},window.dBoxSaveFileObj={url:"",filename:""},window.dBoxSaveFile=function(e,n){window.dBoxSaveFileObj={url:e,filename:n};var t=document.getElementById("dropbox-btn");if(null!=t&&(t.removeEventListener("click",window.dBoxOpenPicker),t.removeEventListener("click",window.dBoxSaveFileHandler)),0==window.dropboxApiLoaded)return null==t&&((t=document.createElement("button")).setAttribute("style","display:none"),t.id="dropbox-btn",document.body.appendChild(t)),t.addEventListener("click",window.dBoxSaveFileHandler),void o(function(){t.click()});document.body.addClass("prevent-body-scroll");var r=!1,a=!1,i=null;if(Dropbox.isBrowserSupported()){var s={success:function(){if(r=!0,0==BeFunky.isUseHTML5)try{document.getElementById(BeFunky.Params.swfId).handlerDrobboxInsert("success")}catch(e){}else try{BFN.BfnService.handlerDropBoxInsert("success")}catch(e){}},progress:function(e){0==a&&(a=!0,i=setTimeout(function(){if(null!=i&&(clearTimeout(i),i=null),0==r)if(0==BeFunky.isUseHTML5)try{document.getElementById(BeFunky.Params.swfId).handlerDrobboxInsert("cancel")}catch(e){}else try{BFN.BfnService.handlerDropBoxInsert("cancel")}catch(e){}},2e4))},cancel:function(){if(r=!0,null!=i&&(clearTimeout(i),i=null),0==BeFunky.isUseHTML5)try{document.getElementById(BeFunky.Params.swfId).handlerDrobboxInsert("cancel")}catch(e){}else try{BFN.BfnService.handlerDropBoxInsert("cancel")}catch(e){}},error:function(e){if(r=!0,null!=i&&(clearTimeout(i),i=null),0==BeFunky.isUseHTML5)try{document.getElementById(BeFunky.Params.swfId).handlerDrobboxInsert("error")}catch(e){}else try{BFN.BfnService.handlerDropBoxInsert("error")}catch(e){}}};Dropbox.save(e,n,s)}else if(0==BeFunky.isUseHTML5)try{document.getElementById(BeFunky.Params.swfId).handlerDrobboxInsert("error")}catch(e){}else try{BFN.BfnService.handlerDropBoxInsert("error")}catch(e){}}},{}],28:[function(e,n,t){var o=e("tabbable"),r=[".navbar-dropdown",".popover",".modal-root__outer",".dialog",".side-panel .tool-menu",".preset-menu","#alternateMenu",".dropdown__list",".preset-menu-item-basic-settings","#globalHistoryMenu",".canvas-footer",".site-nav__dropdown-content",".site-nav__popup-root"].join(", "),a=[".focus-avoid",".popover",".image-gallery__images",".image-manager__images",".tab__panel:not(.active)",".tab__button.active",".accordion__panel",".control-item-disabled",".autocomplete__item--selected:first-child"].join(", ");function i(e,n,t){n(),e.addEventListener("blur",function n(){e.removeEventListener("blur",n),t()})}BeFunky.onDocumentReady(function(){var e=[document.getElementById("bfn-app"),document.getElementById("modal_root"),document.getElementById("site_root")].filter(Boolean);document.addEventListener("keydown",function(n){!function(n){if("Tab"!==n.key&&9!==n.keyCode)return;if(!e.some(function(e){return e.contains(n.target)}))return;if(n.preventDefault(),BeFunky.isPointerDown)return;BeFunky.handleNextFocus(n.target,n.shiftKey?-1:1)}(n)}),BeFunky.handleNextFocus=function(n,t){var s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t=parseInt(t),isNaN(t)&&(t=1);var l=n.closestParent(function(n){return e.includes(n)||n.matches(r)});if(!(!l||e.includes(l)&&"site_root"!==l.id||l.matches(a))){var u=o(l);[].concat(function(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}(l.querySelectorAll(a))).forEach(function(e){u=u.filter(function(t){return!e.contains(t)||t===n})});var c=u.indexOf(n);if(0!==u.length&&(1!==u.length||l!==u[0]||0===t)){var d=(c+=t)<0||c>u.length-1;if(d&&"function"==typeof l.exitFocusTrap)return l.exitFocusTrap(t);d&&(c=c<0?u.length-1:0),function e(n,t,o){if(!n)return;if("function"==typeof n.delegateFocus)return e(n.delegateFocus(t),t,o);if(!n.focus)return;if(n===document.activeElement)return;o&&function(e){if(e.hasClass("button"))return void i(e,function(){return e.addClass("button--focus")},function(){return e.removeClass("button--focus")});"A"===e.nodeName&&i(e,function(){return e.addClass("link--focus")},function(){return e.removeClass("link--focus")});if("INPUT"!==e.nodeName)return;if("checkbox"===e.type){var n=e.parentElement;if(n&&n.hasClass("checkbox"))return void i(e,function(){return n.addClass("checkbox--focus")},function(){return n.removeClass("checkbox--focus")});var t=e.nextElementSibling;return void(t&&t.hasClass("button--toggle")&&i(e,function(){return t.addClass("button--focus")},function(){return t.removeClass("button--focus")}))}if("radio"===e.type){var o=e.parentElement;if(!o)return;o.hasClass("toggle-group__label")?i(e,function(){return o.addClass("toggle-group__label--focus-within")},function(){return o.removeClass("toggle-group__label--focus-within")}):o.hasClass("radio-button")&&i(e,function(){return o.addClass("radio-button--focus-within")},function(){return o.removeClass("radio-button--focus-within")})}}(n);n.focus();"input"===n.tagName.toLowerCase()&&n.select()}(u[c],t,s)}}}})},{tabbable:70}],29:[function(e,n,t){window.optimizedResize=function(){var e=[],n=!1;function t(){n||(n=!0,window.requestAnimationFrame?window.requestAnimationFrame(o):setTimeout(o,66))}function o(){e.forEach(function(e){e()}),n=!1}return{add:function(n){e.length||window.addEventListener("resize",t),function(n){n&&e.push(n)}(n)}}}(),window.__documentReady=function(){try{var e=document.getElementById("file");null!==e&&e.addEventListener("change",function(){var n=e;if(n.files[0].size>2e6)alert("File size cannot larger than 2 mb.");else{var t=n.value.match(/\.(.+)$/)[1];switch(t=t.toLowerCase()){case"jpg":case"jpeg":case"png":document.getElementById("upload-profile-pic").submit();break;default:alert("File type ("+t+") not allowed. Please select allowed types (jpg or png).")}}},!1)}catch(e){}window.optimizedResize.add(function(){if(document.getElementById("main").setStyles({width:setInitFlashWidth()+"px",height:setInitFlashHeight()+"px"}),0==BeFunky.isUseHTML5)try{document.getElementById(""+BeFunky.Params.swfId).setAttribute("width",setInitFlashWidth()),document.getElementById(""+BeFunky.Params.swfId).setAttribute("height",setInitFlashHeight())}catch(e){}if(isFlashOpenned){if(0==BeFunky.isUseHTML5)try{document.getElementById(BeFunky.Params.swfId).width=setInitFlashWidth(),document.getElementById(BeFunky.Params.swfId).height=setInitFlashHeight()}catch(e){}calculateAdWidth()}1==BeFunky.isUseHTML5&&"undefined"!=typeof BFN&&void 0!==BFN.StageModel&&void 0!==BFN.StageModel.updateStageDimensions&&void 0!==BFN._appRect&&void 0!==BFN.BfnService&&(BFN._appRect=null,BFN.BfnService.dispatchEvent(BFN.BfnServiceEvents.CUSTOM_RESIZE_EVENT))})}},{}],30:[function(e,n,t){var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function r(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}window.windowOpenerInterval=null,window.postToJAJXmlHttp=function(e,n,t,r,a,i){"undefined"==typeof XMLHttpRequest&&(XMLHttpRequest=function(){try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}throw new Error("This browser does not support XMLHttpRequest.")});try{var s=new XMLHttpRequest;s.onload=function(){try{var e=null!=s.response?s.response:s.responseText;t(e)}catch(e){}try{s.upload.removeEventListener("error",l),s.upload.removeEventListener("abort",l),s=null}catch(e){}};var l=function e(){try{s.upload.removeEventListener("error",e),s.upload.removeEventListener("abort",e),s=null}catch(e){}try{null!=a?a():BeFunky.AJAX_ERROR()}catch(e){}},u="";if("object"===(void 0===n?"undefined":o(n))){var c=0;for(var d in n)c>0&&(u+="&"),c++,u+=d+"="+n[d]}else u=n;"html"==r&&(r="text"),i||(i="POST"),s.upload.addEventListener("error",l),s.upload.addEventListener("abort",l),"POST"==i&&(s.withCredentials=!0),s.open(i,e,!0),"POST"==i&&s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.responseType=r,s.send(u)}catch(e){try{null!=a?a():console.log("request err: ",e)}catch(e){}}},window.postToJAJ=function(e,n,t,o,r){window.postToJAJXmlHttp(e,n,t,o,r)},window.getCsToken=function(){var e=document.querySelector('input[type="hidden"][name="CSRFtoken"]');return e&&e.value?e.value.trim():""},window.blockUserConfirm=function(){getCsToken();setTimeout(function(){BeFunky.befunkyPopupContainerClose()},300)},window.befunkyMarkup=function(e){var n=e;return n=(n=n.replace(/#(\w+)/gi,'<a href="'+BeFunky.Params.siteUrl+'explore/photos/$1/" target="_blank">#$1</a>')).replace(/@([\w.]+)/gi,'<a href="'+BeFunky.Params.siteUrl+'gallery/$1/" target="_blank">@$1</a>')},window.clearInputWithAutocompleteOff=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,n=[].concat(r(e.querySelectorAll('input[autocomplete="off"]'))),t=function(){n.filter(function(e){return"hidden"!==e.getAttribute("type")}).forEach(function(e){return e.value=""})};t(),setTimeout(t,300),setTimeout(t,400)},window.createJavascriptElements=function(e,n){var t,o,r,a,i,s;null!=e&&(t=e,o=null,r=null,a=null,i=n,(s=document.createElement("script")).type="text/javascript",s.async=null==n,s.src=t,o&&(s.id=o),r&&s.setAttribute(r,a),null!=i&&(s.onreadystatechange=i,s.onload=i),(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(s))},window.toFlex=function(e){if(null!=windowOpenerInterval)try{clearInterval(windowOpenerInterval)}catch(e){}switch(windowOpenerInterval=null,snLoggedinType){case"save&share":BeFunky.throwError("toFlex save&share requested",e);break;case"login":BeFunky.throwError("toFlex login requested",e);break;case"upload":BeFunky.throwError("toFlex upload requested",e)}snLoggedinType=""},window.CheckVersion=function(){if(1!=BeFunky.isUseHTML5){var e="undefined";try{e=swfobject.getFlashPlayerVersion().major,"undefined"!=typeof swfobject&&null!=e&&e>=parseInt(BeFunky.Params.swfMinVersion.split(".")[0])!=!0&&(BeFunky.Params.isFlashPlayerCorrect=!1)}catch(e){BeFunky.Params.isFlashPlayerCorrect=!0}if(1==BeFunky.Params.isFlashPlayerCorrect)try{document.getElementById("image-section-create").style.display="block",document.getElementById("op-center-create").style.display="block",document.getElementById("op-fail-center-create").style.display="none"}catch(e){}else try{document.getElementById("image-section-create").style.display="none",document.getElementById("op-center-create").style.display="none",document.getElementById("op-fail-center-create").style.display="block"}catch(e){}}},window.isEmailAddress=function(e){return/^[\w-+]+(\.[\w-+]+)*@([\w-]+\.)+[a-zA-Z]{2,10}$/.test(e)},window.isName=function(e){return e==e.match(/[A-Za-z0-9_.]{4,100}/)},window.isNumber=function(e){return e==e.match(/[0-9_]{4,100}/)},window.SadeceRakam=function(e,n){var t=null==e.charCode?e.keyCode:e.charCode;return!(!/^[0-9]+$/.test(String.fromCharCode(t))&&0!=t&&13!=t&&!isPassKey(t,n))},window.isPassKey=function(e,n){if(null!=n)for(var t=0;t<n.length;t++)if(n[t]==String.fromCharCode(e))return!0;return!1},window.SadeceRakamBlur=function(e,n){var t=e.target?e.target:e.srcElement,o=t.value;o=o.replace(/^\s+|\s+$/g,""),n&&(o=o.replace(/\s{2,}/g," ")),t.value=o},window.isPassKey=function(e,n){if(null!=n)for(var t=0;t<n.length;t++)if(n[t]==String.fromCharCode(e))return!0;return!1},window.checkHtml=function(e){return!!e.match(/<\/*[a-z][^>]+?>/gi)},window.nonCacheGetTime=function(){return(new Date).getTime()},window.StringBuffer=function(){this.buffer=[]},window.StringBuffer.prototype.append=function(e){return this.buffer.push(e),this},window.StringBuffer.prototype.toString=function(){return this.buffer.join("")},window.azrNumberFormatterRanges=[{divider:1e18,suffix:"P"},{divider:1e15,suffix:"E"},{divider:1e12,suffix:"T"},{divider:1e9,suffix:"G"},{divider:1e6,suffix:"M"},{divider:1e3,suffix:"K"}],window.azrFormatNumber=function(e){if(e<1e4)return e.toString();var n=10;(e>=1e5&&e<1e6||e>=1e8&&e<1e9)&&(n=0);for(var t=0;t<azrNumberFormatterRanges.length;t++)if(e>=azrNumberFormatterRanges[t].divider)return(Math.round(e/azrNumberFormatterRanges[t].divider*n)/n).toString()+azrNumberFormatterRanges[t].suffix;return e.toString()},window.azrUnformatNumber=function(e){e=e.toString();for(var n=0;n<azrNumberFormatterRanges.length;n++)if(e.substr(e.length-1)===azrNumberFormatterRanges[n].suffix)return parseInt(parseFloat(e.substr(0,e.length-1))*azrNumberFormatterRanges[n].divider);return parseInt(e)};try{window.base64_encode=function(e){for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",t=new StringBuffer,o=new Utf8EncodeEnumerator(e);o.moveNext();){var r=o.current;o.moveNext();var a=o.current;o.moveNext();var i=o.current,s=r>>2,l=(3&r)<<4|a>>4,u=(15&a)<<2|i>>6,c=63&i;isNaN(a)?u=c=64:isNaN(i)&&(c=64),t.append(n.charAt(s)+n.charAt(l)+n.charAt(u)+n.charAt(c))}return t.toString()}}catch(e){}try{window.base64_decode=function(e){for(var n=new StringBuffer,t=new Base64DecodeEnumerator(e);t.moveNext();){var o=t.current;if(128>o)n.append(String.fromCharCode(o));else if(o>191&&224>o){t.moveNext();var r=t.current;n.append(String.fromCharCode((31&o)<<6|63&r))}else{t.moveNext();r=t.current;t.moveNext();var a=t.current;n.append(String.fromCharCode((15&o)<<12|(63&r)<<6|63&a))}}return n.toString()}}catch(e){}window.Utf8EncodeEnumerator=function(e){this._input=e,this._index=-1,this._buffer=[]},window.Utf8EncodeEnumerator.prototype={current:Number.NaN,moveNext:function(){if(this._buffer.length>0)return this.current=this._buffer.shift(),!0;if(this._index>=this._input.length-1)return this.current=Number.NaN,!1;var e=this._input.charCodeAt(++this._index);return 13==e&&10==this._input.charCodeAt(this._index+1)&&(e=10,this._index+=2),e<128?this.current=e:e>127&&e<2048?(this.current=e>>6|192,this._buffer.push(63&e|128)):(this.current=e>>12|224,this._buffer.push(e>>6&63|128),this._buffer.push(63&e|128)),!0}},window.Base64DecodeEnumerator=function(e){this._input=e,this._index=-1,this._buffer=[]},window.Base64DecodeEnumerator.prototype={current:64,codex:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",moveNext:function(){if(this._buffer.length>0)return this.current=this._buffer.shift(),!0;if(this._index>=this._input.length-1)return this.current=64,!1;var e=this.codex.indexOf(this._input.charAt(++this._index)),n=this.codex.indexOf(this._input.charAt(++this._index)),t=this.codex.indexOf(this._input.charAt(++this._index)),o=this.codex.indexOf(this._input.charAt(++this._index)),r=e<<2|n>>4,a=(15&n)<<4|t>>2,i=(3&t)<<6|o;return this.current=r,64!=t&&this._buffer.push(a),64!=o&&this._buffer.push(i),!0}};try{window.MD5=function(e){function n(e,n){return e<<n|e>>>32-n}function t(e,n){var t,o,r,a,i;return r=2147483648&e,a=2147483648&n,i=(1073741823&e)+(1073741823&n),(t=1073741824&e)&(o=1073741824&n)?2147483648^i^r^a:t|o?1073741824&i?3221225472^i^r^a:1073741824^i^r^a:i^r^a}function o(e,o,r,a,i,s,l){return e=t(e,t(t(o&r|~o&a,i),l)),t(n(e,s),o)}function r(e,o,r,a,i,s,l){return e=t(e,t(t(o&a|r&~a,i),l)),t(n(e,s),o)}function a(e,o,r,a,i,s,l){return e=t(e,t(t(o^r^a,i),l)),t(n(e,s),o)}function i(e,o,r,a,i,s,l){return e=t(e,t(t(r^(o|~a),i),l)),t(n(e,s),o)}function s(e){var n,t="",o="";for(n=0;n<=3;n++)t+=(o="0"+(e>>>8*n&255).toString(16)).substr(o.length-2,2);return t}var l,u,c,d,p,m,g,y,f,h=Array();for(h=function(e){for(var n,t=e.length,o=t+8,r=16*((o-o%64)/64+1),a=Array(r-1),i=0,s=0;s<t;)i=s%4*8,a[n=(s-s%4)/4]=a[n]|e.charCodeAt(s)<<i,s++;return i=s%4*8,a[n=(s-s%4)/4]=a[n]|128<<i,a[r-2]=t<<3,a[r-1]=t>>>29,a}(e=function(e){e=e.replace(/\r\n/g,"\n");for(var n="",t=0;t<e.length;t++){var o=e.charCodeAt(t);o<128?n+=String.fromCharCode(o):o>127&&o<2048?(n+=String.fromCharCode(o>>6|192),n+=String.fromCharCode(63&o|128)):(n+=String.fromCharCode(o>>12|224),n+=String.fromCharCode(o>>6&63|128),n+=String.fromCharCode(63&o|128))}return n}(e)),m=1732584193,g=4023233417,y=2562383102,f=271733878,l=0;l<h.length;l+=16)u=m,c=g,d=y,p=f,m=o(m,g,y,f,h[l+0],7,3614090360),f=o(f,m,g,y,h[l+1],12,3905402710),y=o(y,f,m,g,h[l+2],17,606105819),g=o(g,y,f,m,h[l+3],22,3250441966),m=o(m,g,y,f,h[l+4],7,4118548399),f=o(f,m,g,y,h[l+5],12,1200080426),y=o(y,f,m,g,h[l+6],17,2821735955),g=o(g,y,f,m,h[l+7],22,4249261313),m=o(m,g,y,f,h[l+8],7,1770035416),f=o(f,m,g,y,h[l+9],12,2336552879),y=o(y,f,m,g,h[l+10],17,4294925233),g=o(g,y,f,m,h[l+11],22,2304563134),m=o(m,g,y,f,h[l+12],7,1804603682),f=o(f,m,g,y,h[l+13],12,4254626195),y=o(y,f,m,g,h[l+14],17,2792965006),m=r(m,g=o(g,y,f,m,h[l+15],22,1236535329),y,f,h[l+1],5,4129170786),f=r(f,m,g,y,h[l+6],9,3225465664),y=r(y,f,m,g,h[l+11],14,643717713),g=r(g,y,f,m,h[l+0],20,3921069994),m=r(m,g,y,f,h[l+5],5,3593408605),f=r(f,m,g,y,h[l+10],9,38016083),y=r(y,f,m,g,h[l+15],14,3634488961),g=r(g,y,f,m,h[l+4],20,3889429448),m=r(m,g,y,f,h[l+9],5,568446438),f=r(f,m,g,y,h[l+14],9,3275163606),y=r(y,f,m,g,h[l+3],14,4107603335),g=r(g,y,f,m,h[l+8],20,1163531501),m=r(m,g,y,f,h[l+13],5,2850285829),f=r(f,m,g,y,h[l+2],9,4243563512),y=r(y,f,m,g,h[l+7],14,1735328473),m=a(m,g=r(g,y,f,m,h[l+12],20,2368359562),y,f,h[l+5],4,4294588738),f=a(f,m,g,y,h[l+8],11,2272392833),y=a(y,f,m,g,h[l+11],16,1839030562),g=a(g,y,f,m,h[l+14],23,4259657740),m=a(m,g,y,f,h[l+1],4,2763975236),f=a(f,m,g,y,h[l+4],11,1272893353),y=a(y,f,m,g,h[l+7],16,4139469664),g=a(g,y,f,m,h[l+10],23,3200236656),m=a(m,g,y,f,h[l+13],4,681279174),f=a(f,m,g,y,h[l+0],11,3936430074),y=a(y,f,m,g,h[l+3],16,3572445317),g=a(g,y,f,m,h[l+6],23,76029189),m=a(m,g,y,f,h[l+9],4,3654602809),f=a(f,m,g,y,h[l+12],11,3873151461),y=a(y,f,m,g,h[l+15],16,530742520),m=i(m,g=a(g,y,f,m,h[l+2],23,3299628645),y,f,h[l+0],6,4096336452),f=i(f,m,g,y,h[l+7],10,1126891415),y=i(y,f,m,g,h[l+14],15,2878612391),g=i(g,y,f,m,h[l+5],21,4237533241),m=i(m,g,y,f,h[l+12],6,1700485571),f=i(f,m,g,y,h[l+3],10,2399980690),y=i(y,f,m,g,h[l+10],15,4293915773),g=i(g,y,f,m,h[l+1],21,2240044497),m=i(m,g,y,f,h[l+8],6,1873313359),f=i(f,m,g,y,h[l+15],10,4264355552),y=i(y,f,m,g,h[l+6],15,2734768916),g=i(g,y,f,m,h[l+13],21,1309151649),m=i(m,g,y,f,h[l+4],6,4149444226),f=i(f,m,g,y,h[l+11],10,3174756917),y=i(y,f,m,g,h[l+2],15,718787259),g=i(g,y,f,m,h[l+9],21,3951481745),m=t(m,u),g=t(g,c),y=t(y,d),f=t(f,p);return(s(m)+s(g)+s(y)+s(f)).toLowerCase()}}catch(e){}try{window.jsonParse=function(){var e=new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),n=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),t={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"};function o(e,n,o){return n?t[n]:String.fromCharCode(parseInt(o,16))}var r=new String("");return Object,Array,function(t){var a,i,s=t.match(e),l=s[0];"{"===l?a={}:"["===l&&(a=[]);for(var u=[a],c=1,d=s.length;c<d;++c){var p;switch((l=s[c]).charCodeAt(0)){default:(p=u[0])[i||p.length]=+l,i=void 0;break;case 34:if(-1!==(l=l.substring(1,l.length-1)).indexOf("\\")&&(l=l.replace(n,o)),p=u[0],!i){if(!(p instanceof Array)){i=l||r;break}i=p.length}p[i]=l,i=void 0;break;case 91:p=u[0],u.unshift(p[i||p.length]=[]),i=void 0;break;case 93:u.shift();break;case 102:(p=u[0])[i||p.length]=!1,i=void 0;break;case 110:(p=u[0])[i||p.length]=null,i=void 0;break;case 116:(p=u[0])[i||p.length]=!0,i=void 0;break;case 123:p=u[0],u.unshift(p[i||p.length]={}),i=void 0;break;case 125:u.shift()}}return u.length,a}}()}catch(e){}window.parseXml=function(e){return(new window.DOMParser).parseFromString(e,"text/xml")},window.azrc={isFunction:function(e){return"[object Function]"===toString.call(e)},isArray:function(e){return"[object Array]"===toString.call(e)},isPlainObject:function(e){if(!e||"[object Object]"!==toString.call(e)||e.nodeType||e.setInterval)return!1;if(e.constructor&&!hasOwnProperty.call(e,"constructor")&&!hasOwnProperty.call(e.constructor.prototype,"isPrototypeOf"))return!1;var n;for(n in e);return void 0===n||hasOwnProperty.call(e,n)},extend:function(){var e,n,t,r,a,i,s=arguments[0]||{},l=1,u=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[1]||{},l=2),"object"===(void 0===s?"undefined":o(s))||window.azrc.isFunction(s)||(s={}),u===l&&(s=this,--l);l<u;l++)if(null!=(e=arguments[l]))for(n in e)t=s[n],s!==(r=e[n])&&(c&&r&&(window.azrc.isPlainObject(r)||(a=window.azrc.isArray(r)))?(a?(a=!1,i=t&&window.azrc.isArray(t)?t:[]):i=t&&window.azrc.isPlainObject(t)?t:{},s[n]=window.azrc.extend(c,i,r)):void 0!==r&&(s[n]=r));return s}},BeFunky.timeConverter=function(e,n){var t=new Date(1e3*e),o=t.getFullYear(),r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()],a=t.getDate(),i=t.getHours(),s=t.getMinutes(),l=t.getSeconds(),u=r+" "+a+", "+o;return n&&(u+=" "+i+":"+s+":"+l),u},BeFunky.loadAfterLazyImages=function(e){[].concat(r(document.querySelectorAll(e+" [data-src]"))).forEach(function(e){var n=e.src;"string"==typeof n&&(n.includes(window.blankPngKey)||n.includes("none.png"))&&(e.src=e.getAttribute("data-src")),void 0===n&&e.setStyles({backgroundImage:"url('"+e.getAttribute("data-src")+"')"})})},BeFunky.ConvertToBool=function(e){return""!=e&&("1"==e||"true"==e||1==e)}},{}],31:[function(e,n,t){window.googleAuth2=null;var o=void 0,r=!1;BeFunky.preloadGoogleAuth=function(){r||(r=!0,o={attemptSignIn:!1},window.createJavascriptElements("https://apis.google.com/js/client:platform.js?onload=onLoadGoogleLoginCallback"))},BeFunky.loginWithGoogle=function(){return googleAuth2?BeFunky.attemptGoogleLogin():(BeFunky.preloadGoogleAuth(),new Promise(function(e,n){o={attemptSignIn:!0,resolve:e,reject:n}}))},window.onLoadGoogleLoginCallback=function(){googleAuth2?BeFunky.throwError("onLoadGoogleLoginCallback called more than once"):gapi.load("auth2",function(){googleAuth2=gapi.auth2.init({fetch_basic_profile:!0,client_id:"303057181160-pvs0ajfctrvv15i4rmirjsve2plp8m92.apps.googleusercontent.com",scope:"profile email"}),o.attemptSignIn&&BeFunky.attemptGoogleLogin().then(o.resolve,o.reject)})},BeFunky.attemptGoogleLogin=function(){return googleAuth2.signIn().then(function(e){var n=e.getBasicProfile(),t=n.getId(),o=n.getName(),r=n.getEmail(),a=n.getImageUrl();return BeFunky.handleSocialLogin("google",{id:t,name:o,email:r,profile_image:a})}).catch(function(e){return e&&"popup_blocked_by_browser"===e.error?new Promise(function(n,t){BeFunky.confirm(["browser_block_social_login",{provider:"Google"}],{onConfirm:function(){return n(BeFunky.attemptGoogleLogin())},onCancel:function(){return t(e)},confirmText:"try_again"})}):Promise.reject(e)})},window.ready(function(e){document.querySelector(".googleDriveLoginBtn").addEventListener("click",function(e){try{driveInmediateDisplay()}catch(e){}})}),window.DRV_CLIENT_ID="303057181160-pvs0ajfctrvv15i4rmirjsve2plp8m92.apps.googleusercontent.com",window.DRV_SCOPES=["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.file"],window.DRV_ACCESS=null,window.DRV_ACCESS_TIME=null,window.DRV_FLASH_CALLBACK=null,window.onDrvApiLoad=function(){var e=function(){gapi.client.init({apiKey:"AIzaSyAs50xh8tgvIStq5wYwMuEylaLS2-kYaqw"}).then(function(){dv_handleAuthResult()})};gapi.load("auth",{callback:function(){gapi.auth.authorize({client_id:DRV_CLIENT_ID,scope:DRV_SCOPES,immediate:!0},function(n){n&&!n.error&&(DRV_ACCESS=n.access_token,gapi.load("client",e))})}})},window.googleDriveCallbackCheck=function(){var e=!1;try{window.addEventListener("focus",function(n){e=!0},!1)}catch(e){}var n=setInterval(function(){null!==DRV_ACCESS?window.clearInterval(n):!1!==e&&(window.clearInterval(n),null===DRV_ACCESS&&(null!==DRV_FLASH_CALLBACK?dv_handleAuthResult(null):notApiLoadedGoToApp()))},1e3)},window.driveInmediateDisplay=function(e){if(DRV_FLASH_CALLBACK=null!==e?e:null,null!=$googleDriveState)try{document.getElementById("befunky-state").style.display="block",document.getElementById("dynamic-content-state").style.display="none"}catch(e){}if(null===DRV_ACCESS)gapi.auth.authorize({client_id:DRV_CLIENT_ID,scope:DRV_SCOPES,immediate:!1},dv_handleAuthResult),null!==DRV_FLASH_CALLBACK&&googleDriveCallbackCheck();else if(null!=DRV_FLASH_CALLBACK&&null!==DRV_ACCESS)if("undefined"!=typeof gapi&&void 0!==gapi.client&&void 0!==gapi.client.load)gapi.client.load("drive","v2",driveClientLoaded);else try{createJavascriptElements("https://apis.google.com/js/api.js?onload=onDrvApiLoad")}catch(e){}},window.dv_handleAuthResult=function(e){var n=null;if(e||null===DRV_ACCESS)try{n=e.access_token?e.access_token:null}catch(e){}else n=DRV_ACCESS;if(null!==n){if(DRV_ACCESS=n,null!=$googleDriveState)try{document.getElementById("befunky-state").style.display="block"}catch(e){}if("undefined"!=typeof gapi&&void 0!==gapi.client&&void 0!==gapi.client.load)gapi.client.load("drive","v2",driveClientLoaded);else try{createJavascriptElements("https://apis.google.com/js/api.js?onload=onDrvApiLoad")}catch(e){}}else{if(null!=$googleDriveState)try{document.getElementById("befunky-state").style.display="none",document.getElementById("dynamic-content-state").style.display="block",document.querySelector("#dynamic-content-state #loader").style.display="none",document.querySelector("#dynamic-content-state .message-box").style.display="block"}catch(e){}sendToFlashFromDrvParams()}},window.driveClientLoaded=function(){DRV_FLASH_CALLBACK||null==$googleDriveState||(bf_eventTrack("EXTERNAL","GOOGLE_DRIVE","OPEN"),checkDriveFile($googleDriveState)),sendToFlashFromDrvParams()},window.sendToFlashFromDrvParams=function(){if(null!==DRV_FLASH_CALLBACK){var e="https://www.googleapis.com/upload/drive/v3/files";if(null!=DRV_ACCESS)if(0==BeFunky.isUseHTML5)try{document.getElementById(BeFunky.Params.swfId).callbackFromJs(e,DRV_ACCESS)}catch(e){}else try{BFN.BfnService.callbackFromJs(e,DRV_ACCESS)}catch(e){}else if(0==BeFunky.isUseHTML5)try{document.getElementById(BeFunky.Params.swfId).callbackFromJs()}catch(e){}else try{BFN.BfnService.callbackFromJs()}catch(e){}DRV_FLASH_CALLBACK=null}},window.checkDriveFile=function(e){try{gapi.client.drive.files.get({fileId:e}).execute(function(e){downloadDriveFile(e)})}catch(e){}},window.downloadDriveFile=function(e){try{if(e.downloadUrl){var n=gapi.auth.getToken().access_token,t=e.mimeType;if(null!=n){var o=function(){try{"none"!=document.getElementById("modalBackgroundImg").style.display&&hideModalBackgroundImage()}catch(e){}try{setApplicationMode("photoeditor")}catch(e){}openFlash();try{document.getElementById("dynamic-content-state").style.display="none"}catch(e){}},r=null;if("undefined"!=typeof XMLHttpRequest)"withCredentials"in(r=new XMLHttpRequest)?r.open("GET",e.downloadUrl,!0):"undefined"!=typeof XDomainRequest&&(r=new XDomainRequest).open("GET",e.downloadUrl);else{try{r=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}if(null==r)try{r=new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}if(null==r)try{r=new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}if(null==r)try{r=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}r.open("GET",e.downloadUrl)}try{r.responseType="arraybuffer"}catch(e){}r.setRequestHeader("Authorization","Bearer "+n),r.onload=function(){var a=new FileReader;a.onload=function(e){o();try{var n=e.target.result;if(n=(n=(n=n.replace("image/jpeg;","")).replace("image/png;","")).replace("data:base64,",""),0==BeFunky.isUseHTML5){try{document.getElementById(BeFunky.Params.swfId).ToJsBase64Uploader(n)}catch(e){}n=null}else setTimeout(function(){try{BFN.BfnService.ToJsBase64Uploader(n,void 0,"drive"),n=null}catch(e){}},2e3)}catch(e){}a=null};try{a.readAsDataURL(new Blob([r.response],{type:t}))}catch(o){try{var i="https://upload.befunky.com/restupload/driveImageRequest.bfn?dwnurl="+encodeURIComponent(e.downloadUrl)+"&actoken="+n+"&mtype="+t+"&CSRFtoken="+getCsToken();if(0==BeFunky.isUseHTML5)try{document.getElementById(BeFunky.Params.swfId).ToJsUrlUploader(i,null,!1)}catch(e){}else setTimeout(function(){try{BFN.BfnService.ToJsUrlUploader(i,null,!0,"drive")}catch(e){}},2e3)}catch(e){}}},r.onerror=function(){o();var r="https://upload.befunky.com/restupload/driveImageRequest.bfn?dwnurl="+encodeURIComponent(e.downloadUrl)+"&actoken="+n+"&mtype="+t+"&CSRFtoken="+getCsToken();if(0==BeFunky.isUseHTML5)try{document.getElementById(BeFunky.Params.swfId).ToJsUrlUploader(r,null,!1)}catch(e){}else try{BFN.BfnService.ToJsUrlUploader(r,null,!0,"drive")}catch(e){}},r.send()}}}catch(e){}},window.insertDriveFile=function(e,n){var t=function(t){if(t[google.picker.Response.ACTION]==google.picker.Action.PICKED){try{"none"!=document.getElementById("modalBackgroundImg").style.display&&hideModalBackgroundImage()}catch(e){}openFlash();var o=t[google.picker.Response.DOCUMENTS][0].id;if(null!=o){var r="-------314159265358979323846",a="\r\n--"+r+"\r\n",i={title:n,name:n,mimeType:"image/jpeg",parents:[{id:o}]},s=a+"Content-Type: application/json\r\n\r\n"+JSON.stringify(i)+a+"Content-Type: image/jpeg\r\nContent-Transfer-Encoding: base64\r\n\r\n"+e+"\r\n---------314159265358979323846--",l=gapi.client.request({path:"/upload/drive/v3/files",method:"POST",params:{uploadType:"multipart"},headers:{"Content-Type":'multipart/mixed; boundary="'+r+'"'},body:s});callback=function(e){if(0==BeFunky.isUseHTML5)try{document.getElementById(BeFunky.Params.swfId).callbackDriveInsertFile()}catch(e){}else try{BFN.BfnService.callbackDriveInsertFile()}catch(e){}},l.execute(callback)}}else if(t[google.picker.Response.ACTION]==google.picker.Action.CANCEL)if(notApiLoadedGoToApp(),0==BeFunky.isUseHTML5)try{document.getElementById(BeFunky.Params.swfId).callbackDriveInsertFile("error")}catch(e){}else try{BFN.BfnService.callbackDriveInsertFile("cancel")}catch(e){}},o=function(){if(!1!==drv_pickerApiLoaded&&null!==DRV_ACCESS){var e=(new google.picker.DocsView).setIncludeFolders(!0).setMimeTypes("application/vnd.google-apps.folder").setSelectFolderEnabled(!0);(new google.picker.PickerBuilder).setAppId("303057181160").setOAuthToken(DRV_ACCESS).setTitle("Select a Folder").addView(e).setDeveloperKey("AIzaSyAs50xh8tgvIStq5wYwMuEylaLS2-kYaqw").setOrigin(window.location.protocol+"//"+window.location.host).setCallback(t).build().setVisible(!0)}else notApiLoadedGoToApp()};if(!1!==drv_pickerApiLoaded&&null!==DRV_ACCESS){var r=null;try{r=(new Date).getTime()}catch(e){}(null!=r&&null!=DRV_ACCESS_TIME&&r-DRV_ACCESS_TIME>=9e4||null==DRV_ACCESS_TIME||null==r)&&(DRV_ACCESS=null,drvImmediatTryed=!1)}!1!==drv_pickerApiLoaded&&null!==DRV_ACCESS?o():!1===drv_pickerApiLoaded&&null!==DRV_ACCESS?gapi.load("picker",{callback:function(){drv_pickerApiLoaded=!0,o()}}):0==drvImmediatTryed&&(drvImmediatTryed=!0,document.body.addClass("prevent-body-scroll"),gapi.auth.authorize({client_id:DRV_CLIENT_ID,scope:DRV_SCOPES,immediate:!1},function(e){if(e&&!e.error){DRV_ACCESS=e.access_token;try{DRV_ACCESS_TIME=(new Date).getTime()}catch(e){}gapi.load("picker",{callback:function(){drv_pickerApiLoaded=!0,o()}})}}),googleDriveCallbackCheck())},window.drv_pickerApiLoaded=!1,window.drvImmediatTryed=!1,window.drv_OpenPicker=function(){!1!==drv_pickerApiLoaded&&null!==DRV_ACCESS?drv_createPicker():!1===drv_pickerApiLoaded&&null!==DRV_ACCESS?gapi.load("picker",{callback:onDrvPickerApiLoad}):0==drvImmediatTryed&&(drvImmediatTryed=!0,document.body.addClass("prevent-body-scroll"),gapi.auth.authorize({client_id:DRV_CLIENT_ID,scope:DRV_SCOPES,immediate:!1},handleDrvApiAuthResultImmediate),googleDriveCallbackCheck())},window.handleDrvApiAuthResultImmediate=function(e){e&&!e.error&&(DRV_ACCESS=e.access_token,gapi.load("picker",{callback:onDrvPickerApiLoad}))},window.onDrvPickerApiLoad=function(){drv_pickerApiLoaded=!0,drv_createPicker()},window.drv_createPicker=function(){if(drv_pickerApiLoaded&&DRV_ACCESS){var e=new google.picker.View(google.picker.ViewId.DOCS);e.setMimeTypes("image/png,image/jpeg,image/jpg"),(new google.picker.PickerBuilder).setAppId("303057181160").setOAuthToken(DRV_ACCESS).addView(e).addView(new google.picker.DocsUploadView).setDeveloperKey("AIzaSyAs50xh8tgvIStq5wYwMuEylaLS2-kYaqw").setOrigin(window.location.protocol+"//"+window.location.host).setCallback(drv_pickerCallback).build().setVisible(!0)}else notApiLoadedGoToApp()},window.notApiLoadedGoToApp=function(){drvImmediatTryed=!1;try{"none"!=document.getElementById("modalBackgroundImg").style.display&&hideModalBackgroundImage()}catch(e){}openFlash()},window.gaDriveScrollHandler=function(e){window.scrollTo(0,0)},window.drv_pickerCallback=function(e){if(e.action==google.picker.Action.PICKED){var n=e.docs[0].id;if(window.removeEventListener("scroll",window.gaDriveScrollHandler),null!==n){if(openFlash(),"undefined"!=typeof gapi&&void 0!==gapi.client&&void 0!==gapi.client.load)gapi.client.load("drive","v2",function(){checkDriveFile(n)});else try{createJavascriptElements("https://apis.google.com/js/api.js?onload=onDrvApiLoad")}catch(e){}return}}else if(e.action.toLowerCase()!==google.picker.Action.LOADED){window.removeEventListener("scroll",window.gaDriveScrollHandler);try{"none"!=document.getElementById("modalBackgroundImg").style.display&&hideModalBackgroundImage()}catch(e){}openFlash()}else window.addEventListener("scroll",window.gaDriveScrollHandler)}},{}],32:[function(e,n,t){var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,t,o){return t&&e(n.prototype,t),o&&e(n,o),n}}();function a(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}var i=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.init()}return r(e,[{key:"init",value:function(){this.initDefaultValues()}},{key:"initDefaultValues",value:function(){var e=this;this.languages=["en","es","pt","fr","de","it","tr","zh","ja","ko","ru","no","ar"],this.languageData={},this.languages.forEach(function(n){e.languageData[n]={}}),this._language=null,this.defaultLanguage="en";var n=window.initialUserLanguage||this.defaultLanguage;this.siteLanguages=["en","es","pt","fr","it"],"true"===document.documentElement.getAttribute("data-use-app-lang")?this.siteLanguage=n:this.siteLanguage=document.documentElement.lang,this.siteLanguages.includes(this.siteLanguage)||(this.siteLanguage="en"),this.languageUpdateListeners=[],this.updateLanguageStrings=BeFunky.debounce(this.updateLanguageStrings.bind(this),"raf"),this.loadSiteLanguageData(),window.addEventListener("INIT_COMPLETE",this.updateLanguageSelect.bind(this)),this.language=n}},{key:"loadSiteLanguageData",value:function(){var e=this,n="global-all"+window.languageVersion+".json",t=window.globalAssetsPath+"languages/global/"+n;BeFunky.request(t,{},function(n){var t=n.response;if(n.error)return BeFunky.logError("Unable to get site language data");e.mergeTranslations(t),BeFunky.onDocumentReady(e.updateLanguageStrings.bind(e))})}},{key:"loadAppLanguageData",value:function(){var e=this,n="all"+window.appLanguageVersion+".json",t=window.globalAssetsPath+"languages/app/"+n;BFN.IndexedDB.getFile("language",n,t).then(function(n){e.mergeTranslations(n),e.updateLanguageStrings()}).catch(function(e){BeFunky.logError("Unable to get app language data from IndexedDB or server",e)})}},{key:"updateLanguageStrings",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if((!(n="boolean"==typeof n&&n)||this.language!==this.siteLanguage)&&this.hasLanguageLoaded(this._language)){var t=[].concat(a(document.querySelectorAll("#bfn-app [data-lang]"))),o=[].concat(a(document.querySelectorAll("#site_root [data-lang]"))),r=[].concat(a(document.querySelectorAll(".modal [data-lang], .dialog [data-lang]"))),i=function(n,t){n.forEach(function(n){if("function"!=typeof n.onLanguageUpdate){var o=n.getAttribute("data-lang");if(o.startsWith("<"))n.innerHTML=o;else{var r=e.getString(o,t);"INPUT"===n.nodeName?n.setAttribute("placeholder",r):r.includes("<")?n.innerHTML=r:n.textContent=r}}else n.onLanguageUpdate()})};n||(i(t),i(o,this.siteLanguage)),i(r,window.isFlashOpenned?this.language:this.siteLanguage),this.languageUpdateListeners.forEach(function(e){e()}),n||this.sendToServer()}}},{key:"updateLanguageSelect",value:function(){window.UITools&&(UITools.setToolValue("language","select",this.language),UITools.updateToolControls("language"))}},{key:"registerElement",value:function(e,n){var t=this;if(!e||!e.dataset.lang)return BeFunky.logError("Element must have a data-lang attribute.");var o=e.dataset.lang;e.onLanguageUpdate=function(){e.innerHTML=t.getStringReplacements(o,n)},e.onLanguageUpdate()}},{key:"sendToServer",value:function(){this._language&&window.BFN&&(BFN.SettingsManager&&BFN.SettingsManager.updateSetting("language",this._language),BFN.userVo&&(BFN.userVo.language=this._language))}},{key:"getString",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._language;if("string"!=typeof e)return BeFunky.throwError(BeFunky.getType(e)+" passed to LanguageManger.getString",e),"";if(!n)return r();var t=this.languageData[n][e];if(t)return t;if(n!==this.defaultLanguage){var o=this.languageData[this.defaultLanguage][e];if(o)return o}return r();function r(){return e!==e.toLowerCase()?e:e.split("_").map(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}).join(" ")}}},{key:"isTranslated",value:function(e){return!!this._language&&!!this.languageData[this._language][e]}},{key:"getStringReplacements",value:function(e,n){return e=this.getString(e),Object.keys(n).forEach(function(t){var o=n[t];if("function"==typeof o&&(o=o()),"string"!=typeof o)return BeFunky.throwError("Invalid string replacement: "+BeFunky.getType(o),o);e=e.split("{{"+t+"}}").join(o)}),e}},{key:"mergeTranslations",value:function(e){var n=this,t=function(t){if("object"===o(e[t])){if(BeFunky.Params&&BeFunky.Params.IS_LC){var r=Object.keys(e[t]).filter(function(e){return n.languageData[t].hasOwnProperty(e)});r.length&&BeFunky.logError("Duplicate "+t+' translation IDs: "'+r.join(", ")+'"')}Object.assign(n.languageData[t],e[t])}else BeFunky.logError("Missing language data for "+t,{data:e})};for(var r in this.languageData)t(r)}},{key:"hasLanguageLoaded",value:function(e){if(!e)return!1;var n=this.languageData[e];for(var t in n)if(n.hasOwnProperty(t))return!0;return!1}},{key:"addLanguageUpdateListener",value:function(e){this.languageUpdateListeners.includes(e)||this.languageUpdateListeners.push(e)}},{key:"removeLanguageUpdateListener",value:function(e){var n=this.languageUpdateListeners.indexOf(e);-1!==n&&this.languageUpdateListeners.splice(n,1)}},{key:"handleUserUpdateLanguage",value:function(e){this.language=e,BFN&&BFN.BfnService&&BFN.BfnService.track("CREATE","LANGUAGE",this.language.toUpperCase())}},{key:"language",set:function(e){"string"==typeof e&&(e=e.toLowerCase().split("_")[0]),"nb"===e&&(e="no"),this.languages.includes(e)||(BeFunky.logError('Unsupported language specified: "',e,'". Using default language.'),e=this.defaultLanguage),e!==this._language&&(this._language=e,BeFunky.Params.swfFlashVars.language=e,BeFunky.onDocumentReady(this.updateLanguageStrings.bind(this)),this.updateLanguageSelect())},get:function(){return this._language||this.defaultLanguage}}]),e}();BeFunky.LanguageManager=new i},{}],33:[function(e,n,t){var o=BeFunky.once(function(){var e=document.createElement("div");e.id="flash_image_library",BeFunky.imageLibraryModal(e,{imageSelectionHandler:function(n){return urlUpload(n.imageURL),BeFunky.closeModal(e.id),!1},isSelected:function(){return!1},initialMode:"UPLOAD_MENU",onClose:openFlash}),e.addClass("bfn"),document.body.appendChild(e),BeFunky.flashImageLibrary=e});BeFunky.openPreviousUploadsPanel=function(){o(),BeFunky.flashImageLibrary.open("BeFunky")},BeFunky.openFacebookPanel=function(){o(),BeFunky.flashImageLibrary.open("Facebook")},BeFunky.openEtsyPanel=function(){},window.openerDivAc=function(e){return hideEditor(e)},BeFunky.contestDismissed=function(){return"1"},window.bfnJUploadFromComputer=function(e){var n=document.createElement("input");n.type="file",n.id="bfn_fk_image_computer_input",n.setStyles({display:"none"}),n.setAttribute("accept","bfd"==e?".bfd":"image/*"),document.body.appendChild(n);var t=document.createElement("button");t.id="bfn_fk_image_computer_input_btn",t.setStyles({display:"none"}),document.body.appendChild(t);var o=function(e){n.click()};n.addEventListener("click",function n(t){var r=function(){var t=null;try{t=document.getElementById("bfn_fk_image_computer_input").files[0]}catch(e){}if(null!=t){var r=new FileReader;r.onload=function(n){var o=null;try{if(o=n.target.result,"bfd"==e){o=o.replace("data:;base64,","");try{o=decodeURIComponent(escape(window.atob(o)))}catch(e){}}else o=(o=(o=(o=o.replace("image/jpeg;","")).replace("image/png;","")).replace("data:base64,","")).replace("data:;base64,","");var a=null;try{a=(a=t.name).substring(0,a.lastIndexOf("."))}catch(e){}try{null!=a?document.getElementById(BeFunky.Params.swfId).bfnJUploadFromComputerCallback(o,e,a):document.getElementById(BeFunky.Params.swfId).bfnJUploadFromComputerCallback(o,e)}catch(e){}}catch(e){try{document.getElementById(BeFunky.Params.swfId).bfnJUploadFromComputerCallback(null,"cancel")}catch(e){}}o=null,r=null},r.readAsDataURL(t)}else try{document.getElementById(BeFunky.Params.swfId).bfnJUploadFromComputerCallback(null,"cancel")}catch(e){}document.body.onfocus=null,document.getElementById("bfn_fk_image_computer_input").value="",document.getElementById("bfn_fk_image_computer_input").removeEventListener("click",n),document.getElementById("bfn_fk_image_computer_input_btn").removeEventListener("click",o),document.getElementById("bfn_fk_image_computer_input").parentNode.removeChild(document.getElementById("bfn_fk_image_computer_input")),document.getElementById("bfn_fk_image_computer_input_btn").parentNode.removeChild(document.getElementById("bfn_fk_image_computer_input_btn"))};document.body.onfocus=function(){setTimeout(r,100)}},!1),t.addEventListener("click",o,!1),t.click()};var r=void 0;window.getModalBackgroundImage=function(){return r||(r=document.getElementById("modalBackgroundImg")),r},window.showBase64Image=function(e){var n=getModalBackgroundImage();n.setStyles({marginTop:0,width:"100%",height:"100%",display:"block"}),n.src="data:image/jpeg;base64,"+e};var a=void 0;window.hideModalBackgroundImage=function(){var e=getModalBackgroundImage();if(e&&"block"===e.style.display){if(e.setStyles({display:"none"}).src="",!a)try{a=document.getElementById(BeFunky.Params.swfId)}catch(e){}a&&(a.width=setInitFlashWidth(),a.height=setInitFlashHeight())}},window.flFunctionCall=function(e){switch(BeFunky.LoginPanelObj.closeNextFunction=openFlash,e){case"SIGN_IN":BeFunky.openLoginPanel("SIGNIN",openFlash);break;case"REGISTER":BeFunky.openLoginPanel("REGISTER",openFlash)}}},{}],34:[function(e,n,t){function o(e){var n={upgrade:function(){BeFunky.openUpgradePanel(null,!0)},register:function(){BeFunky.openLoginPanel("REGISTER")},sign_in:function(){BeFunky.openLoginPanel("SIGNIN")},pay_monthly:function(){BeFunky.openPaymentPanel("monthly","charge")},pay_yearly:function(){BeFunky.openPaymentPanel("yearly","charge")},switch_to_yearly:function(){return BeFunky.promptUserToUpgradeToYearly()},get_started_header:function(){return r("HEADER")},get_started:function(){return r()}};return n[e]?n[e]():BeFunky.isCreateRoute(e)?BeFunky.pushRoute(e):void BeFunky.throwError('Unhandled Prismic button action: "'+e+'" ('+BeFunky.getType(e)+")")}function r(e){if(window.isMobile)return BeFunky.trackDeepLink("GET-STARTED",e),BeFunky.handleMobileUserAttemptToOpenApp("web_mobile_apps");var n=document.getElementById("get_started_modal");[].concat(function(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}(n.querySelectorAll("img"))).forEach(function(e){return window.loadLazyImage(e)}),BeFunky.openModal(n,{size:"large",addCloseButton:!0})}BeFunky.onDocumentReady(function(){if(window.prismicButtonActions.length){var e=window.prismicButtonActions[window.prismicButtonActions.length-1],n=e.action,t=e.time,r=Date.now()-t;r<2e3?(console.log('Handling Prismic button action "'+n+'" that occurred '+r+"ms before befunky.core.js loaded or document was ready:"),o(n)):BeFunky.logError('Prismic button action "'+n+'" ignored b/c it occurred '+r+"ms before befunky.core.js loaded or document was ready")}window.onClickPrismicButton=function(e){o(e)}})},{}],35:[function(e,n,t){var o=e("navigo"),r=window.siteUrl.replace(/\/$/,""),a=new o(r);function i(e){var n=e&&e.deepLink?e.deepLink:"";u(function(){if(!window.isFlashOpenned){if(BeFunky.myPhotosPage&&BeFunky.myPhotosPage.imageToEdit){var e=BeFunky.myPhotosPage.imageToEdit;return BeFunky.myPhotosPage.imageToEdit="",window.openUploadPanel({type:"photoeditor",img:e,ignoreExistingProject:!0})}window.openUploadPanel(n)}})}BeFunky.sessionRoutes=[window.location.href.replace(r,"")],BeFunky.isReplacingRoute=!1,BeFunky.pushRoute=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if((e=e.replace(/\/?(\?|#|$)/,"/$1")).startsWith("/")||(e="/"+e),BeFunky.isReplacingRoute=n,BeFunky.isCreateRoute()&&BeFunky.isCreateRoute(e))if(BeFunky.isReplacingRoute=!0,BeFunky.isUseHTML5){console.log("Is in app? ",window.isFlashOpenned),console.log("Is html5app_created?",BeFunky.html5app_created);var t=document.getElementById("bfn-app");console.log("WebGL app visibility?",t&&getComputedStyle(t).display);var o=document.getElementById("appl-for-flash");console.log("Flash app visibility?",o&&getComputedStyle(o).display);var r=document.getElementById("site_root");console.log("Site visibility?",r&&getComputedStyle(r).display),console.log("Load screen showing?",BeFunky.isLoadScreenActive()),console.log("New route = ",e),BeFunky.throwError("Unexpected create route pushed when app is already in create route.")}else e===g(window.location.href).replace(/\/?(\?|#|$)/,"/$1")&&setTimeout(function(){!BeFunky.isCreateRoute()||window.isFlashCreationComplated||BeFunky.isModalOpen()||BeFunky.promptUserToEnableFlash()},100);BeFunky.isReplacingRoute&&a.historyAPIUpdateMethod("replaceState"),a.navigate(e)},BeFunky.routes={"/explore":function(){u(function(){m(),BeFunky.explorePage.search(""),BeFunky.explorePage.openImage("")})},"/explore/photos":function(){u(function(){m(),BeFunky.explorePage.search(""),BeFunky.explorePage.openImage("")})},"/explore/photos/:keyword":function(e){var n=e.keyword;u(function(){m(),BeFunky.explorePage.search(n),BeFunky.explorePage.openImage("")})},"/explore/gallery/:imageID":function(e){var n=e.imageID;u(function(e){if(!e){m();var t=[BeFunky.explorePage,BeFunky.galleryPage,BeFunky.myPhotosPage].find(function(e){return!0===e.isAvailable});if(t)t.openImage(n);else!!BeFunky.Params.galleryImageId||BeFunky.throwError("No page API handled single image route. Reloading page..."),setTimeout(function(){window.location.reload()},100)}})},"/gallery/:nick":function(e){e.nick;u(function(){m(),BeFunky.galleryPage.openImage("")})},"/myphotos":function(){u(function(){m(),BeFunky.myPhotosPage.selectFilter("all")})},"/myphotos/:filter":function(e){var n=e.filter;u(function(){m(),BeFunky.myPhotosPage.selectFilter(n)})},"/create":i,"/es/crear":i,"/pt/criar":i,"/create/:deepLink":i,"/es/crear/:deepLink":i,"/pt/criar/:deepLink":i},BeFunky.originalPageRoute=g(window.location.href);var s=void 0;BeFunky.waitUntil({condition:function(){return(s=document.querySelector('link[rel="canonical"]'))||document.body},onSuccess:function(){if(!s||!s.href)return BeFunky.logError("Unable to get canonical tag for this page");BeFunky.canonicalRoute=g(s.href)},onTimeout:function(){BeFunky.logError("Unable to get canonical tag for this page")}}),a.notFound(function(){u(function(e){if(!e){var n=g(window.location.href);n!==BeFunky.originalPageRoute&&n!==BeFunky.canonicalRoute?(console.log("Reloading page to force browser to navigate to server-side route:",window.location.href),window.location.reload()):BeFunky.isCreateRoute(n)||m()}})});var l=0;function u(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=0===l;if(l++,!t){var o=window.location.href.replace(r,"");BeFunky.isReplacingRoute&&BeFunky.sessionRoutes.pop(),BeFunky.sessionRoutes.push(o),BeFunky.isReplacingRoute||(window.ga?(window.ga("set","page",o),window.ga("send","pageview")):BeFunky.logError("Unable to track client-side route in Google Analytics",{route:o}))}function i(){a.pause(),e(t),a.resume()}n?BeFunky.onDocumentReady(i):i()}setTimeout(function(){Object.keys(BeFunky.routes).forEach(function(e){e.startsWith("/")&&!e.endsWith("/")||BeFunky.throwError("Invalid route definition:",e)}),a.on(BeFunky.routes).resolve()},0);var c=["/explore","/explore/photos","/explore/photos/:keyword"],d=["/gallery/:nick"],p=["/myphotos","/myphotos/:filter"];function m(){if(BeFunky.isUseHTML5){if(!window.isFlashOpenned)return}else{var e=getModalBackgroundImage(),n=e&&"block"===e.style.display;if(!window.isFlashOpenned&&!n)return}var t=BeFunky.LanguageManager.isTranslated("confirm_hide")?BeFunky.LanguageManager.getString("confirm_hide"):"Are you sure you would like to hide the application?";if(confirm(t))!function(){var e=BeFunky.getModal(),n=0;for(;e;){if(BeFunky.closeModal(e.modalID),console.log("Closed modal:",e.modalID),++n>10){BeFunky.throwError("Unexpected number of modals");break}e=BeFunky.getModal()}BeFunky.isUseHTML5||hideModalBackgroundImage()}(),hideEditor(!1);else{var o=window.location.href;window.history.forward(),setTimeout(function(){o===window.location.href&&(console.log("Using Back instead of Forward to return to app"),window.history.back())},100)}}function g(e){var n=e.replace(r,"").split("?")[0].split("#")[0].replace(/\/$/,"");return n.startsWith("/")?n:"/"+n}BeFunky.waitUntil({condition:function(){return!!BeFunky.explorePage},onSuccess:function(){BeFunky.onDocumentReady(function(){function e(e){a._routes=a._routes.filter(function(n){var t=n.route;return!e.includes(t)})}BeFunky.explorePage.isAvailable||e(c),BeFunky.galleryPage.isAvailable||e(d),BeFunky.myPhotosPage.isAvailable||e(p)})},onTimeout:function(){console.log("WebGL detection complete?",BeFunky.webGLDetectionComplete),console.log("BeFunky keys:",JSON.stringify(Object.keys(BeFunky).sort())),BeFunky.throwError("BeFunky.explorePage is unavailable")}}),BeFunky.onDocumentReady(function(){[].concat(function(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}(document.querySelectorAll("a[data-route]"))).forEach(function(e){e.href.startsWith(r)&&e.addEventListener("click",function(n){n.preventDefault(),BeFunky.trackDeepLinkButtonClick(e),BeFunky.pushRoute(e.href.replace(r,""))})})}),BeFunky.isCreateRoute=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href;return["create","es/crear","pt/criar"].some(function(n){return e.includes(n)})},BeFunky.trackDeepLinkButtonClick=function(e){var n=e.href;if(n&&BeFunky.isCreateRoute(n)){var t=g(n).split("/").pop(),o=void 0;if(["create","crear","criar"].includes(t))o="PHOTO-EDITOR";else{if(!window.deepLinkRouteData[t])return void BeFunky.throwError("Unsure how to track deep link button click",link.href);o=window.deepLinkRouteData[t].trackingID}var r=void 0,a=document.getElementById("site_nav");a&&a.contains(e)&&(r="HEADER"),BeFunky.trackDeepLink(o,r)}}},{navigo:69}],36:[function(e,n,t){BeFunky.handleSocialLogin=function(e,n){var t=n.id,o=n.email,r=n.name,a=n.gender,i=n.user_birthday,s=n.profile_image;return new Promise(function(n,l){if(!["google","facebook"].includes(e))return l("Invalid social provider: "+e);var u="socialnetwork_info_control|||"+("google"===e?"GOOGLE":"FACEBOOK")+"|||"+t+"|||"+o+"|||"+r+"|||"+a+"|||"+i+"|||"+r+"|||"+s+"|||"+getCsToken();u="function"==typeof window.base64_encode?window.base64_encode(u):btoa(u);var c=BeFunky.Params.siteUrl+"oauth.php",d={method:"POST",body:"snchk="+u,headers:{"Content-Type":"application/x-www-form-urlencoded"}};BeFunky.request(c,d,function(t){var o=t.error,r=t.response;if(o)return BeFunky.logError("Unable to connect to BeFunky API after FB login:",o),l(o);var a=r.server_response;if(!a||!a.current_user||"true"!==a.isSuccess)return BeFunky.logError("Unable to get successful {server_response} from BeFunky API after FB login:",r),l("invalid_response");var i=["true",!0].includes(a.current_user.newUser)?"_NEW":"";return window.bf_eventTrack("EXTERNAL","SIGNIN_SOCIAL",e.toUpperCase()+i),BeFunky.onLoginSuccess(a),n(a)})})},window.openCustomPopupInstance=null,window.openCustomPopup=function(e){var n=600;e.includes("weheartit.com")&&(n=800);var t=screen.width/2-375,o=screen.height/2-n/2;try{openCustomPopupInstance=window.open(e,"APP","top="+o+",left="+t+",width=750,height="+n+",resizable=1",!0);try{openCustomPopupInstance.focus()}catch(e){}}catch(e){toFlex({cancel:1})}windowOpenerInterval=setInterval(function(){if(null==openCustomPopupInstance||openCustomPopupInstance.closed){try{clearInterval(windowOpenerInterval)}catch(e){}windowOpenerInterval=null,setTimeout(function(){toFlex({cancel:1})},555)}},500)},window.snLoggedinType="",window.snWinType="",window.snType="FACEBOOK"},{}],37:[function(e,n,t){window.get_browser=function(){var e=navigator.userAgent,n=void 0,t=e.match(/(opera|chrome|safari|firefox|msie|edge|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(t[1]))return{name:"IE",version:(n=/\brv[ :]+(\d+)/g.exec(e)||[])[1]||""};if("Chrome"===t[1]){if(null!=(n=e.match(/\bOPR\/(\d+)/)))return{name:"Opera",version:n[1]};if(null!=(n=e.match(/\Edge\/(\d+)/)))return{name:"Edge",version:n[1]}}return t=t[2]?[t[1],t[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(n=e.match(/version\/(\d+)/i))&&t.splice(1,1,n[1]),{name:t[0],version:t[1]}},window.getBrowserData=function(e){var n={},t=n.uaString=e.userAgent,o=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*([\d\.]+)/i)||[];o[1]&&(o[1]=o[1].toLowerCase());var r="chrome"===o[1],a="chrome"===o[1];if(r&&(r=t.match(/\bOPR\/([\d\.]+)/)),a&&(a=t.match(/\Edge\/([\d\.]+)/)),/trident/i.test(o[1])){var i=/\brv[ :]+([\d\.]+)/g.exec(t)||[];n.name="msie",n.version=i[1]}else if(r)n.name="opera",n.version=r[1];else if(a)n.name="edge",n.version=a[1];else if("safari"===o[1]){var s=t.match(/version\/([\d\.]+)/i);n.name="safari",n.version=s[1]}else n.name=o[1],n.version=o[2];var l=[];if(n.version){for(var u=n.version.match(/(\d+)/g)||[],c=0;c<u.length;c++)l.push(u[c]);l.length>0&&(n.majorVersion=l[0])}return n.name=n.name||"(unknown browser name)",n.version={full:n.version||null,parts:l,major:l.length>0?l[0]:""},n},window.getSystemInformation=function(e){try{var n=null,t=null;try{var o=get_browser();n=o.name,t=Number(o.version)}catch(e){}try{var r=getBrowserData(window.navigator||navigator);null!=r.version.full&&(t=r.version.full)}catch(e){}var a=navigator.userAgent,i="",s="",l="";screen.width&&(width=screen.width?screen.width:"",height=screen.height?screen.height:"",l+=width+" x "+height);var u=[{s:"ChromeOS",r:/(CrOS)/},{s:"ChromeOS",r:/\bCrOS\b/},{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];if(""!=a)try{for(var c in u){var d=u[c];if(d.r.test(a)){i=d.s;break}}switch(/Windows/.test(i)&&(s=/Windows (.*)/.exec(i)[1],i="Windows"),i){case"Mac OS X":s=/Mac OS X (10[\.\_\d]+)/.exec(a)[1];break;case"Android":s=/Android ([\.\_\d]+)/.exec(a)[1];break;case"iOS":s=(s=/OS (\d+)_(\d+)_?(\d+)?/.exec(nVer))[1]+"."+s[2]+"."+(0|s[3])}}catch(e){}try{null!=i&&i.length<1&&(i=a)}catch(e){}var p=-1,m=-1,g=-1;try{var y=document.createElement("canvas"),f=y.getContext("webgl")||y.getContext("experimental-webgl");if(f&&f instanceof WebGLRenderingContext){p=f.getParameter(f.MAX_TEXTURE_SIZE),m=f.getParameter(f.MAX_COMBINED_TEXTURE_IMAGE_UNITS);try{var h=f.getExtension("WEBGL_debug_renderer_info");null!=h&&(g=f.getParameter(h.UNMASKED_RENDERER_WEBGL))}catch(e){g=-1}}y=null,f=null}catch(e){}window.systemInfo={browser:null!=n?n:"",browserVersion:null!=t?t:"",os:""!=i&&null!=i?i:"",osVersion:""!=s&&null!=s?s:"",wbglts:p,wbglcts:m,wbglumr:g};var v="--OS: "+window.systemInfo.os+" "+window.systemInfo.osVersion+", --BROWSER: "+window.systemInfo.browser+" "+window.systemInfo.browserVersion+", --WBGLTS: "+window.systemInfo.wbglts+", --WBGLCTS: "+window.systemInfo.wbglcts+", --WBGLUMR: "+window.systemInfo.wbglumr+", --SCREEN: "+l+", --APP_TYPE: "+(1==window.webgl_is_supported?"HTML5":"FLASH");return e?v:window.systemInfo}catch(e){}return e?"":{error:!0}}},{}],38:[function(e,n,t){BeFunky.webGLDetectionComplete=!1,window.webgl_is_supported=!1,window.graphic_black_list=["Mobile Intel(R) 4 Series Express Chipset","Intel(R) G41 Express Chipset","Intel(R) Q45/Q43 Express Chipset","Intel(R) G45/G43 Express Chipset","Intel(R) 965 Express Chipset","PowerVR Rogue GX6250","NVIDIA Quadro FX 540","NVIDIA Quadro FX 1400","NVIDIA Quadro FX 3450","NVIDIA GeForce G102M","NVIDIA GeForce 6100","NVIDIA GeForce 6150SE","NVIDIA GeForce 6150","NVIDIA GeForce 6600","NVIDIA GeForce 7000","NVIDIA GeForce 7025 / NVIDIA nForce 630a","NVIDIA GeForce 7050","NVIDIA GeForce 7100","NVIDIA GeForce 7150M","NVIDIA GeForce 7300","NVIDIA GeForce Go 7600","NVIDIA GeForce 7900","NVIDIA GeForce 8200","NVIDIA GeForce 8400","NVIDIA GeForce 9300","NVIDIA GeForce 9400","ATI Radeon HD 2400","ATI Radeon 3000 Graphics","ATI Radeon 3100 Graphics","ATI Radeon HD 3200","ATI Mobility Radeon HD 4530","AMD Radeon HD 6300M"],window.isHighSierraWithSafari11=!1,window.webGLSupportControl=function(){BeFunky.webGLDetectionComplete=!0,window.isUseAppTypeSetted&&(window.graphic_black_list=[]),window.isMobile||window.setWebGLIsSupported();try{var e=getCookie("gl_sprt"),n=null;try{n=localStorage.getItem("__IndexedDB_version")}catch(e){}"1"!=e&&null==n||0!=window.webgl_is_supported?setCookie("gl_sprt",0==window.webgl_is_supported?"0":"1",365):(window.webgl_is_supported=!0,window.BfnmaxImageSize||(BeFunky.logError("Enabling WebGL even though detection failed","1"==e,!!n),window.BfnmaxImageSize=4088))}catch(e){}if(window.isHighSierra){var t=null,o=null;try{var r=get_browser();t=r.name,o=Number(r.version)}catch(e){}window.isHighSierraWithSafari11=null!=t&&"SAFARI"==t.toUpperCase()&&null!=o&&0==isNaN(o)&&o>10}},window.setWebGLIsSupported=function(){console.log("-- checking WebGL support"),window.bfn_resolution=1,window.bfn_antialias=!1,window.isWindowsOld=!1;var e=null;try{e=navigator.userAgent}catch(e){}var n=null;try{navigator&&void 0!==navigator.deviceMemory&&(n=navigator.deviceMemory)}catch(e){}try{if(null!=n&&n<=2&&/Windows/.test(e)&&!1==!window.location.href.includes("www.befunky.com"))return void(window.webgl_is_supported=!1)}catch(e){}try{if(/(Windows NT 5.1|Windows NT 5.2|Windows NT 6.0|Windows XP)/.test(e))return void(window.webgl_is_supported=!1)}catch(e){}try{if(/(MacPPC|MacIntel|Mac_PowerPC|Macintosh|Mac OS X)/.test(e)){var t=/10[\.\_\d]+/.exec(e)[0];/[\_]/.test(t)&&(t=t.split("_").join("."));var o=t.split(".");if(o[1]&&parseInt(o[1])<10)return void(window.webgl_is_supported=!1)}}catch(e){}try{/(Windows 7|Windows NT 6.1)/.test(e)&&(window.isWindowsOld=!0)}catch(e){}window.webgl_is_supported=!0;var r=null;if(0==function(){var e=null;try{var n=get_browser();r=n.name,e=Number(n.version)}catch(e){}return null==e||0!=isNaN(e)||null==r||!("CHROME"==r.toUpperCase()&&e<55||"FIREFOX"==r.toUpperCase()&&e<48||"MSIE"==r.toUpperCase()&&e<=11||"IE"==r.toUpperCase()&&e<=11||"EDGE"==r.toUpperCase()&&e<=14||"SAFARI"==r.toUpperCase()&&e<10||1==window.isMacOsLowerThanCapitan&&"SAFARI"==r.toUpperCase()&&e<=10||"OPERA"==r.toUpperCase()&&e<40)}())console.log("-- checking browser version",!1),window.webgl_is_supported=!1;else{console.log("-- checking browser version",!0);var a=null,i=null;try{i=document.createElement("canvas");var s={failIfMajorPerformanceCaveat:!0,alpha:!0,antialias:!0,premultipliedAlpha:!0,preserveDrawingBuffer:!0,stencil:!0};a=i.getContext("webgl",s)||i.getContext("experimental-webgl",s)}catch(e){}if(a&&null!=a&&a instanceof WebGLRenderingContext){var l=a.getExtension("OES_standard_derivatives");window.webglTextureSize=a.getParameter(a.MAX_TEXTURE_SIZE);var u=window.webglTextureSize>=4096;try{null!=n&&n<=2&&!1==!window.location.href.includes("www.befunky.com")&&4096==window.webglTextureSize&&(l=null)}catch(e){}if(null!=l&&1==u&&"undefined"!=typeof graphic_black_list&&u&&void 0!==r)try{var c=a.getExtension("WEBGL_debug_renderer_info");if(null!=c){window.webglUnmaskedRenderer=a.getParameter(c.UNMASKED_RENDERER_WEBGL);for(var d=0;d<graphic_black_list.length;d++)if(webglUnmaskedRenderer.includes(graphic_black_list[d])){l=null;break}null!=l&&(setTimeout(function(){window.bf_eventTrack("EXTERNAL","WEBGL_GRAPHIC",window.webglUnmaskedRenderer)},3100),navigator&&void 0!==navigator.deviceMemory&&setTimeout(function(){window.bf_eventTrack("EXTERNAL","DEVICE_MEMORY",navigator.deviceMemory)},3110))}}catch(e){}if(null!=l&&u){window.webgl_is_supported=!0,window.FixedPixiPaddingSize=8;window.BfnmaxImageSize=4096-window.FixedPixiPaddingSize;var p=a.getParameter(a.MAX_COMBINED_TEXTURE_IMAGE_UNITS),m=window.webglTextureSize>window.BfnmaxImageSize&&p>79?8192:Math.min(4096,window.webglTextureSize)||4096;window.BfnmaxImageSize=Math.min(window.BfnmaxImageSize,m-window.FixedPixiPaddingSize),console.log("Max Image Size Set:",window.BfnmaxImageSize,"Max Image Size that BeFunky can support:",m)}else window.webgl_is_supported=!1}else window.webgl_is_supported=!1;i=null,a=null}console.log("-- is WebGL supported?",window.webgl_is_supported,"maxImageSize:",window.BfnmaxImageSize)}},{}],39:[function(e,n,t){window.getWindowWidth=function(){var e=0;return"number"==typeof window.innerWidth?e=window.innerWidth:document.documentElement&&document.documentElement.clientWidth?e=document.documentElement.clientWidth:document.body&&document.body.clientWidth&&(e=document.body.clientWidth),e},window.getWindowHeight=function(){var e=0;return"number"==typeof window.innerWidth?e=window.innerHeight:document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?e=document.documentElement.clientHeight:document.body&&(document.body.clientWidth||document.body.clientHeight)&&(e=document.body.clientHeight),e},window.setInitFlashHeight=function(){var e=getWindowHeight();return flashFreeTop>0&&(e-=flashFreeTop),e},window.setInitFlashWidth=function(){var e=getWindowWidth();if(1==isflashFreeRight){e>=980?170!=flashFreeRight&&(flashFreeRight=170,"-5000px"!=document.getElementById("main").style.top&&addRightAds(!0)):e<980&&0!=flashFreeRight&&(flashFreeRight=0,removeAds(!0));try{var n=setInitFlashHeight()/2-300;n<5&&(n=5),document.getElementById("0x00001002").style.paddingTop=n+"px"}catch(e){}e-=flashFreeRight}return e},window.reResizeFlashHeight=function(){if(("1"==BeFunky.User.FlashVarsObject.pl||BeFunky.User.FlashVarsObject.pl>0)&&(removeAds(),flashFreeTop=0,flashFreeRight=0,isflashFreeRight=!1),"-5000px"!=document.getElementById("main").style.top&&"-5000"!=document.getElementById("main").style.top&&-5e3!=document.getElementById("main").style.top){if("1"==BeFunky.User.FlashVarsObject.pl||BeFunky.User.FlashVarsObject.pl>0||calculateAdWidth(),document.getElementById("main").setStyles({top:"",left:"",width:setInitFlashWidth()+"px",height:setInitFlashHeight()+"px"}),0==BeFunky.isUseHTML5)try{document.getElementById(""+BeFunky.Params.swfId).setAttribute("width",setInitFlashWidth()),document.getElementById(""+BeFunky.Params.swfId).setAttribute("height",setInitFlashHeight())}catch(e){}(document.getElementById("site_root")||document.getElementById("wrapper")).setStyles({display:"none"});try{window.dispatchEvent(new Event("resize"))}catch(e){}}},window.calculateAdWidth=function(){var e=getWindowWidth(),n=e;null!==document.getElementById("socialSharingDiv")&&"none"!=document.getElementById("socialSharingDiv").style.display&&(n=e-240),null!==document.getElementById("relamIc")&&document.getElementById("relamIc").setStyles({width:n+"px",margin:"0px 0 0 0"})}},{}],40:[function(e,n,t){var o=BeFunky.once(function(){var e=document.getElementById("thank_you_body");BeFunky.LanguageManager.registerElement(e,{collection_of_tutorials:'<a href="https://blog.befunky.com/tutorials/" target="_blank">'+BeFunky.LanguageManager.getString("collection_of_tutorials")+"</a>"})});BeFunky.openThankYouPanel=function(){o(),BeFunky.loadAfterLazyImages("#thank_you_modal"),BeFunky.befunkyPopupContainerOpen("#thank_you_modal",{})}},{}],41:[function(e,n,t){var o=BeFunky.once(function(){document.getElementById("welcome_learn_more").addEventListener("click",function(){BeFunky.openUpgradePanel(void 0,!0)})});BeFunky.openWelcomePanel=function(){o();var e=void 0;try{e=BFN.AppModel.sectionValue("default","collage","designer")}catch(n){e="default"}document.getElementById("welcome_modal_features_list").innerHTML={default:["pricing_modal_background_heading","pricing_modal_cutout_heading","pricing_modal_batch_heading","welcome_features_cartoons"],collage:["welcome_collage_1","welcome_collage_2","welcome_features_graphics"],designer:["welcome_designer_1","welcome_designer_2","welcome_features_graphics"]}[e].map(function(e){return'<li data-lang="'+e+'">'+BeFunky.LanguageManager.getString(e)+"</li>"}).join(""),BeFunky.loadAfterLazyImages("#welcome_modal"),BeFunky.befunkyPopupContainerOpen("welcome_modal",{})}},{}],42:[function(e,n,t){function o(e){if(e instanceof HTMLElement&&["BUTTON","A"].includes(e.nodeName))return e;var n=document.createElement("button").setClass("dialog__button button");return r(e.text,n),"string"==typeof e.type?n.addClass("button--"+e.type):Array.isArray(e.type)&&n.addClass("button--"+e.type.join(" button--")),"function"==typeof e.onClick&&n.addEventListener("click",e.onClick),n}function r(e,n){return!!e&&("string"==typeof e?(n.setLang(e),!0):e instanceof HTMLElement?(n.appendChild(e),!0):Array.isArray(e)&&"string"==typeof e[0]?(n.setLang(e[0],e[1]),!0):(BeFunky.logError("Invalid content passed to dialog",e),!1))}BeFunky.showDialog=function(e){var n=e.onClose,t=e.heading,a=e.body,i=e.buttons,s=void 0===i?[]:i,l=e.isCritical,u=void 0!==l&&l,c=e.disableClose,d=void 0!==c&&c,p=e.size,m=void 0===p?"small":p,g=e.imageUrl,y=document.createElement("div").addClass("dialog"),f=document.createDocumentFragment();if(g){m="large",y.setClass("dialog--card");var h=document.createElement("div").addClass("dialog__image").setStyles({backgroundImage:"url('"+g+"')"});f.appendChild(h)}var v=document.createElement("div").setClass("dialog__body-container"),k=document.createElement("h4").setClass("dialog__heading"),w=document.createElement("div").addClass("dialog__body"),b=document.createElement("div").addClass("dialog__footer");if(r(t,k)&&v.appendChild(k),!r(a,w))throw new Error("dialog body required");v.appendChild(w),v.appendChild(b),s.map(o).forEach(function(e){b.appendChild(e),e.addEventListener("click",E)}),f.appendChild(v);var _=v.textContent;console.log("Opening dialog:",_.slice(0,35)+"..."),y.id="dialog_"+BeFunky.hash(_+u+d+m+g);var F=document.getElementById(y.id);F?(F.innerHTML="",F.appendChild(f)):y.appendChild(f);var B={onClose:n,destroyOnClose:!0,isCritical:u,size:m,isDialog:!0,closeOnClickOutside:!1};return d&&(Object.assign(B,{onClose:function(){BeFunky.throwError("User closed dialog which should never be closed",{content:y.textContent})},closeOnEscape:!1}),y.addClass("dialog--disable-close")),BeFunky.openModal(y,B),E;function E(){BeFunky.getModal(y.id)&&BeFunky.closeModal(y.id)}}},{}],43:[function(e,n,t){var o=function(){return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,n){var t=[],o=!0,r=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(o=(i=s.next()).done)&&(t.push(i.value),!n||t.length!==n);o=!0);}catch(e){r=!0,a=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw a}}return t}(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function r(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}BeFunky.imageLibraryModal=function(e,n){var t=n.imageSelectionHandler,a=n.isSelected,i=n.transformImageObject,s=n.extendItem,l=n.onClose,u=n.initialMode;return function(){var e=this;this.init=function(){this.initDefaultValues(),this.initTabbedLayout(),this.initImageGalleries()},this.initDefaultValues=function(){this.sections=["BeFunky","Facebook"],this._activeSection="BeFunky",this.modalMaxWidth=1280,this.galleryMaxWidth=992,this.setClass("modal image-library image-library--mode-"+u.toLowerCase().replace(/_/g,"-")),this.innerHTML='\n            <div class="panel-header"></div>\n            <div class="modal__body image-library__body">\n                <div class="image-library__left-panel">\n                    <button class="button button--list button--large button--arrow image-library__tab image-library__tab--selected image-library__tab--befunky">\n                        <string>BeFunky</string>\n                        <svg class="icon"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#global-arrow-down-icon"></use></svg>\n                    </button>\n                    <button class="button button--list button--large button--arrow image-library__tab image-library__tab--facebook">\n                        <string>Facebook</string>\n                        <svg class="icon"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#global-arrow-down-icon"></use></svg>\n                    </button>\n                    <div class="image-library__facebook-albums"></div>\n                </div>\n                <div class="image-library__right-panel">\n                    <div class="image-gallery image-library__gallery image-library__gallery--befunky"></div>\n                    <div class="image-gallery image-library__gallery image-library__gallery--facebook" style="display: none"></div>\n                </div>\n            </div>\n        ';var e=this.querySelector(".panel-header");BFN.UI.panelHeader(e,{name:"image_library",tag:"h2",modifier:"modal",closeEnabled:!0})},this.initTabbedLayout=function(){var e=this;this.befunkyTab=this.querySelector(".image-library__tab--befunky"),this.facebookTab=this.querySelector(".image-library__tab--facebook"),this.befunkyTab.addEventListener("click",function(){e.activeSection="BeFunky"}),this.facebookTab.addEventListener("click",function(){e.activeSection="Facebook"})},this.initImageGalleries=function(){this.befunkyGallery=this.querySelector(".image-library__gallery--befunky"),this.facebookGallery=this.querySelector(".image-library__gallery--facebook"),this.befunkyGallery.defaultImagesPerRow=5,this.facebookGallery.defaultImagesPerRow=5,BeFunky.imageGallery(this.befunkyGallery,{imagesPerRow:this.befunkyGallery.defaultImagesPerRow,imageSelectionHandler:t,isSelected:a,extendItem:s}),BeFunky.imageGallery(this.facebookGallery,{imagesPerRow:this.facebookGallery.defaultImagesPerRow,imageSelectionHandler:t,isSelected:a,extendItem:s}),this.befunkyGallery.emptyState={text:"login_load_images",icon:"images-icon",buttonText:"login",buttonAction:this.handleBeFunkyLoginClick},this.facebookGallery.emptyState={text:"connect_facebook_load_albums",icon:"images-icon",buttonText:"connect_facebook",buttonAction:this.handleFacebookAuthClick},this.befunkyGalleryDimensions=null,this.facebookGalleryDimensions=null,this.facebookAlbumList=this.querySelector(".image-library__facebook-albums"),this.facebookAlbum=null,this.facebookImagesPerPage=50},this.open=function(e){var n=this;BeFunky.openModal(this,{onOpen:function(){e&&e!==n.activeSection?n.activeSection=e:n.handleOpenOrTabChange()},onClose:function(){"function"==typeof l&&l()},onWindowResize:this.updateModalSize.bind(this),size:"extra-large"})},this.close=function(){BeFunky.closeModal(this)},this.selectGalleryItem=function(e){var n=document.getElementById("image_gallery_item--"+e);n&&(n.selected=!0)},this.deselectGalleryItem=function(e){var n=document.getElementById("image_gallery_item--"+e);n&&(n.selected=!1)},this.loadBefunkyImages=function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.befunkyGallery.isLoading=!0,BeFunky.ImagesService.getPhotosAndLayers(n,function(t){var o=t.data,a=t.totalPages,i=t.error;if(e.befunkyGallery.isLoading=!1,i)1===n&&"no_results"===i?(e.befunkyGallery.message="",e.befunkyGallery.emptyState={text:"no_befunky_photos",icon:"images-icon"}):(BeFunky.logError("Unable to fetch BeFunky images",i),e.befunkyGallery.message={isError:!0,text:BeFunky.failureReason(i),buttonText:"try_again",buttonAction:function(){return e.loadBefunkyImages(n)}});else if(e.befunkyGallery.message="",e.befunkyGallery.images=1===n?[].concat(r(o)):[].concat(r(e.befunkyGallery.images),r(o)),!(n>=a)){var s=function(){return e.loadBefunkyImages(n+1)};if(e.befunkyGallery.images.length<100)return e.listenForBeFunkyScroll(s);e.befunkyGallery.message={buttonText:"load_more",buttonAction:s}}})},this.loadFacebookAlbums=function(){var e=this;this.facebookGallery.images=[],this.facebookGallery.isLoading=!0,BeFunky.FacebookAuth.getPhotoAlbums().then(function(n){e.facebookGallery.isLoading=!1,"function"==typeof i&&n.forEach(function(e){n.images=e.images.map(i)}),e.facebookAlbumList.innerHTML="";var t=document.createDocumentFragment();n.forEach(function(n){var o=document.createElement("button");o.className="button button--list button--ellipsis image-library__facebook-album",o.id="facebook_album_"+n.id,o.albumID=n.id,o.textContent=n.name,o.addEventListener("click",function(){e.facebookGallery.isLoading||e.facebookAlbum===n||(e.facebookAlbum.scrollTop=e.facebookGallery.scrollTop,e.facebookAlbum.alreadyLoaded=!0,e.facebookAlbum=n,e.displayFacebookAlbum())}),t.appendChild(o)}),e.facebookAlbumList.appendChild(t),e.facebookAlbum&&n.find(function(n){return n.id===e.facebookAlbum.id})||(e.facebookAlbum=n[0]),e.displayFacebookAlbum()},function(n){e.facebookGallery.isLoading=!1,BeFunky.logError("Unable to fetch Facebook albums",n),e.facebookGallery.message={isError:!0,text:BeFunky.failureReason(n),buttonText:"try_again",buttonAction:function(){return e.loadFacebookAlbums()}}})},this.displayFacebookAlbum=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=e.facebookAlbum;if(t){var o="image-library__facebook-album--selected";e.facebookAlbumList.querySelectorAll("."+o).removeClass(o);var r=document.getElementById("facebook_album_"+t.id);r&&r.addClass(o);var a=e.facebookImagesPerPage,i=Math.ceil(t.images.length/a);if(!(n<0||n>i)){var s=n*a;e.facebookGallery.message="",e.facebookGallery.staggerLoading=!t.alreadyLoaded,e.facebookGallery.images=t.images.slice(0,s),e.facebookGallery.scrollTop=t.scrollTop||0;var l=n+1;return l<=i?e.listenForFacebookScroll(function(){return t!==e.facebookAlbum},function(){e.displayFacebookAlbum(l)}):void 0}}},this.listenForBeFunkyScroll=function(n){var t=BeFunky.throttle(function(){e.befunkyGalleryDimensions||(e.befunkyGalleryDimensions={scrollHeight:e.befunkyGallery.scrollHeight,offsetHeight:e.befunkyGallery.offsetHeight});var o=e.befunkyGalleryDimensions;o.scrollHeight-o.offsetHeight-e.befunkyGallery.scrollTop<=600&&(e.befunkyGallery.removeEventListener("scroll",t),n())},50);e.befunkyGalleryDimensions=null,requestAnimationFrame(function(){t(),e.befunkyGallery.addEventListener("scroll",t)})},this.listenForFacebookScroll=function(n,t){var o=BeFunky.throttle(function(){if(n())e.facebookGallery.removeEventListener("scroll",o);else{e.facebookGalleryDimensions||(e.facebookGalleryDimensions={scrollHeight:e.facebookGallery.scrollHeight,offsetHeight:e.facebookGallery.offsetHeight});var r=e.facebookGalleryDimensions;r.scrollHeight-r.offsetHeight-e.facebookGallery.scrollTop<=600&&(e.facebookGallery.removeEventListener("scroll",o),t())}},50);e.facebookGalleryDimensions=null,requestAnimationFrame(function(){n()||(o(),e.facebookGallery.addEventListener("scroll",o))})},this.handleOpenOrTabChange=function(){({BeFunky:function(e){function n(){return e.apply(this,arguments)}return n.toString=function(){return e.toString()},n}(function(){BeFunky.isLoggedIn()&&(e.befunkyGallery.images.length?null===BeFunky.ImagesService.imageData.totalImages&&e.loadBefunkyImages():e.befunkyGallery.isLoading||e.loadBefunkyImages())}),Facebook:function(){BeFunky.FacebookAuth.hasBeenAuthorized&&(e.facebookGallery.images.length||e.facebookGallery.isLoading||e.loadFacebookAlbums())}})[e.activeSection]()},this.handleBeFunkyLoginClick=function(){BeFunky.isLoggedIn()?e.loadBefunkyImages():BeFunky.openLoginPanel("SIGNIN",function(){return e.handleBeFunkyLoginClick()})},this.handleFacebookAuthClick=function(){e.loadFacebookAlbums()},this.updateModalSize=function(n){var t=n.availableWidth,o=e.galleryMaxWidth+(t-e.modalMaxWidth);[e.befunkyGallery,e.facebookGallery].forEach(function(n){o<e.galleryMaxWidth?n.imagesPerRow=Math.max(2,n.defaultImagesPerRow*o/e.galleryMaxWidth):n.imagesPerRow=n.defaultImagesPerRow}),e.befunkyGalleryDimensions=null,e.facebookGalleryDimensions=null},Object.defineProperty(this,"activeSection",{set:function(e){var n=this;if(e!==this._activeSections)if(this.sections.includes(e)){this._activeSection=e;var t={BeFunky:[this.befunkyTab,this.befunkyGallery],Facebook:[this.facebookTab,this.facebookGallery,this.facebookAlbumList]};Object.entries(t).forEach(function(e){var t=o(e,2),r=t[0],a=t[1],i=r===n._activeSection;a.forEach(function(e,n){if(0===n)return e.toggleClass("image-library__tab--selected",i);e.setStyles({display:i?"":"none"})})}),this.handleOpenOrTabChange()}else BeFunky.logError("Invalid Image Libraray section specified",e)},get:function(){return this._activeSection}}),this.init()}.bind(e)()}},{}],44:[function(e,n,t){var o=function(){return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,n){var t=[],o=!0,r=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(o=(i=s.next()).done)&&(t.push(i.value),!n||t.length!==n);o=!0);}catch(e){r=!0,a=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw a}}return t}(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=e("../components/forms");BeFunky.LoginPanelObj={panelType:"SIGNIN",isLoggedInNextFunction:!1,closeNextFunction:!1},BeFunky.isRenderCaptcha=!1,BeFunky.isRenderCaptchaL=!1,BeFunky.isRenderCaptchaFp=!1,BeFunky.isCaptchaResetted=!1,BeFunky.registerComeFromUpgrade=!1,BeFunky.openLoginPanel=function(e,n,t){switch(BeFunky.LoginPanelObj.panelType=e,BeFunky.LoginPanelObj.isLoggedInNextFunction=n,e){case"SIGNIN":BeFunky.befunkyPopupContainerOpen("#sign_in_modal",{addCaptcha:!!BeFunky.isRenderCaptchaL}),BeFunky.FacebookAuth.loadSDK(),BeFunky.preloadGoogleAuth();break;case"REGISTER":BeFunky.befunkyPopupContainerOpen("#register_modal",{addCaptcha:!!BeFunky.isRenderCaptcha}),BeFunky.FacebookAuth.loadSDK(),BeFunky.preloadGoogleAuth();break;case"FORGETPASS":BeFunky.befunkyPopupContainerOpen("#reset_password_modal",{addCaptcha:!!BeFunky.isRenderCaptchaFp})}BeFunky.befunkyPopupDivOpenedButStateNotChanged=!0},BeFunky.signinSubmit=function(){var e=document.querySelector("#sign_in_form"),n=function(n){return e.querySelector('[name="'+n+'"]')},t=!1;r.clearError("#sign_in_form"),e.querySelectorAll(".material-field__input").removeClass("material-field__input--invalid");var a=n(BeFunky.Params.frmNames.e),i=n(BeFunky.Params.frmNames.p),s="";if(!1===window.isEmailAddress(a.value)&&(a.addClass("material-field__input--invalid"),t=!0),i.value.length<=2&&(i.addClass("material-field__input--invalid"),t=!0),!0===BeFunky.isRenderCaptchaL&&""===(s=BeFunky.getCaptchaResponse())&&(BeFunky.executeCaptcha(BeFunky.signinSubmit),t=!0),!t){var l=getCsToken(),u="loginCheck|||"+a.value+"|||"+window.MD5(i.value)+"|||0|||"+l+"|||"+s,c={};c[BeFunky.Params.frmNames.lp]="function"==typeof window.base64_encode?window.base64_encode(u):btoa(u),c.nocache=Math.random().toString().split(".")[1];var d=BeFunky.Params.siteUrl+"oauth.php",p={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Object.entries(c).map(function(e){var n=o(e,2);return n[0]+"="+n[1]}).join("&")};BeFunky.showLoadScreen(),BeFunky.request(d,p,function(e){var n=e.error,t=e.response;BeFunky.hideLoadScreen(),BeFunky.LOGGEDIN_SUCCESS(t||n)})}},BeFunky.registerSubmit=function(){var e=document.querySelector("#register_form"),n=function(n){return e.querySelector('[name="'+n+'"]')},t=!1;r.clearError("#register_form"),e.querySelectorAll(".material-field__input").removeClass("material-field__input--invalid");var o=n(BeFunky.Params.frmNames.e),a=n(BeFunky.Params.frmNames.eag),i=n(BeFunky.Params.frmNames.p);!1===window.isEmailAddress(o.value)&&(o.addClass("material-field__input--invalid"),t=!0),a.value!==o.value&&(a.addClass("material-field__input--invalid"),t=!0),i.value.length<6&&(i.addClass("material-field__input--invalid"),t=!0);var s="";if(!0===BeFunky.isRenderCaptcha&&""===(s=BeFunky.getCaptchaResponse())&&(BeFunky.executeCaptcha(BeFunky.registerSubmit),t=!0),!t){var l={},u=getCsToken(),c="register|||"+o.value+"|||"+a.value+"|||"+i.value+"|||0|||1|||1|||"+s+"|||"+u;l[BeFunky.Params.frmNames.rp]="function"==typeof window.base64_encode?window.base64_encode(c):btoa(c),l.nocache=Math.random().toString().split(".")[1],window.postToJAJ(BeFunky.Params.siteUrl+"oauth.php",l,BeFunky.LOGGEDIN_SUCCESS,"json"),BeFunky.showLoadScreen()}},BeFunky.forgetPassSubmit=function(){var e=document.querySelector("#reset_password_modal"),n=!1;r.clearError("#reset_password_modal"),e.querySelectorAll(".material-field__input").removeClass("material-field__input--invalid");var t,a=(t=BeFunky.Params.frmNames.fpe,e.querySelector('[name="'+t+'"]'));!1===window.isEmailAddress(a.value)&&(a.addClass("material-field__input--invalid"),n=!0);var i="";if(!0===BeFunky.isRenderCaptchaFp&&""===(i=BeFunky.getCaptchaResponse())&&(BeFunky.executeCaptcha(BeFunky.forgetPassSubmit),n=!0),!n){var s=a.value,l="forgetpass|||"+s+"|||"+getCsToken()+"|||"+i,u={};u[BeFunky.Params.frmNames.fp]="function"==typeof window.base64_encode?window.base64_encode(l):btoa(l);var c=BeFunky.Params.siteUrl+"oauth.php",d={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Object.entries(u).map(function(e){var n=o(e,2);return n[0]+"="+n[1]}).join("&")};BeFunky.showLoadScreen(),BeFunky.request(c,d,function(e){var n=e.error,t=e.response;BeFunky.hideLoadScreen(),BeFunky.FORGETPASS_SUCCESS(t||n,s)})}},BeFunky.ISNOT_FLASH_LOGGEDIN=!1,BeFunky.LOGGEDIN_SUCCESS=function(e){BeFunky.hideLoadScreen(),void 0!==e.server_response&&("true"===e.server_response.isSuccess||!0===e.server_response.isSuccess)?BeFunky.onLoginSuccess(e.server_response):BeFunky.onEmailPasswordLoginFail(e.server_response||{})},BeFunky.onLoginSuccess=function(e){var n=e.current_user;BeFunky.Params.authe=!0,BeFunky.Params.isLoggedIn=!0,BeFunky.Params.loggedInUserkey=n.luk,BeFunky.Params.btknid=n.btknid,BeFunky.Params.loggedInUserNick=n.user_name,BeFunky.User.email=n.email,BeFunky.User.username=n.user_name,BeFunky.User.language=n.language,BeFunky.User.register_date=n.register_date,BeFunky.User.register_from=n.register_from,BeFunky.User.login_date=n.login_date;try{BeFunky.User.login_count=parseInt(n.login_count)}catch(e){}BeFunky.User.ppicsrc=""===n.profile_picture?BeFunky.Params.imagesUrl+"default-avatar.jpg":BeFunky.Params.profilePicturePath+n.profile_picture[1],BeFunky.Params.loggedInUserPpicsrc=""===n.profile_picture?BeFunky.Params.imagesUrl+"default-avatar.jpg":BeFunky.Params.profilePicturePath+n.profile_picture[1],BeFunky.User.galleryPrivacy=n.isGalleryPrivacy,BeFunky.User.isNewUser=!0===n.newUser||"true"===n.newUser;try{n.hasOwnProperty("isMailVerified")&&(BeFunky.User.isMailVerified=BeFunky.ConvertToBool(n.isMailVerified),BeFunky.Params.isMailVerified=BeFunky.ConvertToBool(n.isMailVerified))}catch(e){}if(BeFunky.User.SetUserData(),BeFunky.User.FlashVarsObject.user_name=BeFunky.User.username,BeFunky.User.FlashVarsObject.email=BeFunky.User.email,BeFunky.User.FlashVarsObject.pl=n.pl,BeFunky.User.FlashVarsObject.plan_type=n.plan_type,BeFunky.User.FlashVarsObject.subscr_date=n.subscr_date,BeFunky.User.FlashVarsObject.subscr_count=n.subscr_count,BeFunky.User.FlashVarsObject.subscr_amount=n.subscr_amount,BeFunky.User.FlashVarsObject.subscr_first_date=n.subscr_first_date,BeFunky.User.FlashVarsObject.subscr_ltv=n.subscr_ltv,BeFunky.User.FlashVarsObject.subscr_usr=n.subscr_usr,BeFunky.User.FlashVarsObject.subscr_tusr=n.subscr_tusr,BeFunky.User.FlashVarsObject.isGalleryPrivacy=BeFunky.User.galleryPrivacy,BeFunky.User.FlashVarsObject.high_resolution=n.high_resolution,BeFunky.User.FlashVarsObject.watermark=n.watermark,BeFunky.User.FlashVarsObject.multiple_file_upload=n.multiple_file_upload,BeFunky.User.FlashVarsObject.isOpenBefunkyGalleryShare="1",BeFunky.User.FlashVarsObject.ppicsrc=BeFunky.User.ppicsrc,!1===BeFunky.isUseHTML5)try{document.getElementById(BeFunky.Params.swfId).userValueObj(BeFunky.User.FlashVarsObject)}catch(e){BeFunky.ISNOT_FLASH_LOGGEDIN=!0}else try{BFN.BfnService.getUserData()}catch(e){BeFunky.ISNOT_FLASH_LOGGEDIN=!0}var t="1"===BeFunky.User.FlashVarsObject.pl||BeFunky.User.FlashVarsObject.pl>0;if(t){if(void 0!==BeFunky.Params.pymntscspg&&null!=BeFunky.Params.pymntscspg&&(BeFunky.Params.pymntscspg=BeFunky.Params.pymntscspg.replace("?openThanks=1",""),window.location.href=BeFunky.Params.pymntscspg),flashFreeTop=0,flashFreeRight=0,isflashFreeRight=!1,reResizeFlashHeight(),null!==document.querySelector(".login-info-area"))try{document.querySelector(".login-info-area").querySelector("#upgradeBtn").setStyles({display:"none"})}catch(e){}if(null!==document.querySelector("#header .dropdown .drop")){try{document.querySelector("#header .dropdown .drop .btn").setStyle({display:"none"})}catch(e){}try{document.querySelector("#header .dropdown .drop ul:last-of-type").setStyle({padding:"0",margin:"0","border-bottom":"0"})}catch(e){}}}var o=BeFunky.LoginPanelObj.isLoggedInNextFunction;if("function"==typeof o){o(),BeFunky.LoginPanelObj.isLoggedInNextFunction=!1;var r=BeFunky.getModal();r&&["sign_in_modal","register_modal"].includes(r.modalID)&&BeFunky.closeModal(r.modalID)}else BeFunky.User.isNewUser?BeFunky.openWelcomePanel():BeFunky.befunkyPopupContainerClose();var a=BeFunky.User.FlashVarsObject,i=a.user_name,s=a.email;BeFunky.updateSiteNavForUser(i,s,t)},BeFunky.onEmailPasswordLoginFail=function(e){var n=e.isRenderCaptcha,t=e.message;switch(BeFunky.LoginPanelObj.panelType){case"SIGNIN":n&&(BeFunky.isRenderCaptchaL=!0),BeFunky.isRenderCaptchaL&&BeFunky.renderOrResetCaptcha(document.querySelector("#sign_in_modal .captcha"));var o="INVALID_TOKEN"===t?"error_invalid_token":"error_email_password";r.displayError("#sign_in_form",o);break;case"REGISTER":BeFunky.hideLoadScreen(),n&&(BeFunky.isRenderCaptcha=!0),BeFunky.isRenderCaptcha&&BeFunky.renderOrResetCaptcha(document.querySelector("#register_modal .captcha")),"INVALID_EMAIL"===t?r.displayError("#register_form","error_email_already_in_use"):"INVALID_CAPTCHA"===t?r.displayError("#register_form","error_captcha"):"INVALID_TOKEN"===t&&r.displayError("#register_form","error_invalid_token")}"INVALID_EMAIL"!==t&&BeFunky.throwError(BeFunky.LoginPanelObj.panelType+' API error: "'+t+'"')},BeFunky.FORGETPASS_SUCCESS=function(e,n){if(void 0!==e.server_response&&("true"===e.server_response.isSuccess||!0===e.server_response.isSuccess))BeFunky.befunkyPopupContainerClose(),BeFunky.acknowledge(["reset_password_email_sent",{email:n}]);else{BeFunky.hideLoadScreen();var t=e.server_response,o=t.isRenderCaptcha,a=t.message;o&&(BeFunky.isRenderCaptchaFp=!0),BeFunky.isRenderCaptchaFp&&BeFunky.renderOrResetCaptcha(document.querySelector("#reset_password_modal .captcha")),"INVALID_TOKEN"===a?r.displayError("#reset_password_form","error_invalid_token"):"INVALID_CAPTCHA"===a?r.displayError("#reset_password_form","error_captcha"):r.displayError("#reset_password_form","error_email_not_registered")}},BeFunky.onDocumentReady(function(){try{!function(){function e(){BeFunky.showLoadScreen(),BeFunky.loginWithGoogle().catch(function(e){BeFunky.logError("Google login failed",e)}).then(function(){BeFunky.hideLoadScreen()})}function n(){BeFunky.showLoadScreen(),BeFunky.FacebookAuth.loginWithFacebook().catch(function(e){BeFunky.logError("Facebook login failed",e)}).then(function(){BeFunky.hideLoadScreen()})}document.getElementById("sign_in_modal_google").addEventListener("click",e),document.getElementById("sign_in_modal_facebook").addEventListener("click",n),document.getElementById("sign_in_form").addEventListener("submit",function(e){e.preventDefault(),BeFunky.signinSubmit()}),document.getElementById("sign_in_modal_create_account").addEventListener("click",function(e){e.preventDefault(),BeFunky.openLoginPanel("REGISTER",BeFunky.LoginPanelObj.isLoggedInNextFunction)}),document.getElementById("sign_in_modal_forgot_password").addEventListener("click",function(e){e.preventDefault(),BeFunky.openLoginPanel("FORGETPASS",BeFunky.LoginPanelObj.isLoggedInNextFunction)}),document.getElementById("register_modal_google").addEventListener("click",e),document.getElementById("register_modal_facebook").addEventListener("click",n),document.getElementById("register_form").addEventListener("submit",function(e){e.preventDefault(),BeFunky.registerSubmit()}),document.getElementById("register_modal_has_account").addEventListener("click",function(e){e.preventDefault(),BeFunky.openLoginPanel("SIGNIN",BeFunky.LoginPanelObj.isLoggedInNextFunction)}),document.getElementById("reset_password_form").addEventListener("submit",function(e){e.preventDefault(),BeFunky.forgetPassSubmit()}),document.getElementById("reset_password_modal_sign_in").addEventListener("click",function(e){e.preventDefault(),BeFunky.openLoginPanel("SIGNIN",BeFunky.LoginPanelObj.isLoggedInNextFunction)})}()}catch(e){BeFunky.logError("Unable to initialize sign-in, register & reset-password modals")}})},{"../components/forms":3}],45:[function(e,n,t){BeFunky.AJAX_ERROR=function(e,n,t){1==BeFunky.befunkyPopupDivOpened&&BeFunky.acknowledge("You Broke The Internet! Or Not. Try That Again To Find Out.")}},{}],46:[function(e,n,t){function o(){BeFunky.openModal("statement_panel_modal",{addSiteClass:!0,addCloseButton:!0,size:"small"})}BeFunky.currentInvoiceData=null,BeFunky.openStatementPanel=function(){if(null===BeFunky.currentInvoiceData){var e="mode=getinvoices&CSRFtoken="+window.getCsToken(),n=BeFunky.Params.siteUrl+"processing.php",t={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:e,responseType:"json"};BeFunky.showLoadScreen(),BeFunky.request(n,t,function(e){var n=e.error,t=e.response;if(BeFunky.hideLoadScreen(),n)return BeFunky.logError("Unable to fetch invoices",n);BeFunky.statementSuccess(t)})}else o()},BeFunky.statementSuccess=function(e){BeFunky.currentInvoiceData=e;var n=document.getElementById("statement_panel_modal");if(null!==n){var t=n.querySelector(".statement-panel__invoice-list"),r="";e&&e.res&&e.res.length>0?(e.res.forEach(function(e){var n='<span class="title">'+BeFunky.timeConverter(e.date)+"</span>";n+='<a class="button button--link" href="'+BeFunky.Params.siteUrl+"my-account?invoice="+e.id+"|"+e.charge+"|"+e.date+"|"+e.period_start+"|"+e.period_end+'" target="_blank">VIEW</a>',r+='<li class="statement-panel__list-item">'+n+"</li>"}),t.setLang(r)):t.setLang("You have no billing history yet."),o()}}},{}],47:[function(e,n,t){void 0===window.enableTeasers&&(window.enableTeasers=!0);var o={_default:{featureName:"this_feature",images:["global.jpg"]},artsy:{featureName:"Artsy",text:"teaser_artsy",images:["artsy-before.jpg","artsy-after.jpg"]},background:{featureName:"background",text:"teaser_background",images:["background-before.jpg","background-after.jpg"]},batch_processing:{featureName:"batch_processing",text:"teaser_batch_processing",images:["batch-processing.jpg"]},clarity:{featureName:"clarity",text:"teaser_clarity",images:["clarity-before.jpg","clarity-after.jpg"]},clone:{featureName:"clone",text:"teaser_clone",images:["clone-before.jpg","clone-after.jpg"]},collage_wizard:{featureName:"collage_wizard",text:"teaser_collage_wizard",images:["collage-wizard.jpg"]},cutout:{featureName:"cutout",text:"teaser_cutout",images:["cutout-before.jpg","cutout-after.jpg"]},designer_templates:{skipTeaser:!0},enhance_dlx:{featureName:"Enhance DLX",text:"teaser_enhance_dlx",images:["enhance-DLX-before.jpg","enhance-DLX-after.jpg"]},fill_light:{featureName:"fill_light",text:"teaser_fill_light",images:["fill-light-before.jpg","fill-light-after.jpg"]},funky_focus:{featureName:"funky_focus",text:"teaser_funky_focus",images:["funky-focus-before.jpg","funky-focus-after.jpg"]},glow:{featureName:"glow",text:"teaser_glow",images:["glow-before.jpg","glow-after.jpg"]},lens_flares:{featureName:"lens_flare",text:"teaser_lens_flares",images:["lens-flare-before.jpg","lens-flare-after.jpg"]},photo_effects:{featureName:"photo_effects",text:"teaser_photo_effects",images:["photo-effects.jpg"]},replace_color:{featureName:"replace_color",text:"teaser_replace_color",images:["replace-color-before.jpg","replace-color-after.jpg"]},reshape:{featureName:"reshape",text:"teaser_reshape",images:["reshape-before.jpg","reshape-after.jpg"]},save_editor:{headingText:"teaser_save_editor_heading",text:"teaser_save_editor",images:["global.jpg"]},save_collage:{headingText:"teaser_save_collage_heading",text:"teaser_save_collage",images:["collage-wizard.jpg"]},save_designer:{headingText:"pricing_modal_templates_heading",text:"teaser_save_designer",images:["designer-templates.jpg"]},top_nav_bar:{skipTeaser:!0},touchup:{featureName:"touch_up_tools_titlecase",text:"teaser_touchup",images:["touch-up-before.jpg","touch-up-after.jpg"]},vibrance:{featureName:"vibrance",text:"teaser_vibrance",images:["vibrance-before.jpg","vibrance-after.jpg"]},vignette:{featureName:"vignette",text:"teaser_vignette",images:["vignette-before.jpg","vignette-after.jpg"]}},r=void 0,a=BeFunky.once(function(){document.getElementById("teaser_modal_upgrade").addEventListener("click",function(){BeFunky.openUpgradePanel(r,!0)}),document.getElementById("teaser_modal_sign_in").addEventListener("click",function(e){e.preventDefault(),BeFunky.openLoginPanel("SIGNIN",function(){BeFunky.openPaymentPanel()})})});function i(e,n,t){var o=n.querySelector(".modal-card__image");if(!t){var r=document.createElement("div").setStyles({"background-image":"url("+e+")"}).setClass("modal-card__fade-in-image");return o.appendChild(r),r}o.setStyles({"background-image":"url("+e+")"}),o.innerHTML=""}function s(e){return new Promise(function(n,t){var o=new Image;o.onload=n,o.onerror=t,o.src=e})}BeFunky.openTeaserModal=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"_default";o.hasOwnProperty(e)||(BeFunky.logError('Invalid teaser type "'+e+'" specified'),e="_default"),r="batch_processing"===e?"batch":function(){try{return BFN.AppModel.sectionID}catch(e){BeFunky.logError("Unable to get current app section",e)}return""}(),window.enableTeasers&&!o[e].skipTeaser?(a(),function(e){var n=document.getElementById("teaser_modal");BeFunky.isLoggedIn()&&n.querySelector(".modal-card__sign-in").setStyles({display:"none"});var t=o[e],r=t.headingText,a=t.featureName,l=t.images,u=t.text;l=l.map(function(e){return BeFunky.Params.imagesUrl+"teasers/"+e}),function(e,n,t){var o=t.querySelector("h2");e?o.setLang(e):n?o.setLang("teaser_modal_heading",{this_feature:function(){return BeFunky.LanguageManager.getString(n)}}):BeFunky.throwError("No heading specified for teaser")}(r,a,n),c=u,document.getElementById("teaser_modal_body").setLang(c||"teaser_default"),i(l[0],n,!0);var c;var d=!1;if(document.getElementById("teaser_modal").onModalClose=function(){d=!0},!l[1])return;function p(e){!function n(){requestAnimationFrame(function(){d||(e.toggleClass("modal-card__fade-in-image--visible"),setTimeout(n,4e3))})}()}s(l[0]).then(function(){if(!d){var e=Date.now();s(l[1]).then(function(){if(!d){var t=i(l[1],n,!1),o=Date.now(),r=2e3-(o-e);r>0?setTimeout(function(){p(t)},r):p(t)}})}}).catch(function(e){BeFunky.logError("Unable to load teaser image(s)",e)})}(e),BeFunky.befunkyPopupContainerOpen("#teaser_modal",{})):BeFunky.openUpgradePanel(r,!0)}},{}],48:[function(e,n,t){var o=function(){return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,n){var t=[],o=!0,r=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(o=(i=s.next()).done)&&(t.push(i.value),!n||t.length!==n);o=!0);}catch(e){r=!0,a=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw a}}return t}(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};BeFunky.openUpgradePanel=function(e,n){if(n||(BeFunky.LoginPanelObj.closeNextFunction=openFlash),!BeFunky.isPlus()){s();var t={batch:"pricing_modal_card_batch_processing",collage:"pricing_modal_card_collage_wizard",designer:"pricing_modal_card_designer"},o=t[e]?document.getElementById(t[e]):null;o&&o.addClass("pricing-modal__card--first"),document.getElementById("pricing_modal").toggleClass("pricing-modal--flash",!BeFunky.isUseHTML5),BeFunky.befunkyPopupContainerOpen("#pricing_modal",{})}},BeFunky.openUpgradeToYearlyPanel=function(){BeFunky.isPlus()&&BeFunky.promptUserToUpgradeToYearly(window.openFlash)},BeFunky.promptUserToUpgradeToYearly=function(e){BeFunky.confirm("upgrade_yearly_modal_body",{heading:"upgrade_yearly_modal_heading",confirmText:"upgrade_yearly_modal_confirm",cancelText:"upgrade_yearly_modal_cancel",imageUrl:window.globalImagesPath+"site/switch-yearly.jpg",onConfirm:function(){BeFunky.upgradeToYearlyPayNow()},onCancel:e})},BeFunky.upgradeToYearlyClose=function(){return BeFunky.befunkyPopupContainerClose(),window.bf_eventTrack("PROMOTION","UPGRADE_YEARLY_APP","NOT_NOW"),!1},BeFunky.upgradeToYearlyPayNow=function(){window.bf_eventTrack("PROMOTION","UPGRADE_YEARLY_APP","PAY_NOW");var e="mode=upgrade-to-yearly&CSRFtoken="+window.getCsToken(),n=BeFunky.Params.siteUrl+"processing.php",t={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:e,responseType:"json"};BeFunky.request(n,t,function(e){var n=e.error,t=e.response;if(t.hasOwnProperty("res")&&"0"===t.res)return window.bf_eventTrack("PROMOTION","UPGRADE_YEARLY_APP","UPGRADE_FAILURE"),void BeFunky.logError("Unable to process payment upgrade to Yearly",n);t.hasOwnProperty("res")&&0!==t.res&&"0"!==t.res&&(window.bf_eventTrack("PROMOTION","UPGRADE_YEARLY_APP","UPGRADE_SUCCESS"),window.location.reload())})},BeFunky.selectedPackageName=null,BeFunky.openPaymentPanel=function(e,n){if(["charge","update","update_from_payflow"].includes(n)||(n="charge"),["monthly","yearly"].includes(e)||(e="yearly"),BeFunky.isPlus()&&"charge"===n){var t=BeFunky.getModal(),o=t?t.modalElement.id:void 0;["sign_in_modal","register_modal"].includes(o)&&BeFunky.closeModal(o)}else{if(BeFunky.selectedPackageName=e,!BeFunky.isLoggedIn())return BeFunky.registerComeFromUpgrade=!0,BeFunky.openLoginPanel("REGISTER",function(){BeFunky.openPaymentPanel(BeFunky.selectedPackageName,n)}),!1;if("object"===r(window.stripe)){i(),BeFunky.befunkyPopupContainerOpen("#payment_modal",{addDigiCert:!0});var a,s=document.querySelector("#payment_modal"),l=BeFunky.User.email||BeFunky.User.FlashVarsObject.email;if(l){var u=(a=BeFunky.Params.frmNames.cce,s.querySelector('[name="'+a+'"]'));u&&(u.value=l)}s.selectedPlan=BeFunky.selectedPackageName,s.selectedMode=n}else BeFunky.throwError("Unable to initialize payment modal b/c window.stripe is unavailable")}};var a=!1,i=BeFunky.once(function(){var n=document.getElementById("payment_modal"),t=function(e){return n.querySelector('[name="'+e+'"]')},r=n.querySelector("h2"),i=n.querySelector('[type="submit"]'),s=document.getElementById("payment_modal_summary"),u=t("period"),c=t("mode"),d={yearly:{radioButton:document.getElementById("payment_modal_plan_yearly"),amount:void 0!==BeFunky.Params.priceannual?BeFunky.Params.priceannual:59.88,summaryText:"billing_summary_annual"},monthly:{radioButton:document.getElementById("payment_modal_plan_monthly"),amount:void 0!==BeFunky.Params.pricemonthly?BeFunky.Params.pricemonthly:6.99,summaryText:"billing_summary_monthly"}},p=d.yearly.radioButton.checked?"yearly":"monthly";Object.defineProperty(n,"selectedPlan",{set:function(e){if(!d.hasOwnProperty(e))throw new Error("Invalid payment plan: "+e+" "+BeFunky.getType(e));d[p=e].radioButton.checked=!0,u.value=e,r.setLang("payment_modal_heading"),i.setLang("submit_payment"),s.setLang(d[p].summaryText,{amount:"<strong>$"+d[p].amount+"</strong>",subscription_policy:function(){return'<a href="'+BeFunky.Params.siteUrl+'terms/?cmfrm=1#renewals" target="_blank">'+BeFunky.LanguageManager.getString("subscription_policy")+"</a>"}})},get:function(){return p}}),Object.entries(d).forEach(function(e){var t=o(e,2),r=t[0];t[1].radioButton.addEventListener("change",function(){n.selectedPlan=r})});var m=["charge","update","update_from_payflow"],g="charge";Object.defineProperty(n,"selectedMode",{set:function(e){if(!m.includes(e))throw new Error("Invalid payment mode: "+e+" "+BeFunky.getType(e));g=e,c.value=g;var t=g.startsWith("update");n.toggleClass("payment-modal--update-mode",t),t&&(r.setLang("payment_modal_heading_update"),i.setLang("update"))},get:function(){return g}});var y=t("cc-holdername"),f=document.getElementById("payment_modal_card_number"),h=document.getElementById("payment_modal_card_expiry"),v=document.getElementById("payment_modal_card_cvc"),k=document.getElementById("payment_modal_card_type"),w=["zh","da","nl","en","fi","fr","de","it","ja","no","es","sv"].includes(BeFunky.LanguageManager.language)?BeFunky.LanguageManager.language:"auto",b=window.stripe.elements({locale:w,fonts:[{cssSrc:"https://fonts.googleapis.com/css?family=Poppins"}]}),_={base:{color:"#1e2024",fontWeight:400,fontFamily:"Poppins, system-ui, sans-serif",fontSize:"16px",fontSmoothing:"antialiased",lineHeight:"24px"},invalid:{color:"#1e2024"}},F={focus:"focused",empty:"empty",invalid:"invalid"},B=b.create("cardNumber",{style:_,classes:F,placeholder:""});B.mount(f);var E=b.create("cardExpiry",{style:_,classes:F,placeholder:""});E.mount(h);var C=b.create("cardCvc",{style:_,classes:F,placeholder:""});C.mount(v),B.on("change",function(e){var n=e.brand;n&&(k.innerHTML="unknown"===n?"":BeFunky.getSvgHtml("cc-"+n))});var S,I,L,P=e("../components/forms"),A=function(e,n){switch(e){case"name":y.addClass("material-field__input--invalid").nextElementSibling.textContent=n;break;case"number":f.addClass("invalid").nextElementSibling.textContent=n;break;case"expiry":h.addClass("invalid").nextElementSibling.textContent=n;break;case"cvc":v.addClass("invalid").nextElementSibling.textContent=n;break;case"form":P.displayError("#payment_modal",n);break;default:BeFunky.throwError("Invalid field name: "+e)}};S=y,I=function(){l(y)?y.removeClass("material-field__input--invalid"):A("name","Please enter a name")},L=BeFunky.debounce(I,100),S.addEventListener("change",L),S.addEventListener("keyup",L),S.addEventListener("blur",L),B.on("change",function(e){var n=e.error;n&&A("number",n.message)}),E.on("change",function(e){var n=e.error;n&&A("expiry",n.message)}),C.on("change",function(e){var n=e.error;n&&A("cvc",n.message)});var T=function(){y.value="",B.clear(),E.clear(),C.clear()};n.onModalClose=T,document.getElementById("payment_modal_form").addEventListener("submit",function(e){e.preventDefault(),P.clearError("#payment_modal"),l(y)&&function(e){var n=e.cardHolderName,t=e.stripeElement,r=e.email,i=e.mode,s=e.period,l=e.displayError,u=e.clearInputs;function c(e,n,t){switch(BeFunky.hideLoadScreen(),a=!1,BeFunky.logError("A payment error occurred",JSON.stringify({code:e,message:n})),e){case"card_declined":case"invalid_number":case"incorrect_number":case"incomplete_number":case"expired_card":l("number",n);break;case"incomplete_expiry":case"invalid_expiry_month":case"invalid_expiry_year":case"invalid_expiry_year_past":l("expiry",n);break;case"incomplete_cvc":case"invalid_cvc":case"incorrect_cvc":l("cvc",n);break;case"processing_error":l("form","error_processing_payment");break;default:"string"==typeof n?l("form",n):(l("form","error_invalid_response"),t&&BeFunky.logError("Unable to get error info from response: "+JSON.stringify(t)),BeFunky.throwError("Unknown payment error shown to user",e,n,t))}}a?BeFunky.logError("Already processing payment"):(BeFunky.showLoadScreen({isCancellable:!1}),a=!0,window.stripe.createToken(t,{name:n}).then(function(e){var t=e.error,l=e.token;if(t)c(t.code,t.message);else if(l&&l.id){var d="0";try{d=growsumo.data.partner_key&&growsumo.data.partner_key.length>0?growsumo.data.partner_key:"0"}catch(e){}if("0"!==d)try{growsumo.data.email=r,growsumo.data.customer_key=r,growsumo.createSignup()}catch(e){}var p=function(e){a=!1;var n=void 0;try{n=JSON.parse(e)}catch(n){return BeFunky.throwError("Invalid response from BeFunky sp_process API",{response:e}),void c(void 0,"Invalid response from BeFunky API")}if(n.hasOwnProperty("error"))return"user_is_plus"===n.error.code?(BeFunky.throwError("Already-plus user filled out payment form"),c(n.error.code,"You are already a BeFunky Plus user")):c(n.error.code,n.error.message,n);try{bf_eventTrack("CONVERSION",s.toUpperCase(),"CREDITCARD");try{bf_fbEventTrack("Purchase",{content_type:s.toUpperCase()})}catch(e){}BeFunky.User.FlashVarsObject.subscr_date&&"charge"===i&&bf_eventTrack("RESUBSCRIBE",s.toUpperCase(),"CREDITCARD")}catch(e){BeFunky.logError("Unable to track payment conversion",e)}BeFunky.User.FlashVarsObject.pl="1",BeFunky.Params.isLoggedIn=!0,BeFunky.User.FlashVarsObject.subscr_usr=1,BeFunky.User.FlashVarsObject.subscr_tusr=BeFunky.Params.SpTm&&BeFunky.Params.SpTm>0?1:0,n.hasOwnProperty("res")&&n.res.hasOwnProperty("plan_type")&&n.res.plan_type.length>0?BeFunky.User.FlashVarsObject.plan_type=n.res.plan_type:s&&(BeFunky.User.FlashVarsObject.plan_type="yearly"==s?1:0);try{n.hasOwnProperty("res")&&n.res.hasOwnProperty("subscr_amount")&&n.res.subscr_amount.length>0?BeFunky.User.FlashVarsObject.subscr_amount=n.res.subscr_amount:s&&(BeFunky.User.FlashVarsObject.subscr_amount="yearly"==s?BeFunky.Params.priceannual:BeFunky.Params.pricemonthly)}catch(e){}try{if(n.hasOwnProperty("res")&&n.res.hasOwnProperty("subscr_date")&&n.res.subscr_date.length>0)BeFunky.User.FlashVarsObject.subscr_date=n.res.subscr_date;else if(void 0!==window.bfn_mp){var t=window.bfn_mp.getISODate();BeFunky.User.FlashVarsObject.subscr_date=t}}catch(e){}if(BeFunky.isUseHTML5)try{BFN.BfnService.getUserData()}catch(e){}else try{document.getElementById(BeFunky.Params.swfId).userValueObj(BeFunky.User.FlashVarsObject)}catch(e){}try{flashFreeTop=0,flashFreeRight=0,isflashFreeRight=!1,reResizeFlashHeight()}catch(e){}if("update"!==i)if(void 0!==window.bfn_mp)if(void 0!==window.mixpanel)try{window.bfn_mp.track("subscription_started"),0==window.bfn_mp.identifier&&(BeFunky.logError("Mixpanel could not set identifier "+BeFunky.Params.isLoggedIn+", "+BeFunky.User.FlashVarsObject.pl+", "+BeFunky.User.FlashVarsObject.subscr_usr+", "+BeFunky.User.FlashVarsObject.plan_type),BeFunky.throwError("Mixpanel identifier is not set"))}catch(e){BeFunky.logError("Unable to track subscription_started in Mixpanel"),BeFunky.throwError(e)}else BeFunky.logError("mixpanel is undefined"),BeFunky.throwError("mixpanel is undefined");else BeFunky.logError("bfn_mp is undefined"),BeFunky.throwError("bfn_mp is undefined");setTimeout(function(){if(BeFunky.sessionRoutes[0].startsWith("/my-account"))location.href="charge"===i?BeFunky.Params.siteUrlSecured+"my-account/?openThanks=1":BeFunky.Params.siteUrlSecured+"my-account/";else{BeFunky.hideLoadScreen(),BeFunky.openThankYouPanel(!1);var e=document.querySelector("#header .dropdown .drop");if(null!==e){var n=e.querySelector(".btn");n.parentNode.removeChild(n),e.querySelector("ul:last-of-type").setStyles({padding:"0",margin:"0","border-bottom":"0"})}var t=BeFunky.User.FlashVarsObject,o=t.user_name,r=t.email;BeFunky.updateSiteNavForUser(o,r,!0),u()}},444)};if(BeFunky.Params.IS_LC)return p("{}");var m=void 0;if("charge"===i||"update"===i)m={mode:i,stripeEmail:encodeURIComponent(r),stripeToken:l.id,holdername:n,isGrowsumo:d,sptm:BeFunky.Params.SpTm&&BeFunky.Params.SpTm>0?"1":"0",handlerType:"subscription_purchase",period:"yearly"===s?BeFunky.Params.strp_pck_yearly_nm:BeFunky.Params.strp_pck_monthly_nm};else{if("update_from_payflow"!==i)return BeFunky.throwError("Invalid payment mode: "+i);m={mode:i,stripeEmail:encodeURIComponent(r),stripeToken:l.id,nextBillingDate:"monthly"===s?BeFunky.Params.nextBillingDateMonthly:BeFunky.Params.nextBillingDateAnnual,period:s,CSRFToken:getCsToken()}}var g=BeFunky.Params.siteUrl+"stripe/sp_process.php",y={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Object.entries(m).map(function(e){var n=o(e,2),t=n[0],r=n[1];return t+"="+r}).join("&"),responseType:"text"};BeFunky.request(g,y,function(e){var n=e.error,t=e.response;if(n)return BeFunky.logError("Unable to connect to BeFunky payment API",n),c(void 0,"BeFunky API request failed");p(t)})}else c(void 0,"Missing Stripe token")}).catch(function(e){BeFunky.logError("An unexpected payment-related error occurred",e),BeFunky.throwError(e),c(void 0,"Unknown error")}))}({cardHolderName:y.value,stripeElement:B,email:t(BeFunky.Params.frmNames.cce).value,mode:c.value,period:u.value,displayError:A,clearInputs:T})})}),s=BeFunky.once(function(){var e=document.getElementById("pricing_modal");document.getElementById("pricing_modal_upgrade").addEventListener("click",function(){var e=document.getElementById("pricing_modal_plan_yearly").checked?"yearly":"monthly";BeFunky.openPaymentPanel(e)});["batch_processing_video","collage_wizard_video","lens_flare_video"].forEach(function(e){document.getElementById(e).addEventListener("click",function(n){n.preventDefault(),BeFunky.openVimeoModal(e)})});[{id:"pricing_modal_cutout_body",links:{cutout_tool:"https://blog.befunky.com/cutout-tool-2/",clone_tool:"https://blog.befunky.com/clone/"}},{id:"pricing_modal_effects_body",links:{photo_effects:"https://blog.befunky.com/photo-effects/"}},{id:"pricing_modal_artsy_body",links:{artsy_effects:"https://blog.befunky.com/artsy-effects/"}},{id:"pricing_modal_batch_body",links:{batch_processing:"https://blog.befunky.com/batch-processing-photos/"}},{id:"pricing_modal_enhance_body",links:{fill_light:"https://blog.befunky.com/fill-light/",vibrance:"https://blog.befunky.com/vibrance-tool/",clarity:"https://blog.befunky.com/clarity-tool/","Enhance DLX":"https://blog.befunky.com/photo-enhancer/"}},{id:"pricing_modal_templates_body",links:{templates_link:"https://blog.befunky.com/graphic-design-templates/"}},{id:"pricing_modal_background_body",links:{background:"https://blog.befunky.com/transparent-background/",cutout:"https://blog.befunky.com/cutout-tool-2/",replace_color:"https://blog.befunky.com/replace-color-tool/"}},{id:"pricing_modal_touchup_body",links:{touch_up_tools:"https://blog.befunky.com/retouch-photos/"}},{id:"pricing_modal_flares_body",links:{lens_flares:"https://blog.befunky.com/lens-flare-effects/",glow:"https://blog.befunky.com/glow-tool/"}},{id:"pricing_modal_focus_body",links:{vignette:"https://blog.befunky.com/vignette/",funky_focus:"https://blog.befunky.com/funky-focus/"}},{id:"pricing_modal_reshape_body",links:{reshape_tool:"https://blog.befunky.com/reshape-tool/"}}].forEach(function(n){var t=n.id,r=n.links,a={};Object.entries(r).forEach(function(e){var n=o(e,2),t=n[0],r=n[1];a[t]=function(){return'<a href="'+r+'" target="_blank">'+BeFunky.LanguageManager.getString(t)+"</a>"}});var i=e.querySelector('[data-lang="'+t+'"]');if(!i)return BeFunky.logError("Unable to find pricing modal element with translation ID =",t);BeFunky.LanguageManager.registerElement(i,a)}),e.onModalClose=function(){var n=e.querySelector(".pricing-modal__card--first");n&&n.removeClass("pricing-modal__card--first")}});function l(e){var n=e.value.replace(/[\d@~`#$%^&*()\\\/<>!¡™£¢∞§¶•ªº≠+=:;…¨"{}[\]|?]/g,"");return e.value=n,n.length>=3}},{"../components/forms":3}],49:[function(e,n,t){var o=function(){return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,n){var t=[],o=!0,r=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(o=(i=s.next()).done)&&(t.push(i.value),!n||t.length!==n);o=!0);}catch(e){r=!0,a=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw a}}return t}(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r="user_photo_modal",a={},i=null,s=null,l=!1,u=[],c=void 0,d=void 0,p=void 0,m=void 0,g=void 0,y=void 0;function f(e,n,t){if(e){var l=document.querySelector(".user-photo__image-box");l.innerHTML="",a.hasOwnProperty(e.imageURL)?l.appendChild(a[e.imageURL]):l.appendChild(h(e)),p.textContent=e.title;var c=p.innerHTML.replace(/#(\w+)/gi,'<a href="'+window.siteUrl+'explore/photos/$1/">#$1</a>');if(p.innerHTML=c||"Untitled",m.innerHTML='by <a href="'+window.siteUrl+"gallery/"+e.nick+'/">'+e.nick+"</a>",n){var f=n.indexOf(e);i=n[f-1],s=n[f+1];var v=o(BeFunky.getModal(r).arrowButtons,2),k=v[0],w=v[1];k.disabled=!i,w.disabled=!s,requestIdleCallback(function(){i&&h(i),s&&h(s)})}}else d.src="",p.innerHTML="",m.innerHTML="",Object.keys(a).forEach(function(e){delete a[e]});if(g.toggleClass("user-photo__report-abuse--hidden",!t),e){y=e.id.replace("befunky_photo_","");var b=u.includes(y);g.disabled=b,g.setLang(b?"abuse_reported":"report_abuse")}}function h(e){var n=new Image;return n.src=e.imageURL,n.setClass("image-box__image explore-modal__image"),n.id="explore-image",a[n.src]=n,n}function v(e){return"explore/gallery/"+e.id.split("_").pop()+"/"}BeFunky.onDocumentReady(function(){(c=document.getElementById(r))&&(d=c.querySelector(".user-photo__image"),p=c.querySelector(".user-photo__title"),m=c.querySelector(".user-photo__author"),(g=c.querySelector(".user-photo__report-abuse")).addEventListener("click",function(){if(!(y=y||BeFunky.Params&&BeFunky.Params.galleryImageId))return BeFunky.throwError("reportAbuseImageID not found");var e=BeFunky.getModal(r);e&&e.isVisible&&BeFunky.closeModal(r),function e(n){if(!BeFunky.isLoggedIn())return BeFunky.openLoginPanel("SIGNIN",function(){BeFunky.befunkyPopupContainerClose(),e(n)});var t=null!=BeFunky.User.isMailVerified?BeFunky.User.isMailVerified:BeFunky.Params.isMailVerified;if(!t)return BeFunky.confirm("please_verify_email",{onConfirm:BeFunky.sendVerificationEmail,confirmText:"send_verification_email"});var r=document.createElement("div");r.appendChild(document.createElement("p").setLang("report_abuse_prompt_1"));r.appendChild(document.createElement("p").setLang("report_abuse_prompt_2"));BeFunky.confirm(r,{heading:"report_abuse",confirmText:"report",onConfirm:function(){var e={mode:"reportAbuse",img_key:n,CSRFtoken:window.getCsToken()},t={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Object.entries(e).map(function(e){var n=o(e,2),t=n[0],r=n[1];return t+"="+r}).join("&")};BeFunky.showLoadScreen(),BeFunky.request(window.siteUrl+"images.php",t,function(e){var t=e.error,o=e.response;BeFunky.hideLoadScreen(),t||o.error?BeFunky.throwError("Unable to Report Abuse on image",t||o.error,n):u.push(n),BeFunky.acknowledge("report_abuse_thank_you",{heading:"report_abuse_sorry"})})}})}(y)}))}),BeFunky.openUserPhotoModal=function(e,n,t,o){if(!c)return BeFunky.throwError("User Photo Modal not available");BeFunky.openModal(c,{onOpen:function(){l=!0,f(e,n,o),BeFunky.pushRoute(v(e))},onClose:function(){l=!1,f(),BeFunky.pushRoute(t)},addSiteClass:!0,addCloseButton:!0,size:"large",onArrowClick:function(e){var t="left"===e?i:s;t&&(f(t,n,o),BeFunky.pushRoute(v(t)))}})},BeFunky.closeUserPhotoModal=function(){l&&BeFunky.closeModal(r)}},{}],50:[function(e,n,t){var o={batch_processing_video:"https://player.vimeo.com/video/293033309",collage_wizard_video:"https://player.vimeo.com/video/159379542",lens_flare_video:"https://player.vimeo.com/video/168091282?byline=0"};BeFunky.openVimeoModal=function(e){var n=o[e];if(!n)return BeFunky.throwError("Invalid video ID",{videoID:e});var t=document.getElementById("vimeo_modal");t.innerHTML=function(e){return'\n    <div style="padding: 56.25% 0 0 0; position: relative;">\n        <iframe src="'+e+'" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>\n    </div>\n    <script src="https://player.vimeo.com/api/player.js"><\/script>\n'}(n),BeFunky.openModal(t,{onClose:function(){t.innerHTML=""},size:"large"})}},{}],51:[function(e,n,t){function o(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}function r(){var e=this;this.init=function(){this.initPublicAPI(),this.initSearchForm(),this.initGallery()},this.initPublicAPI=function(){var e=this;BeFunky.explorePage.isAvailable=!0,BeFunky.explorePage.search=function(n){e.searchInput.value=n,e.loadSearchResults(n,1)},BeFunky.explorePage.openImage=function(n){if(!n)return e.closeModal();var t=e.gallery.images.find(function(e){return e.id==="befunky_photo_"+n});t?e.openModal(t):BeFunky.logError("Unable to open Explore image",{imageID:n})}},this.initSearchForm=function(){var e=this;this.searchForm=this.querySelector(".search-box"),this.searchInput=this.querySelector(".search-box__input"),this.clearButton=this.querySelector(".search-box__clear"),this.searchButton=this.querySelector(".search-box__submit"),this.previousSearchQuery=null,this.previousSearchPage=-1,this.clearButton.addEventListener("click",function(){return e.searchInput.focus()}),this.searchForm.addEventListener("submit",this.handleSearch)},this.initGallery=function(){var e=this;this.gallery=this.querySelector(".explore__gallery");BeFunky.imageGallery(this.gallery,{imagesPerRow:this.getImagesPerRow(),imageSelectionHandler:function(n){return e.openModal(n),!1},gutterWidth:16}),this.gallery.addClass("image-gallery--use-borders"),window.addEventListener("resize",BeFunky.debounce(function(){return e.handleGalleryResize()},300))},this.loadSearchResults=function(e){var n=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.previousSearchQuery===e&&t<=this.previousSearchPage||(console.log("Searching...",{searchQuery:e,page:t}),this.previousSearchQuery=e,this.previousSearchPage=t,BeFunky.pushRoute(e?"explore/photos/"+e+"/":"explore/"),1===t&&(this.gallery.images=[],this.gallery.scrollTop=0),this.gallery.message="",this.gallery.isLoading=!0,this.toggleInteractivity(!1),function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=arguments[2],o=new FormData;o.append("mode","explore"),o.append("start",100*(n-1)),o.append("end",100),e&&e.length>0&&o.append("keyword",e);o.append("CSRFtoken",window.getCsToken()||"");var r=window.siteUrl+"images.php",a={method:"POST",withCredentials:!0,body:o};BeFunky.request(r,a,function(e){var n=e.error,o=e.response;if(n)return t({error:n});if(o.error)return t({error:o.error});if(!Array.isArray(o.images))return console.log("Server response:",o),t({error:"invalid_response"});if(!o.images.length)return t({error:"no_results"});var r=o.images.map(function(e){return{id:"befunky_photo_"+e.id,thumbWidth:200,thumbHeight:200,thumbURL:e.thumb_url,imageURL:e.url,nick:e.nick,title:e.title,dateCreated:e.dateCreated}});return t({images:r})})}(e,t,function(r){var a=r.error,i=r.images;if(e===n.previousSearchQuery){if(n.gallery.isLoading=!1,n.toggleInteractivity(!0),a)return BeFunky.logError("Unable to fetch images",a),void("no_results"===a?(n.gallery.message="",n.gallery.emptyState={icon:"no-results-icon",text:BeFunky.LanguageManager.getStringReplacements("no_results_for",{query:'"<strong>'+e+'</strong>"'})}):(n.gallery.message={isError:!0,text:BeFunky.failureReason(a),buttonText:"try_again",buttonAction:function(){return n.loadSearchResults(e,t)}},n.gallery.emptyState="",n.previousSearchPage=n.previousSearchPage-1));if(n.gallery.images=[].concat(o(n.gallery.images),o(i)),n.gallery.message="",!(i.length<100)){n.gallery.message={buttonText:"load_more",buttonAction:function(){return n.loadSearchResults(e,t+1)}}}}}))},this.toggleInteractivity=function(e){this.searchButton.disabled=!e,this.clearButton.disabled=!e},this.openModal=function(n){var t=e.previousSearchQuery?"explore/photos/"+e.previousSearchQuery+"/":"explore/";BeFunky.openUserPhotoModal(n,e.gallery.images,t,!0)},this.closeModal=function(){BeFunky.closeUserPhotoModal()},this.getImagesPerRow=function(){var n=e.gallery.offsetWidth;return n<1200?Math.round(Math.max(2,5*n/1200)):5},this.handleSearch=function(n){n&&n.preventDefault();var t=e.searchInput.value.replace(/[`~!@#$%^&*()_|+=?;:'",.<>{}\[\]\\\/]/gi," ").replace(/ {2,}/g," ").trim();e.searchInput.value=t,e.loadSearchResults(t)},this.handleGalleryResize=function(){e.gallery.imagesPerRow=e.getImagesPerRow()},this.init()}BeFunky.explorePage={search:function(){BeFunky.throwError("Explore page not available")},openImage:function(){BeFunky.throwError("Explore page not available")},isAvailable:!1},BeFunky.onDocumentReady(function(){var e=document.getElementById("explore");e&&r.call(e)})},{}],52:[function(e,n,t){function o(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}function r(){var e=this;this.init=function(){this.initPublicAPI(),this.initGallery(),this.initResults()},this.initPublicAPI=function(){var e=this;BeFunky.galleryPage.isAvailable=!0,BeFunky.galleryPage.openImage=function(n){if(!n)return e.closeModal();var t=e.gallery.images.find(function(e){return e.id==="befunky_photo_"+n});t?e.openModal(t):BeFunky.logError("Unable to open Gallery image",{imageID:n})}},this.initGallery=function(){var e=this;this.gallery=this.querySelector(".user-gallery__gallery");BeFunky.imageGallery(this.gallery,{imagesPerRow:this.getImagesPerRow(),imageSelectionHandler:function(n){return e.openModal(n),!1},gutterWidth:16}),this.gallery.addClass("image-gallery--use-borders"),window.addEventListener("resize",BeFunky.debounce(function(){return e.handleGalleryResize()},300))},this.initResults=function(){var e=this;BeFunky.waitUntil({condition:function(){return BeFunky.Params&&BeFunky.Params.galleryUserId&&BeFunky.Params.galleryUserNick},onTimeout:function(){BeFunky.throwError("Unable to get BeFunky.Params.galleryUserId")},onSuccess:function(){e.userKey=BeFunky.Params.galleryUserId,e.userNick=BeFunky.Params.galleryUserNick,e.loadResults(1)}})},this.loadResults=function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;n<=this.previousSearchPage||(console.log("Loading...",{page:n}),this.previousSearchPage=n,1===n&&(this.gallery.images=[],this.gallery.scrollTop=0),this.gallery.message="",this.gallery.isLoading=!0,function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=arguments[2],o=new FormData;o.append("mode","gallery"),o.append("start",100*(n-1)),o.append("end",100),o.append("user_key",e),o.append("CSRFtoken",window.getCsToken()||"");var r=window.siteUrl+"images.php",a={method:"POST",withCredentials:!0,body:o};BeFunky.request(r,a,function(e){var n=e.error,o=e.response;if(n)return t({error:n});if(o.error)return t({error:o.error});if(!Array.isArray(o.images))return console.log("Server response:",o),t({error:"invalid_response"});if(!o.images.length)return t({error:"no_results"});var r=o.images.map(function(e){return{id:"befunky_photo_"+e.id,thumbWidth:200,thumbHeight:200,thumbURL:e.thumb_url,imageURL:e.url,nick:e.nick,title:e.title,dateCreated:e.dateCreated}});return t({images:r})})}(this.userKey,n,function(t){var r=t.error,a=t.images;if(e.gallery.isLoading=!1,r)return BeFunky.logError("Unable to fetch images",r),void("no_results"===r?(e.gallery.message="",e.gallery.emptyState={icon:"no-results-icon",text:"no_photos"}):(e.gallery.message={isError:!0,text:BeFunky.failureReason(r),buttonText:"try_again",buttonAction:function(){return e.loadResults(n)}},e.gallery.emptyState="",e.previousSearchPage=e.previousSearchPage-1));if(e.gallery.images=[].concat(o(e.gallery.images),o(a)),e.gallery.message="",!(a.length<100)){e.gallery.message={buttonText:"load_more",buttonAction:function(){return e.loadResults(n+1)}}}}))},this.openModal=function(n){BeFunky.openUserPhotoModal(n,e.gallery.images,"gallery/"+e.userNick+"/",!0)},this.closeModal=function(){BeFunky.closeUserPhotoModal()},this.getImagesPerRow=function(){var n=e.gallery.offsetWidth;return n<1200?Math.round(Math.max(2,5*n/1200)):5},this.handleGalleryResize=function(){e.gallery.imagesPerRow=e.getImagesPerRow()},this.init()}BeFunky.galleryPage={openImage:function(){BeFunky.throwError("Gallery page not available")},isAvailable:!1},BeFunky.onDocumentReady(function(){var e=document.getElementById("user_gallery");e&&r.call(e)})},{}],53:[function(e,n,t){var o=function(){return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,n){var t=[],o=!0,r=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(o=(i=s.next()).done)&&(t.push(i.value),!n||t.length!==n);o=!0);}catch(e){r=!0,a=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw a}}return t}(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var r=e("../components/forms");function a(){this.init=function(){this.initDefaultValues(),this.initButtons(),this.initNotifications(),this.initDialogsFromServer()},this.initDefaultValues=function(){this.isPayPalSubscriber="1"===this.dataset.isPaypalSubscriber,this.nextBillingDate=this.dataset.nextBillingDate,this.isSocialUser="1"===this.dataset.isSocialUser,this.isSocialUser&&document.querySelector("#edit_password_modal .material-field").setStyles({display:"none"}).querySelector("input").removeAttribute("required");document.querySelector(".my-account__delete-contact-support").setLang("delete_account_contact_support",{contact_support:function(){return'<a href="https://support.befunky.com/hc/en-us/requests/new" target="_blank" rel="noopener">'+BeFunky.LanguageManager.getString("contact_support")+"</a>"}});var e=document.getElementById("previous_plan");null!==e&&e.setLang("previous_plan",{next_billing_date:this.nextBillingDate})},this.initButtons=function(){var e=this,n={username:{modal:document.getElementById("edit_username_modal"),onSubmit:this.handleUsernameSubmit.bind(this),onUpdate:{username:function(e){e.value=e.value.replace(/[^a-zA-Z0-9_-]/,"")}}},email:{modal:document.getElementById("edit_email_modal"),onSubmit:this.handleEmailSubmit.bind(this)},password:{modal:document.getElementById("edit_password_modal"),onSubmit:this.handlePasswordSubmit.bind(this)},"credit-card":{onButtonClick:function(){return BeFunky.openPaymentPanel("","update")}},"billing-history":{onButtonClick:function(){return BeFunky.openStatementPanel()}},"cancel-subscription":{onButtonClick:this.handleCancelSubscription.bind(this)},"email-notifications":{modal:document.getElementById("email_notifications_modal"),onButtonClick:this.updateNotificationCheckboxes.bind(this),onSubmit:this.handleEmailNotificationsSubmit.bind(this)},"delete-account":{onButtonClick:this.handleDeleteAccountSectionButtonClick.bind(this)}};Object.entries(n).forEach(function(n){var t=o(n,2),a=t[0],i=t[1],s=i.modal,l=i.onUpdate,u=i.onSubmit,c=i.onButtonClick,d=e.querySelector(".my-account__row--"+a)||e.querySelector(".my-account__card--"+a);if(d){var p=d.querySelector(".my-account__data"),m=d.querySelector(".my-account__button");if(m){var g=s&&s.querySelector("form"),y=g&&[].concat(function(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}(g.querySelectorAll("input")));"function"==typeof c&&m.addEventListener("click",c),s&&(m.addEventListener("click",function(){f(),BeFunky.openModal(s,{addSiteClass:!0,addCloseButton:!0,size:"small",onOpen:function(){requestAnimationFrame(function(){e.focusFirstVisibleInput(g)})}})}),l&&y.forEach(function(e){l[e.name]&&function(e,n){var t=BeFunky.debounce(n,100);e.addEventListener("change",t),e.addEventListener("keyup",t),e.addEventListener("blur",t)}(e,function(n){return l[e.name](e)})}),g.addEventListener("submit",function(e){e.preventDefault(),f(),u(g,s,p)}))}}function f(){r.clearError(g),g.querySelectorAll(".material-field__input").removeClass("material-field__input--invalid")}})},this.initDialogsFromServer=function(){var e=this,n={deleteAccountEmailSent:function(){var e=document.createElement("div"),n=document.createElement("p").setLang("delete_account_email_sent"),t=document.createElement("p").setLang("thank_you_befunky");e.appendChild(n),e.appendChild(t),BeFunky.acknowledge(e,{heading:"sorry_see_you_go"})},unsubscribed:function(){BeFunky.acknowledge(["my_account_unsubscribed",{my_account_link:'<a href="/my-account/">My Account</a>',plan_expiration_date:e.nextBillingDate}])},resubscribed:function(){BeFunky.acknowledge("my_account_resubscribed")},thankYouModal:function(){BeFunky.openThankYouPanel()},emailVerified:function(){BeFunky.showNotification({message:"Your email address has been successfully verified. Thank you!",type:"success"})},emailAlreadyVerified:function(){BeFunky.showNotification({message:"Your email address has already been verified.",type:"success"})}}[this.dataset.modal];n&&(n(),BeFunky.pushRoute("my-account",!0))},this.initNotifications=function(){"0"===this.dataset.isEmailVerified&&this.promptUserToVerifyEmail()},this.focusFirstVisibleInput=function(e){for(var n=e.querySelectorAll("input"),t=0;t<n.length;t++)if(n[t].offsetParent){n[t].focus();break}},this.promptUserToVerifyEmail=function(){BeFunky.showNotification({message:"please_verify_email",button:{text:"send_verification_email",onClick:i},type:"warning"})},this.updateNotificationCheckboxes=function(){var e=document.getElementById("account_newsletter_subscription");if(!e)return BeFunky.throwError("Unable to get email opt-in/out row");var n="true"===e.dataset.isOptedIn;document.getElementById("email_subscribe_newsletters").checked=n},this.handleUsernameSubmit=function(e,n,t){var a,i,s,l,u,c=(a="username",e.querySelector('[name="'+a+'"]')),d=c.value.trim(),p=e.querySelector("button"),m=!1;((d.length<4||d.length>100)&&(c.addClass("material-field__input--invalid"),m=!0),m)||(p.disabled=!0,BeFunky.showLoadScreen(),i=function(o){var a=o.error;if(o.success,p.disabled=!1,BeFunky.hideLoadScreen(),a)return r.displayError(e,BeFunky.failureReason(a));t.textContent=d,t.nextElementSibling.disabled=!0,BeFunky.closeModal(n)},s={mode:"UserNameEdit",newName:d,CSRFtoken:window.getCsToken()},l=window.siteUrl+"oauth.php",u={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Object.entries(s).map(function(e){var n=o(e,2),t=n[0],r=n[1];return t+"="+r}).join("&")},BeFunky.request(l,u,function(e){var n=e.error,t=e.response;return n?i({error:n}):t.message&&"1"===t.message?i({success:!0}):i({error:{0:"not_logged_in",1:"invalid_username",2:"Sorry, this username is already in use.",3:"invalid_username",4:"invalid_username",5:"You can only change your username once."}[t.error]||"invalid_response"})}))},this.handleEmailSubmit=function(e,n,t){var a,i,s,l,u,c,d=this,p=function(n){return e.querySelector('[name="'+n+'"]')},m=p("email"),g=p("email_confirmed"),y=p("password"),f=m.value.trim(),h=e.querySelector("button"),v=!1;(window.isEmailAddress(f)||(m.addClass("material-field__input--invalid"),v=!0),g.value.trim()!==f&&(g.addClass("material-field__input--invalid"),v=!0),y.value.length<6&&(y.addClass("material-field__input--invalid"),v=!0),v)||(h.disabled=!0,BeFunky.showLoadScreen(),a=f,i=y.value,s=function(o){var a=o.error,i=o.requiresEmailVerification;if(h.disabled=!1,BeFunky.hideLoadScreen(),a)return r.displayError(e,BeFunky.failureReason(a));i&&(window.setCookie("mailVerificationSend","",-1),d.promptUserToVerifyEmail()),t.textContent=f,BeFunky.closeModal(n)},l={q:"eml_editing",e:a,ea:a,pa:encodeURIComponent(i),CSRFtoken:window.getCsToken(),nc:window.nonCacheGetTime()},u=window.siteUrl+"queryCall.php",c={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Object.entries(l).map(function(e){var n=o(e,2),t=n[0],r=n[1];return t+"="+r}).join("&")},BeFunky.request(u,c,function(e){var n=e.error,t=e.response;return n?s({error:n}):"string"==typeof t.error?s({error:t.error}):"1"===t.message&&t.social?s({success:!0,requiresEmailVerification:"1"!==t.social}):s({error:"invalid_response"})}))},this.handlePasswordSubmit=function(e,n){var t=function(n){return e.querySelector('[name="'+n+'"][required]')},a=t("current_password"),i=a?a.value:"",s=t("new_password"),l=t("new_password_confirmed"),u=e.querySelector("button"),c=!1;a&&a.value.length<6&&(a.addClass("material-field__input--invalid"),c=!0),s.value.length<6&&(s.addClass("material-field__input--invalid"),c=!0),s.value!==l.value&&(l.addClass("material-field__input--invalid"),c=!0),c||(u.disabled=!0,BeFunky.showLoadScreen(),function(e,n,t){var r={q:"psw_editing",np:encodeURIComponent(e),npa:encodeURIComponent(e),CSRFtoken:window.getCsToken(),nc:window.nonCacheGetTime()};n&&(r.op=encodeURIComponent(n));var a=window.siteUrl+"queryCall.php",i={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Object.entries(r).map(function(e){var n=o(e,2),t=n[0],r=n[1];return t+"="+r}).join("&")};BeFunky.request(a,i,function(e){var n=e.error,o=e.response;return n?t({error:n}):"string"==typeof o.error?t({error:o.error}):"1"!==o.message?t({error:"invalid_response"}):t({success:!0})})}(s.value,i,function(t){var o=t.error;t.success;if(u.disabled=!1,BeFunky.hideLoadScreen(),o)return r.displayError(e,BeFunky.failureReason(o));BeFunky.closeModal(n)}))},this.handleEmailNotificationsSubmit=function(e,n){var t=document.getElementById("account_newsletter_subscription");if(!t)return BeFunky.throwError("Unable to get email opt-in/out row");var r,a,i,s,l=document.getElementById("email_subscribe_newsletters").checked;BeFunky.showLoadScreen(),r=function(e){var o=e.error;e.success,BeFunky.hideLoadScreen(),o?BeFunky.throwError("Unable to update email subscription",o):(BeFunky.closeModal(n.id),t.dataset.isOptedIn=l?"true":"false")},a={q:"email_preferences_change",em:"effects",is_:l?"0":"1",CSRFtoken:window.getCsToken(),nc:window.nonCacheGetTime()},i=window.siteUrl+"queryCall.php",s={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Object.entries(a).map(function(e){var n=o(e,2),t=n[0],r=n[1];return t+"="+r}).join("&")},BeFunky.request(i,s,function(e){var n=e.error,t=e.response;return n?r({error:n}):"string"==typeof t.error?r({error:t.error}):"1"!==t.message?r({error:"invalid_response"}):r({success:!0})})},this.handleCancelSubscription=function(){var e=this,n=document.createElement("div"),t=document.createElement("p").setLang("cancellation_prompt",{next_billing_date:this.nextBillingDate});n.appendChild(t);var r="cancel_subscription";this.isPayPalSubscriber&&(r="open_paypal",n.appendChild(document.createElement("p").setLang("cancel_via_paypal"))),BeFunky.confirm(n,{heading:"thank_you_befunky_titlecase",confirmText:r,cancelText:"dont_cancel_subscription",size:"large",imageUrl:window.globalImagesPath+"site/cancel-subscriptions.jpg",onConfirm:function(){if(e.isPayPalSubscriber){var n=e.dataset.paypalCancellationUrl||"https://www.paypal.com/us/signin";return window.open(n,"_blank")}var t,r,a;t=window.siteUrl+"my-account/?c=approved",r={CSRFtoken:window.getCsToken(),process:"cancelProfile",nbd:e.nextBillingDate,cancelApprove:""},(a=document.createElement("form")).setAttribute("method","post"),a.setAttribute("action",t),Object.entries(r).forEach(function(e){var n=o(e,2),t=n[0],r=n[1],i=document.createElement("input");i.setAttribute("type","hidden"),i.setAttribute("name",t),i.setAttribute("value",r),a.appendChild(i)}),document.body.appendChild(a),a.submit()}})},this.handleDeleteAccountSectionButtonClick=function(e){var n=e.target.getAttribute("data-lang"),t={open_paypal:function(){},send_verification_email:function(){i()},delete_account:function(){var e=function(){var e=document.createElement("div"),n=document.createElement("p").setLang("delete_account_first_paragraph",{email:'<a href="mailto:support@befunky.com">support@befunky.com</a>'});e.appendChild(n);var t=document.createElement("p").setLang("delete_account_second_paragraph");e.appendChild(t);var o=document.createElement("p").setLang("delete_account_thanks");return e.appendChild(o),e}();BeFunky.confirm(e,{heading:"sorry_to_see_you_go",confirmText:"yes_delete_account",cancelText:"cancel",size:"medium",onConfirm:function(){var e=window.siteUrl+"my-account/";window.location.href=e+"?p=closemyaccount&cs="+window.getCsToken()}})}};if(t[n])return t[n]();BeFunky.throwError("Unknown button clicked in Delete Account section")},this.init()}function i(){var e=!!window.getCookie("mailVerificationSend");if(BeFunky.Params&&BeFunky.Params.IS_LC&&(e=!0),e)return BeFunky.confirm("confirm_resend_verification_email",{onConfirm:n,confirmText:"resend_email"});function n(){var e=new FormData;e.append("mode","mailVerify"),e.append("CSRFtoken",window.getCsToken());var n=window.siteUrl+"processing.php",t={method:"POST",body:e};BeFunky.showLoadScreen(),BeFunky.request(n,t,function(e){var n=e.error,t=e.response;if(BeFunky.hideLoadScreen(),n||!t.userEmail)return BeFunky.logError("Unable to verify email",n),void("not_user"===n?BeFunky.acknowledge("error_email_not_registered"):BeFunky.acknowledge(BeFunky.failureReason(n||"invalid_response")));BeFunky.acknowledge("verification_email_sent")})}n()}BeFunky.sendVerificationEmail=i,BeFunky.onDocumentReady(function(){var e=document.getElementById("my_account");e&&a.call(e)})},{"../components/forms":3}],54:[function(e,n,t){function o(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}var r=e("../components/forms");function a(){var e=this;this.init=function(){this.initDefaultValues(),this.initPublicAPI(),this.initMenuItems(),this.initGallery(),this.initSearchForm(),this.initEditTitle()},this.initDefaultValues=function(){this.supportsTouch="ontouchstart"in document.documentElement||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0},this.initPublicAPI=function(){var e=this;BeFunky.myPhotosPage.isAvailable=!0,BeFunky.myPhotosPage.openImage=function(n){if(!n)return e.closeModal();var t=e.gallery.images.find(function(e){return e.id==="befunky_photo_"+n});t?e.openModal(t):BeFunky.logError("Unable to open Gallery image",{imageID:n})},BeFunky.myPhotosPage.selectFilter=function(n){e.closeModal(),n!==e.previousFilter&&e.loadResults("",n)}},this.initMenuItems=function(){var e=this;this.menuItems={editTitle:{domId:"edit_title_form",title:function(){return"title"},onClick:function(e,n){var t=document.getElementById("edit_title_modal"),o=t.querySelector("input[name=imgId]"),r=n.id.replace("befunky_photo_","");o.value=""+r+n.key,t.querySelector("input[name=title]").value=n.title,BeFunky.openModal("edit_title_modal",{size:"small",addCloseButton:!0})}},openInApp:{title:function(){return"editor"},onClick:function(e,n){BeFunky.myPhotosPage.imageToEdit=n.imageURL,BeFunky.pushRoute("create")}},publicPrivate:{title:function(e){return!0===e.isPublic?"set_to_private":"set_to_public"},onClick:function(n,t){n.target.disabled=!0,function(e,n){var t=e.isPublic,o=e.key,r=e.id;if((null!=BeFunky.User.isMailVerified?BeFunky.User.isMailVerified:BeFunky.Params.isMailVerified)||t){var a=r.replace("befunky_photo_",""),i=BeFunky.Params.siteUrl+"processing.php",s=new FormData;s.append("mode","modify_image"),s.append("imgId",a+o),s.append("isPublic",t?"0":"1"),s.append("CSRFtoken",window.getCsToken()||""),s.append("nocache",""+Math.random());var l={method:"POST",body:s};BeFunky.request(i,l,function(o){var a=o.error,i=o.response;if(a||i.error)n({error:a||i.error});else if("1"===i.message){var s=!t;e.isPublic=s,n({isPublic:s,id:r})}else n({error:"invalid_response"})})}else BeFunky.confirm("photos_public_verify_email",{confirmText:"send_verification_email",onConfirm:BeFunky.sendVerificationEmail}),n({error:"email_not_verified"})}(t,function(t){var o=t.error,r=t.isPublic,a=t.id;if(n.target.disabled=!1,o)BeFunky.logError("Unable to change photo status",o);else{var i=document.querySelector("#image_gallery_item--"+a+" .image-gallery__edit-options .my-photos__item-3");if(!0===r?i.setLang("set_to_private"):i.setLang("set_to_public"),"public"===e.previousFilter||"private"===e.previousFilter){var s=document.getElementById("image_gallery_item--"+a);s.parentElement.removeChild(s),e.gallery.images=e.gallery.images.filter(function(e){return e.id!==a})}}})}},deleteImage:{title:function(){return"trash"},onClick:function(n,t){BeFunky.confirm("delete_this_photo",{onConfirm:function(){!function(e,n){var t=e.id,o=e.key,r=t.replace("befunky_photo_",""),a=new FormData;a.append("imgIds",r+o),a.append("CSRFtoken",window.getCsToken()||""),a.append("nocache",""+Math.random()),a.append("mode","del_images");var i=BeFunky.Params.siteUrl+"processing.php",s={method:"POST",body:a};BeFunky.request(i,s,function(e){var o=e.error,r=e.response;o||r.error?n({error:o||r.error}):"1"===r.message?n({response:r,id:t}):n({error:"invalid_response"})})}(t,function(n){var t=n.error,o=n.id;if(t)BeFunky.logError("Unable to delete photo",t);else{var r=document.getElementById("image_gallery_item--"+o);r.parentElement.removeChild(r),e.gallery.images=e.gallery.images.filter(function(e){return e.id!==o})}})}})}}}},this.initGallery=function(){var e=this;this.gallery=this.querySelector(".my-photos__gallery");BeFunky.imageGallery(this.gallery,{imagesPerRow:this.getImagesPerRow(),imageSelectionHandler:function(n){return e.openModal(n),!1},extendItem:this.addPhotoOptions,gutterWidth:16}),this.gallery.addClass("image-gallery--use-borders"),window.addEventListener("resize",BeFunky.debounce(function(){return e.handleGalleryResize()},300))},this.initSearchForm=function(){var e=this;this.searchForm=this.querySelector(".search-box"),this.searchInput=this.querySelector(".search-box__input"),this.clearButton=this.querySelector(".search-box__clear"),this.searchButton=this.querySelector(".search-box__submit"),this.validFilters=["all","public","private"],this.filterButtons=this.validFilters.reduce(function(n,t){var o=document.getElementById("my_photos_filter_"+t);return n[t]=o,o.addEventListener("click",function(){return e.loadResults("",t)}),n},{}),this.previousSearchQuery=null,this.previousFilter=null,this.previousSearchPage=-1,this.clearButton.addEventListener("click",function(){e.loadResults("",e.previousFilter),e.searchInput.focus()}),this.searchForm.addEventListener("submit",this.handleSearch)},this.initEditTitle=function(){var e=this,n=this.menuItems.editTitle.domId,t=document.getElementById(n);t.addEventListener("submit",function(n){BeFunky.showLoadScreen(),n.preventDefault(),function(e,n){var t=new FormData(e),o=t.get("title"),r=t.get("imgId"),a=r.substring(0,r.length-1),i=o.match(/#(\w+)/gi);i=null!=i?i.join().replace(/#/g,""):"",t.append("mode","modify_image"),t.append("tags",i),t.append("nocache",""+Math.random()),t.set("title",""+encodeURI(o.replace(/'/g,"&#39;"))),t.append("CSRFtoken",window.getCsToken()||"");var s=BeFunky.Params.siteUrl+"processing.php",l={method:"POST",withCredentials:!0,body:t};BeFunky.request(s,l,function(e){var t=e.error,r=e.response;t||r.error?n({error:t||r.error}):"1"===r.message?n({imageId:a,title:o}):n({error:"invalid_response"})})}(t,function(n){var t=n.error,o=n.imageId,a=n.title;if(BeFunky.hideLoadScreen(),t){BeFunky.logError("Unable to set title on photo",t);var i=BeFunky.failureReason(t);r.displayError("#edit_title_modal",i)}else{e.gallery.images.find(function(e){return e.id==="befunky_photo_"+o}).title=a,BeFunky.closeModal("edit_title_modal")}})})},this.loadResults=function(e,n){var t=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(!(this.previousSearchQuery===e&&this.previousFilter===n&&r<=this.previousSearchPage)){this.validFilters.includes(n)||BeFunky.throwError("Invalid MyPhotos filter",{filter:n}),this.searchInput.value=e;var a=this.filterButtons[n];Object.values(this.filterButtons).forEach(function(e){e.toggleClass("my-photos__filter--active",e===a)}),console.log("Loading results...",{searchQuery:e,filter:n,page:r}),this.previousSearchQuery=e,this.previousFilter=n,this.previousSearchPage=r,BeFunky.pushRoute("all"===n?"myphotos/":"myphotos/"+n+"/"),1===r&&(this.gallery.images=[],this.gallery.scrollTop=0),this.gallery.message="",this.gallery.isLoading=!0,this.toggleInteractivity(!1),function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments[3],r=new FormData;r.append("mode","myphotos"),r.append("start",100*(t-1)),r.append("end",100),r.append("CSRFtoken",window.getCsToken()||""),e?r.append("keyword",e):r.append("type",n);var a=window.siteUrl+"images.php",i={method:"POST",withCredentials:!0,body:r};BeFunky.request(a,i,function(e){var n=e.error,t=e.response;if(n)return o({error:n});if(t.error)return o({error:t.error});if(!Array.isArray(t.images))return console.log("Server response:",t),o({error:"invalid_response"});if(!t.images.length)return o({error:"no_results"});var r=t.images.map(function(e){return{id:"befunky_photo_"+e.id,key:e.key,thumbWidth:200,thumbHeight:200,thumbURL:e.thumb_url,imageURL:e.url,isPublic:"1"===e.isPublic,nick:e.nick,title:e.title,dateCreated:e.dateCreated}});return o({images:r})})}(e,n,r,function(a){var i=a.error,s=a.images;if(e===t.previousSearchQuery&&n===t.previousFilter){if(t.gallery.isLoading=!1,t.toggleInteractivity(!0),i)return BeFunky.logError("Unable to fetch images",i),void("no_results"===i?(t.gallery.message="",t.gallery.emptyState={icon:"no-results-icon",text:e?BeFunky.LanguageManager.getStringReplacements("no_results_for",{query:'"<strong>'+e+'</strong>"'}):"error_no_results"}):(t.gallery.message={isError:!0,text:BeFunky.failureReason(i),buttonText:"try_again",buttonAction:function(){return t.loadResults(e,n,r)}},t.gallery.emptyState="",t.previousSearchPage=t.previousSearchPage-1));if(t.gallery.images=[].concat(o(t.gallery.images),o(s)),t.gallery.message="",!(s.length<100)){t.gallery.message={buttonText:"load_more",buttonAction:function(){return t.loadResults(e,n,r+1)}}}}})}},this.createEllipsis=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=document.createElement("div").setClass("image-gallery__edit-button");n&&t.addClass("image-gallery__edit-button--always-show");var o=document.createElement("div").setClass("image-gallery__edit-ellipsis");o.appendChild(document.createElement("div")),o.appendChild(document.createElement("div")),o.appendChild(document.createElement("div")),t.appendChild(o);var r=document.createElement("div");r.setClass("image-gallery__edit-options"),e.appendChild(t),e.appendChild(r);var a=!1;function i(n){e.contains(n.target)||function(){if(!a)return;a=!1,r.removeClass("image-gallery__edit-options--visible"),document.removeEventListener("touchstart",i),document.removeEventListener("mouseover",i)}()}t.addEventListener("click",function(){if(a)return;a=!0,r.addClass("image-gallery__edit-options--visible"),document.addEventListener("touchstart",i),document.addEventListener("mouseover",i)})},this.addPhotoOptions=function(n,t){n.addClass("image-gallery__item--has-button"),e.createEllipsis(n,e.supportsTouch);var o=n.querySelector(".image-gallery__edit-options");Object.keys(e.menuItems).forEach(function(n,r){var a=document.createElement("button");a.setClass("button button--list image-gallery__edit-option my-photos__item-"+(r+1)),a.addEventListener("click",function(o){e.menuItems[n].onClick(o,t)}),a.setLang(e.menuItems[n].title(t)),o.appendChild(a)})},this.toggleInteractivity=function(e){this.searchButton.disabled=!e,this.clearButton.disabled=!e,Object.values(this.filterButtons).forEach(function(n){return n.disabled=!e})},this.openModal=function(n){var t="all"===e.previousFilter?"myphotos/":"myphotos/"+e.previousFilter+"/";BeFunky.openUserPhotoModal(n,e.gallery.images,t,!1)},this.closeModal=function(){BeFunky.closeUserPhotoModal()},this.getImagesPerRow=function(){var n=e.gallery.offsetWidth;return n<1200?Math.round(Math.max(2,5*n/1200)):5},this.handleSearch=function(n){n&&n.preventDefault();var t=e.searchInput.value.replace(/[`~!@#$%^&*()_|+=?;:'",.<>{}\[\]\\\/]/gi," ").replace(/ {2,}/g," ").trim();e.searchInput.value=t,e.loadResults(t,"all")},this.handleGalleryResize=function(){e.gallery.imagesPerRow=e.getImagesPerRow()},this.init()}BeFunky.myPhotosPage={openImage:function(){BeFunky.throwError("MyPhotos page not available")},selectFilter:function(){BeFunky.throwError("MyPhotos page not available")},imageToEdit:"",isAvailable:!1},BeFunky.onDocumentReady(function(){var e=document.getElementById("my_photos");e&&a.call(e)})},{"../components/forms":3}],55:[function(e,n,t){},{}],56:[function(e,n,t){var o,r,a,i;Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,n){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),o=t.length>>>0;if(0===o)return!1;var r,a,i=0|n,s=Math.max(i>=0?i:o-Math.abs(i),0);for(;s<o;){if((r=t[s])===(a=e)||"number"==typeof r&&"number"==typeof a&&isNaN(r)&&isNaN(a))return!0;s++}return!1}}),Array.from||(Array.from=(o=Object.prototype.toString,r=function(e){return"function"==typeof e||"[object Function]"===o.call(e)},a=Math.pow(2,53)-1,i=function(e){var n=function(e){var n=Number(e);return isNaN(n)?0:0!==n&&isFinite(n)?(n>0?1:-1)*Math.floor(Math.abs(n)):n}(e);return Math.min(Math.max(n,0),a)},function(e){var n=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var t=arguments.length>1?arguments[1]:void 0,o=void 0;if(void 0!==t){if(!r(t))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(o=arguments[2])}for(var a=i(n.length),s=r(this)?Object(new this(a)):new Array(a),l=0,u=void 0;l<a;)u=n[l],s[l]=t?void 0===o?t(u,l):t.call(o,u,l):u,l+=1;return s.length=a,s})),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),t=n.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var o=arguments[1],r=0;r<t;){var a=n[r];if(e.call(o,a,r,n))return r;r++}return-1},configurable:!0,writable:!0}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),t=n.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var o=arguments[1],r=0;r<t;){var a=n[r];if(e.call(o,a,r,n))return a;r++}},configurable:!0,writable:!0}),Array.prototype.shuffle=function(){for(var e,n,t=this.length;t;e=parseInt(Math.random()*t),n=this[--t],this[t]=this[e],this[e]=n);return this}},{}],57:[function(e,n,t){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector),window.Element&&!Element.prototype.closest&&(Element.prototype.closest=function(e){var n,t=(this.document||this.ownerDocument).querySelectorAll(e),o=this;do{for(n=t.length;--n>=0&&t.item(n)!==o;);}while(n<0&&(o=o.parentElement));return o}),window.requestIdleCallback=window.requestIdleCallback||function(e){return setTimeout(function(){var n=Date.now();e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-n))}})},1)},window.cancelIdleCallback=window.cancelIdleCallback||function(e){clearTimeout(e)},function(){if("function"==typeof window.CustomEvent)return!1;function e(e,n){n=n||{bubbles:!1,cancelable:!1,detail:void 0};var t=document.createEvent("CustomEvent");return t.initCustomEvent(e,n.bubbles,n.cancelable,n.detail),t}e.prototype=window.Event.prototype,window.CustomEvent=e;try{window.Event=e}catch(e){}}()},{}],58:[function(e,n,t){Object.entries||(Object.entries=function(e){for(var n=Object.keys(e),t=n.length,o=new Array(t);t--;)o[t]=[n[t],e[n[t]]];return o}),Object.values||(Object.values=function(e){return Object.keys(e).map(function(n){return e[n]})}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,n){"use strict";if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),o=1;o<arguments.length;o++){var r=arguments[o];if(null!=r)for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},writable:!0,configurable:!0})},{}],59:[function(e,n,t){String.prototype.startsWith||(String.prototype.startsWith=function(e,n){return this.substr(!n||n<0?0:+n,e.length)===e}),String.prototype.endsWith||(String.prototype.endsWith=function(e,n){return(void 0===n||n>this.length)&&(n=this.length),this.substring(n-e.length,n)===e}),String.prototype.includes||Object.defineProperty(String.prototype,"includes",{value:function(e,n){return"number"!=typeof n&&(n=0),!(n+e.length>this.length)&&-1!==this.indexOf(e,n)}})},{}],60:[function(e,n,t){var o=function(){function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,t,o){return t&&e(n.prototype,t),o&&e(n,o),n}}();var r=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.imagesPerPage=50,this.resetImageData()}return o(e,[{key:"resetImageData",value:function(){this.imageData={totalImages:null,fetchedImages:[],startPhotos:0,startLayers:0}}},{key:"getPhotosAndLayers",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments[1];if(!BeFunky.isLoggedIn())return t({error:"not_logged_in"});l=l.bind(this);var o=this.imageData.totalImages,r=this.imageData.fetchedImages,a=n*this.imagesPerPage>r.length&&o>r.length;if(null==o||a)return l({startPhotos:this.imageData.startPhotos,startLayers:this.imageData.startLayers},function(o){var a=o.error,i=o.data,s=o.totalImages,l=o.startPhotos,u=o.startLayers;if(a)return t({error:a});e.imageData={totalImages:s,fetchedImages:r.concat(i),startPhotos:l,startLayers:u},e.getPhotosAndLayers(n,t)});var i=(n-1)*this.imagesPerPage,s=i+this.imagesPerPage;return t({data:r.slice(i,s),totalPages:Math.ceil(o/this.imagesPerPage)});function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.startPhotos,t=void 0===n?0:n,o=e.startLayers,r=void 0===o?0:o,a=arguments[1],i=window.siteUrl+"processing.php",s={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:["mode=get_image_library_contents","start_images="+t,"start_layers="+r,"end=100","CSRFtoken="+(window.getCsToken()||""),"nocache="+Math.random().toString().split(".")[1]].join("&")};BeFunky.request(i,s,function(e){var n=e.response,t=e.error;if(t)return a({error:t});if(n&&"not_login"===n.error)return a({error:"not_logged_in"});if(!n||!Array.isArray(n.images)||"number"!=typeof n.total||"number"!=typeof n.start_images||"number"!=typeof n.start_layers)return a({error:"invalid_response"});if(!n.images.length)return a({error:"no_results"});var o=n.images.map(function(e){var n="befunky_layers"===e.type,t=n?"befunky_layer":"befunky_photo",o=n&&e.url.endsWith(".png");return{id:t+"_"+e.id,date:e.dateCreated,imageURL:e.url,isTransparent:o,thumbURL:e.thumb_url,thumbWidth:200,thumbHeight:200}});return a({data:o,totalImages:n.total,startPhotos:n.start_images,startLayers:n.start_layers})})}}}]),e}();BeFunky.ImagesService=new r},{}],61:[function(e,n,t){var o=function(){function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,t,o){return t&&e(n.prototype,t),o&&e(n,o),n}}();var r=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.facebookAppID="120991377944644",this.scopes="email,public_profile,user_photos",this.fields="id,name,email,gender,birthday",this.hasInitialized=!1,this.onInitCallbacks=[],this.hasBeenAuthorized=!1}return o(e,[{key:"loadSDK",value:function(){var e=this;if(this.hasInitialized)return Promise.resolve();var n=new Promise(function(n){e.onInitCallbacks.push(n)});return document.getElementById("facebook-jssdk")||BeFunky.onDocumentReady(function(){var n,t,o,r,a,i=document.createElement("div");i.id="fb-root",document.body.appendChild(i),window.fbAsyncInit=function(){FB.init({appId:e.facebookAppID,cookie:!0,version:"v3.2"}),e.hasInitialized=!0,e.onInitCallbacks.forEach(function(e){return e()})},n=document,t="script",o="facebook-jssdk",a=n.getElementsByTagName(t)[0],n.getElementById(o)||((r=n.createElement(t)).id=o,r.src="https://connect.facebook.net/en_US/sdk.js",a.parentNode.insertBefore(r,a))}),n}},{key:"getAccessToken",value:function(e){var n=this,t=this.scopes;if(e&&!t.split(",").includes(e))throw new Error("Unsupported scope: "+e);return this.loadSDK().then(function(){return new Promise(function(e,n){if("https:"!==location.protocol)return BeFunky.logError("FB.getLoginStatus not called b/c this is a non-SSL page"),n("unknown");FB.getLoginStatus(function(n){var t=n.status,r=n.authResponse;if("connected"===t)return e({accessToken:r.accessToken});e(o())},!0)})}).then(function(t){return n.hasBeenAuthorized=!0,e&&!Array.isArray(t.grantedScopes)?new Promise(function(e,n){FB.api("/me/permissions",function(t){if(Array.isArray(t.data)){var o=t.data.filter(function(e){var n=e.status;return"granted"===n}).map(function(e){var n=e.permission;return n}).join(",");return console.log("Granted scopes:",o),e(o)}BeFunky.throwError("Unable to get granted scopes from FB API",t),n("invalid_response")})}).then(function(e){return{accessToken:t.accessToken,grantedScopes:e}}):t}).then(function(n){return e&&!r(n.grantedScopes)?new Promise(function(n,t){var a="facebook_access_"+e;BeFunky.LanguageManager.isTranslated(a)||(a="Please allow BeFunky to access your Facebook "+e.replace(/_/g," ")+"."),BeFunky.confirm(a,{onConfirm:function(){o(!0).then(function(o){if(r(o.grantedScopes))return n(o);t(e+"_scope_declined")}).catch(t)},onCancel:function(){t(e+"_scope_declined")},confirmText:"continue"})}):n});function o(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n={scope:t,return_scopes:!0};e&&(n.auth_type="rerequest");var o=!1,r=function(){o=!0};return new Promise(function(e,t){window.addEventListener("blur",r),i();var a=setTimeout(function(){o||BeFunky.acknowledge(["browser_block_social_login",{provider:"Facebook"}],{onAcknowledge:i,buttonText:"try_again"})},200);function i(){FB.login(function(n){var o=n.status,i=n.authResponse;if(window.removeEventListener("blur",r),clearTimeout(a),"connected"===o){var s=i.accessToken,l=i.grantedScopes;return e({accessToken:s,grantedScopes:l})}return t(o)},n)}})}function r(n){return n.split(",").includes(e)}}},{key:"getAccessTokenForFlash",value:function(e){this.getAccessToken(e).then(function(e){var n=e.accessToken;document.getElementById(BeFunky.Params.swfId).getAccessTokenForFlash(n)},function(e){BeFunky.logError("Unable to get Facebook access token for Flash",e),document.getElementById(BeFunky.Params.swfId).getAccessTokenForFlash(null)})}},{key:"getUserData",value:function(){var e=this;return this.getAccessToken("email").then(function(){return new Promise(function(n,t){FB.api("/me",{fields:e.fields},function(e){if(e.error)return t(e.error);n(e)})})})}},{key:"loginWithFacebook",value:function(){return this.getUserData().then(function(e){return e.email&&e.email.length?BeFunky.handleSocialLogin("facebook",e):(BeFunky.confirm("facebook_email_login_failed",{onConfirm:function(){BeFunky.openLoginPanel("REGISTER",BeFunky.LoginPanelObj.isLoggedInNextFunction)},onCancel:function(){window.open("https://www.facebook.com/","_blank")},confirmText:"register_with_email",cancelText:"go_to_facebook"}),Promise.reject("missing_email"))})}},{key:"getPhotoAlbums",value:function(){return this.getAccessToken("user_photos").then(function(e){var n=e.accessToken;return new Promise(function(e,t){var o="https://graph.facebook.com/v3.2/me?"+["fields=albums.fields(name,photos.fields(picture,images).limit(1000))","access_token="+n].join("&");BeFunky.request(o,{headers:{"Content-Type":"application/x-www-form-urlencoded"}},function(n){var o=n.response,r=n.error;if(r)return t(r);if(!o||!o.albums||!Array.isArray(o.albums.data))return t("invalid_response");var a=o.albums.data.filter(function(e){var n=e.photos;return n&&n.data&&n.data.length});if(!a.length)return t("no_results");var i=a.map(function(e){var n=e.id,t=e.name,o=e.photos,r={id:n,name:t};return r.images=o.data.filter(function(e){return e&&e.images&&e.images.length>1}).map(function(e){var n=e.images.slice().sort(function(e,n){return e.width>n.width?1:-1}),t=n[n.length-1],o=n.find(function(e){return e.height>=200})||t;return{id:"facebook_"+e.id,imageURL:t.source,imageWidth:t.width,imageHeight:t.height,thumbURL:o.source,thumbWidth:o.width,thumbHeight:o.height}}),r});return e(i)})})},function(e){return BeFunky.logError("Unable to get Facebook access token:",e),Promise.reject("invalid_token")})}}]),e}();BeFunky.FacebookAuth=new r},{}],62:[function(e,n,t){BeFunky.isEdge=/Edge\/\d+/.test(navigator.userAgent),BeFunky.isInternetExplorer=/Trident|MSIE/.test(navigator.userAgent),BeFunky.isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),BeFunky.isFirefox=/firefox/i.test(navigator.userAgent),BeFunky.isOpera=/Opera|OPR\//.test(navigator.userAgent),BeFunky.isChromium=window.chrome&&!BeFunky.isEdge,BeFunky.isChrome=BeFunky.isChromium&&!BeFunky.isOpera,BeFunky.isMac=navigator.platform.includes("Mac"),BeFunky.isIOS=/iPad|iPhone|iPod/.test(navigator.platform),BeFunky.isSafariMojave=BeFunky.isSafari&&/Mac OS X 10_14/.test(navigator.userAgent),BeFunky.isAndroid=/(android)/i.test(navigator.userAgent),BeFunky.isWindows=navigator.platform.includes("Win"),BeFunky.isDropShadowSupported=!(BeFunky.isChromium&&/Mac OS X 10_(10|11)/.test(navigator.userAgent)),BeFunky.isImageBitmapSupported="createImageBitmap"in window,BeFunky.supportsPointerEvents=!!window.PointerEvent},{}],63:[function(e,n,t){var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var r=function(e,n){return[].concat(function(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}(e)).filter(function(e){return e instanceof HTMLElement}).map(function(e){return n(e)})},a=function(e,n){return n(e)};function i(e,n){return function(t){"boolean"!=typeof n&&(n=!t.classList.contains(e)),n?t.classList.add(e):t.classList.remove(e)}}if(NodeList.prototype.setStyles=HTMLCollection.prototype.setStyles=function(e){return r(this,function(n){return Object.assign(n.style,e)}),this},HTMLElement.prototype.setStyles=function(e){return a(this,function(n){return Object.assign(n.style,e)}),this},HTMLElement.prototype.setLang=function(e,n){if(!BeFunky.LanguageManager)return BeFunky.throwError("setLang called too early"),this;if(this.onLanguageUpdate&&(this.onLanguageUpdate=void 0),"object"===(void 0===n?"undefined":o(n)))return this.setAttribute("data-lang",e),BeFunky.LanguageManager.registerElement(this,n),this;var t=e;return/^[a-z0-9_]+$/.test(e)&&(this.setAttribute("data-lang",e),t=BeFunky.LanguageManager.getString(e)),t.includes("<")?this.innerHTML=t:this.textContent=t,this},HTMLElement.prototype.closestParent=function(e){return e(this)?this:this.parentElement?this.parentElement.closestParent(e):void 0},HTMLElement.prototype.hasClass=function(e){return this.classList.contains(e)},HTMLElement.prototype.setClass=function(e){return this.className=e,this},NodeList.prototype.addClass=HTMLCollection.prototype.addClass=function(e){return r(this,function(n){return n.classList.add(e)}),this},HTMLElement.prototype.addClass=function(e){return a(this,function(n){return n.classList.add(e)}),this},NodeList.prototype.removeClass=HTMLCollection.prototype.removeClass=function(e){return r(this,function(n){return n.classList.remove(e)}),this},HTMLElement.prototype.removeClass=function(e){return a(this,function(n){return n.classList.remove(e)}),this},NodeList.prototype.toggleClass=HTMLCollection.prototype.toggleClass=function(e,n){return r(this,i(e,n)),this},HTMLElement.prototype.toggleClass=function(e,n){return a(this,i(e,n)),this},BeFunky.isEdge||BeFunky.isInternetExplorer||BeFunky.isIOS){var s=HTMLElement.prototype.getBoundingClientRect;HTMLElement.prototype.getBoundingClientRect=function(){var e=s.bind(this)();return e.x=e.left,e.y=e.top,e}}Array.prototype.shuffle=function(){for(var e=this.length,n=void 0,t=void 0;0!==e;)t=Math.floor(Math.random()*e),n=this[e-=1],this[e]=this[t],this[t]=n},Array.prototype.unique=function(){for(var e=this.concat(),n=0;n<e.length;++n)for(var t=n+1;t<e.length;++t)e[n]===e[t]&&e.splice(t--,1);return e},Array.prototype.isIdenticalTo=function(e){if(!Array.isArray(e))return!1;if(this.length!==e.length)return!1;for(var n=0,t=this.length;n<t;n++)if(Array.isArray(this[n])&&Array.isArray(e[n])){if(!this[n].isIdenticalTo(e[n]))return!1}else if(this[n]!==e[n])return!1;return!0}},{}],64:[function(e,n,t){BeFunky.isTextBoxFocused=function(){var e=document.activeElement;return e instanceof HTMLTextAreaElement||e instanceof HTMLInputElement&&["text","number","search","email","password","tel","url","time","date","datetime-local","month","week"].includes(e.type)},BeFunky.debounce=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=void 0;return function(){var r=this,a=arguments,i=t&&!o,s=function(){o=null,i||e.apply(r,a)};"raf"===n?(cancelAnimationFrame(o),o=requestAnimationFrame(s)):(clearTimeout(o),o=setTimeout(s,n)),i&&e.apply(r,a)}},BeFunky.throttle=function(e,n){var t=void 0,o=void 0,r=void 0;return function(){var a=this,i=arguments;t?(clearTimeout(o),o=setTimeout(function(){Date.now()-r>=n&&(e.apply(a,i),r=Date.now())},n-(Date.now()-r))):(e.apply(a,i),r=Date.now(),t=!0)}},BeFunky.randomString=function(e){return Math.round(Math.pow(36,e+1)-Math.random()*Math.pow(36,e)).toString(36).slice(1)},BeFunky.hash=function(e){for(var n=0,t=0,o=e.length;t<o;)n=(n<<5)-n+e.charCodeAt(t++)<<0;return n+2147483647+1},BeFunky.getType=function(e){var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"!==n?n:e&&e.constructor&&e.constructor.name||"Object"},BeFunky.waitUntil=function(e){var n=e.condition,t=e.interval,o=void 0===t?200:t,r=e.maxAttempts,a=void 0===r?10:r,i=e.onSuccess,s=e.onTimeout;if(![n,i,s].every(function(e){return"function"==typeof e}))throw new Error("3 functions must be provided to BeFunky.waitUntil");var l=0;!function e(){if(n())return i();if(l>=a)return s();l++;setTimeout(e,o)}()},BeFunky.getSvgHtml=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.classes,o=void 0===t?"icon":t,r=n.style;if("string"!=typeof o)throw new Error("Invalid SVG class: "+BeFunky.getType(o));return('\n    <svg class="'+o+'" '+(r?'style="'+r+'"':"")+'>\n        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#'+e+'"></use>\n    </svg>\n    ').trim()},BeFunky.onDocumentReady=function(e){if("interactive"===document.readyState||"complete"===document.readyState)return e();document.addEventListener("DOMContentLoaded",e,!1)},BeFunky.once=function(e,n){var t=void 0;return function(){return e&&(t=e.apply(n||this,arguments),e=null),t}},BeFunky.isLoggedIn=function(){return BeFunky.Params.siteUrl?!0===BeFunky.Params.isLoggedIn||"true"===BeFunky.Params.isLoggedIn||!0===BeFunky.Params.authe:!!window.alreadySignedInUser},BeFunky.isPlus=function(){return!!BeFunky.isLoggedIn()&&(BeFunky.Params.siteUrl?"1"===BeFunky.User.FlashVarsObject.pl||BeFunky.User.FlashVarsObject.pl>0:window.alreadySignedInUser&&window.alreadySignedInUser.isPlus)}},{}],65:[function(e,n,t){var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};BeFunky.log=function(){},BeFunky.logError=function(){var e;(e=console).error.apply(e,arguments)},BeFunky.throwError=function(e){for(var n,t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];if(!(e instanceof Error||window.DOMError&&e instanceof DOMError))try{e=new Error(e)}catch(n){e=new Error("Unknown error "+(void 0===e?"undefined":o(e)))}(n=BeFunky).logError.apply(n,["Sending "+e.name+" to Sentry:",e.message].concat(r));try{Raven.captureException(e)}catch(n){setTimeout(function(){throw e},0)}},BeFunky.reportUserAction=function(e){console.log("User action:",e)}},{}],66:[function(e,n,t){BeFunky.pointerover=BeFunky.supportsPointerEvents?"pointerover":"mouseover",BeFunky.pointerout=BeFunky.supportsPointerEvents?"pointerout":"mouseout",BeFunky.pointerdown=BeFunky.supportsPointerEvents?"pointerdown":"mousedown",BeFunky.pointermove=BeFunky.supportsPointerEvents?"pointermove":"mousemove",BeFunky.pointerup=BeFunky.supportsPointerEvents?"pointerup":"mouseup";var o={},r=null;Object.defineProperty(BeFunky,"globalPointerCoords",{get:function(){return r&&(o.x=r.pageX,o.y=r.pageY),o}}),Object.defineProperty(BeFunky,"globalPointerEvent",{get:function(){return r}});var a=function(e){r=e};document.addEventListener(BeFunky.pointerdown,a,!0),document.addEventListener(BeFunky.pointermove,a,!0),document.addEventListener(BeFunky.pointerup,a,!0),BeFunky.isPointerDown=!1,document.addEventListener(BeFunky.pointerdown,function(e){e.isTrusted&&(BeFunky.isPointerDown=!0)},!0),document.addEventListener(BeFunky.pointerup,function(e){e.isTrusted&&(BeFunky.isPointerDown=!1)},!0),document.addEventListener("touchstart",function(e){e.isTrusted&&(BeFunky.isPointerDown=!0)},!0),document.addEventListener("touchend",function(e){e.isTrusted&&(BeFunky.isPointerDown=!1)},!0)},{}],67:[function(e,n,t){BeFunky.inFlightRequests={},BeFunky.request=function(e,n,t){var o=n.headers,r=void 0===o?{}:o,a=n.responseType,i=void 0===a?"json":a,s=n.method,l=void 0===s?"GET":s,u=n.body,c=void 0===u?null:u,d=n.downloadProgressHandler,p=n.uploadProgressHandler,m=n.fallbackURLs,g=void 0===m?[]:m,y="boolean"==typeof n.withCredentials?n.withCredentials:"POST"===l;if(g.length&&(d||p))throw new Error("Cannot use progress w/ fallbackURLs b/c multiple XHR objects are created");if(Array.isArray(g)&&g.length){var f=t;t=function(t){if(t.hasOwnProperty("error")){BeFunky.logError("Failed to fetch URL: "+e.split("/").pop()+". Attempting next fallback URL.",t);var o=n.fallbackURLs.pop();BeFunky.request(o,n,f)}else f(t)}}var h=new XMLHttpRequest,v=BeFunky.inFlightRequests;for(var k in h.onload=function(){delete v[e];var n=this.response,o=this.status;if("json"===i&&BeFunky.isInternetExplorer){n=null;try{n=JSON.parse(this.responseText)}catch(e){}}o<200||o>400?n&&"string"==typeof n.error?(e.includes("oauth.php")&&"invalid_request"===n.error&&BeFunky.throwError("Invalid request sent to oauth.php with code = "+n.code),t({error:n.error})):t({error:"invalid_response"}):t({response:n})},h.onerror=h.onabort=h.ontimeout=function(){delete v[e],t({error:"request_failed"})},d&&BeFunky.addProgressHandler(h,d),p&&BeFunky.addProgressHandler(h,p,!0),h.withCredentials=y,h.open(l,e,!0),h.responseType=i||"",r)h.setRequestHeader(k,r[k]);h.wasAborted=!1,h.wasSent=!1;var w=h.abort;return h.abort=function(){h.wasSent?(h.wasAborted=!0,w.call(h)):h.wasAborted||(h.wasAborted=!0,h.onabort())},navigator.onLine?(h.wasSent=!0,h.send(c)):BeFunky.whenOnline().then(function(){h.wasAborted||(h.wasSent=!0,h.send(c))}),v[e]=h,h},BeFunky.addProgressHandler=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];function o(e){e&&e.lengthComputable&&n(e.loaded,e.total)}!t&&e&&null===e.onprogress?e.onprogress=o:t&&e&&e.upload&&null===e.upload.onprogress&&(e.upload.onprogress=o)},BeFunky.failureReason=function(e){return"string"!=typeof e?"Unknown request error: "+BeFunky.getType(e):"not_logged_in"===e&&BeFunky.isLoggedIn()?BeFunky.LanguageManager.getString("acknowledge_session_expired"):/^[a-z0-9_]+$/.test(e)?BeFunky.LanguageManager.getString("error_"+e):"Error: "+e};var o=!1,r=function(){};BeFunky.whenOnline=function(){return!1!==navigator.onLine?Promise.resolve():(this.offlineMessageDisplayed||(BeFunky.logError("User is offline"),r=BeFunky.acknowledge("user_offline",{isCritical:!0}),o=!0),new Promise(function(e){window.addEventListener("online",function(){o&&BeFunky.logError("User is back online"),e(),r(),o=!1})}))}},{}],68:[function(e,n,t){!function(e,n){if("function"==typeof define&&define.amd)define(["exports"],n);else if(void 0!==t)n(t);else{var o={};n(o),e.bodyScrollLock=o}}(this,function(e){"use strict";function n(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}Object.defineProperty(e,"__esModule",{value:!0});var t=!1;if("undefined"!=typeof window){var o={get passive(){t=!0}};window.addEventListener("testPassive",null,o),window.removeEventListener("testPassive",null,o)}var r="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&/iP(ad|hone|od)/.test(window.navigator.platform),a=[],i=!1,s=-1,l=void 0,u=void 0,c=function(e){return a.some(function(n){return!(!n.options.allowTouchMove||!n.options.allowTouchMove(e))})},d=function(e){var n=e||window.event;return!!c(n.target)||1<n.touches.length||(n.preventDefault&&n.preventDefault(),!1)},p=function(){setTimeout(function(){void 0!==u&&(document.body.style.paddingRight=u,u=void 0),void 0!==l&&(document.body.style.overflow=l,l=void 0)})};e.disableBodyScroll=function(e,o){if(r){if(!e)return void console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");if(e&&!a.some(function(n){return n.targetElement===e})){var p={targetElement:e,options:o||{}};a=[].concat(n(a),[p]),e.ontouchstart=function(e){1===e.targetTouches.length&&(s=e.targetTouches[0].clientY)},e.ontouchmove=function(n){var t,o,r,a;1===n.targetTouches.length&&(o=e,a=(t=n).targetTouches[0].clientY-s,!c(t.target)&&(o&&0===o.scrollTop&&0<a?d(t):(r=o)&&r.scrollHeight-r.scrollTop<=r.clientHeight&&a<0?d(t):t.stopPropagation()))},i||(document.addEventListener("touchmove",d,t?{passive:!1}:void 0),i=!0)}}else{g=o,setTimeout(function(){if(void 0===u){var e=!!g&&!0===g.reserveScrollBarGap,n=window.innerWidth-document.documentElement.clientWidth;e&&0<n&&(u=document.body.style.paddingRight,document.body.style.paddingRight=n+"px")}void 0===l&&(l=document.body.style.overflow,document.body.style.overflow="hidden")});var m={targetElement:e,options:o||{}};a=[].concat(n(a),[m])}var g},e.clearAllBodyScrollLocks=function(){r?(a.forEach(function(e){e.targetElement.ontouchstart=null,e.targetElement.ontouchmove=null}),i&&(document.removeEventListener("touchmove",d,t?{passive:!1}:void 0),i=!1),a=[],s=-1):(p(),a=[])},e.enableBodyScroll=function(e){if(r){if(!e)return void console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");e.ontouchstart=null,e.ontouchmove=null,a=a.filter(function(n){return n.targetElement!==e}),i&&0===a.length&&(document.removeEventListener("touchmove",d,t?{passive:!1}:void 0),i=!1)}else 1===a.length&&a[0].targetElement===e?(p(),a=[]):a=a.filter(function(n){return n.targetElement!==e})}})},{}],69:[function(e,n,t){var o,r,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};o=this,r=function(){"use strict";var e="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)};function n(){return!("undefined"==typeof window||!window.history||!window.history.pushState)}function t(e,t,o){this.root=null,this._routes=[],this._useHash=t,this._hash=void 0===o?"#":o,this._paused=!1,this._destroyed=!1,this._lastRouteResolved=null,this._notFoundHandler=null,this._defaultHandler=null,this._usePushState=!t&&n(),this._onLocationChange=this._onLocationChange.bind(this),this._genericHooks=null,this._historyAPIUpdateMethod="pushState",e?this.root=t?e.replace(/\/$/,"/"+this._hash):e.replace(/\/$/,""):t&&(this.root=this._cLoc().split(this._hash)[0].replace(/\/$/,"/"+this._hash)),this._listen(),this.updatePageLinks()}function o(e){return e instanceof RegExp?e:e.replace(/\/+$/,"").replace(/^\/+/,"^/")}function r(e){return e.replace(/\/$/,"").split("/").length}function i(e,n){return r(n)-r(e)}function s(e,n){return function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).map(function(n){var r=function(e){var n=[];return{regexp:e instanceof RegExp?e:new RegExp(e.replace(t.PARAMETER_REGEXP,function(e,o,r){return n.push(r),t.REPLACE_VARIABLE_REGEXP}).replace(t.WILDCARD_REGEXP,t.REPLACE_WILDCARD)+t.FOLLOWED_BY_SLASH_REGEXP,t.MATCH_REGEXP_FLAGS),paramNames:n}}(o(n.route)),a=r.regexp,i=r.paramNames,s=e.replace(/^\/+/,"/").match(a),l=function(e,n){return 0===n.length?null:e?e.slice(1,e.length).reduce(function(e,t,o){return null===e&&(e={}),e[n[o]]=decodeURIComponent(t),e},null):null}(s,i);return!!s&&{match:s,route:n,params:l}}).filter(function(e){return e})}(e,n)[0]||!1}function l(e,n){var t=n.map(function(n){return""===n.route||"*"===n.route?e:e.split(new RegExp(n.route+"($|/)"))[0]}),r=o(e);return t.length>1?t.reduce(function(e,n){return e.length>n.length&&(e=n),e},t[0]):1===t.length?t[0]:r}function u(e,t,o){var r,a=function(e){return e.split(/\?(.*)?$/)[0]};return void 0===o&&(o="#"),n()&&!t?a(e).split(o)[0]:(r=e.split(o)).length>1?a(r[1]):a(r[0])}function c(n,t,o){if(t&&"object"===(void 0===t?"undefined":e(t))){if(t.before)return void t.before(function(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(n(),t.after&&t.after(o))},o);if(t.after)return n(),void(t.after&&t.after(o))}n()}return t.prototype={helpers:{match:s,root:l,clean:o,getOnlyURL:u},navigate:function(e,n){var t;return e=e||"",this._usePushState?(t=(t=(n?"":this._getRoot()+"/")+e.replace(/^\/+/,"/")).replace(/([^:])(\/{2,})/g,"$1/"),history[this._historyAPIUpdateMethod]({},"",t),this.resolve()):"undefined"!=typeof window&&(e=e.replace(new RegExp("^"+this._hash),""),window.location.href=window.location.href.replace(/#$/,"").replace(new RegExp(this._hash+".*$"),"")+this._hash+e),this},on:function(){for(var n=this,t=arguments.length,o=Array(t),r=0;r<t;r++)o[r]=arguments[r];if("function"==typeof o[0])this._defaultHandler={handler:o[0],hooks:o[1]};else if(o.length>=2)if("/"===o[0]){var a=o[1];"object"===e(o[1])&&(a=o[1].uses),this._defaultHandler={handler:a,hooks:o[2]}}else this._add(o[0],o[1],o[2]);else"object"===e(o[0])&&Object.keys(o[0]).sort(i).forEach(function(e){n.on(e,o[0][e])});return this},off:function(e){return null!==this._defaultHandler&&e===this._defaultHandler.handler?this._defaultHandler=null:null!==this._notFoundHandler&&e===this._notFoundHandler.handler&&(this._notFoundHandler=null),this._routes=this._routes.reduce(function(n,t){return t.handler!==e&&n.push(t),n},[]),this},notFound:function(e,n){return this._notFoundHandler={handler:e,hooks:n},this},resolve:function(e){var t,o,r=this,a=(e||this._cLoc()).replace(this._getRoot(),"");this._useHash&&(a=a.replace(new RegExp("^/"+this._hash),"/"));var i=function(e){return e.split(/\?(.*)?$/).slice(1).join("")}(e||this._cLoc()),l=u(a,this._useHash,this._hash);return!this._paused&&(this._lastRouteResolved&&l===this._lastRouteResolved.url&&i===this._lastRouteResolved.query?(this._lastRouteResolved.hooks&&this._lastRouteResolved.hooks.already&&this._lastRouteResolved.hooks.already(this._lastRouteResolved.params),!1):(o=s(l,this._routes))?(this._callLeave(),this._lastRouteResolved={url:l,query:i,hooks:o.route.hooks,params:o.params,name:o.route.name},t=o.route.handler,c(function(){c(function(){o.route.route instanceof RegExp?t.apply(void 0,o.match.slice(1,o.match.length)):t(o.params,i)},o.route.hooks,o.params,r._genericHooks)},this._genericHooks,o.params),o):this._defaultHandler&&(""===l||"/"===l||l===this._hash||function(e,t,o){if(n()&&!t)return!1;if(!e.match(o))return!1;var r=e.split(o);return r.length<2||""===r[1]}(l,this._useHash,this._hash))?(c(function(){c(function(){r._callLeave(),r._lastRouteResolved={url:l,query:i,hooks:r._defaultHandler.hooks},r._defaultHandler.handler(i)},r._defaultHandler.hooks)},this._genericHooks),!0):(this._notFoundHandler&&c(function(){c(function(){r._callLeave(),r._lastRouteResolved={url:l,query:i,hooks:r._notFoundHandler.hooks},r._notFoundHandler.handler(i)},r._notFoundHandler.hooks)},this._genericHooks),!1))},destroy:function(){this._routes=[],this._destroyed=!0,this._lastRouteResolved=null,this._genericHooks=null,clearTimeout(this._listeningInterval),"undefined"!=typeof window&&(window.removeEventListener("popstate",this._onLocationChange),window.removeEventListener("hashchange",this._onLocationChange))},updatePageLinks:function(){var e=this;"undefined"!=typeof document&&this._findLinks().forEach(function(n){n.hasListenerAttached||(n.addEventListener("click",function(t){if((t.ctrlKey||t.metaKey)&&"a"==t.target.tagName.toLowerCase())return!1;var o=e.getLinkPath(n);e._destroyed||(t.preventDefault(),e.navigate(o.replace(/\/+$/,"").replace(/^\/+/,"/")))}),n.hasListenerAttached=!0)})},generate:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=this._routes.reduce(function(t,o){var r;if(o.name===e)for(r in t=o.route,n)t=t.toString().replace(":"+r,n[r]);return t},"");return this._useHash?this._hash+t:t},link:function(e){return this._getRoot()+e},pause:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._paused=e,this._historyAPIUpdateMethod=e?"replaceState":"pushState"},resume:function(){this.pause(!1)},historyAPIUpdateMethod:function(e){return void 0===e?this._historyAPIUpdateMethod:(this._historyAPIUpdateMethod=e,e)},disableIfAPINotAvailable:function(){n()||this.destroy()},lastRouteResolved:function(){return this._lastRouteResolved},getLinkPath:function(e){return e.getAttribute("href")},hooks:function(e){this._genericHooks=e},_add:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return"string"==typeof n&&(n=encodeURI(n)),this._routes.push("object"===(void 0===t?"undefined":e(t))?{route:n,handler:t.uses,name:t.as,hooks:o||t.hooks}:{route:n,handler:t,hooks:o}),this._add},_getRoot:function(){return null!==this.root?this.root:(this.root=l(this._cLoc().split("?")[0],this._routes),this.root)},_listen:function(){var e=this;if(this._usePushState)window.addEventListener("popstate",this._onLocationChange);else if("undefined"!=typeof window&&"onhashchange"in window)window.addEventListener("hashchange",this._onLocationChange);else{var n=this._cLoc(),t=void 0,o=void 0;(o=function(){t=e._cLoc(),n!==t&&(n=t,e.resolve()),e._listeningInterval=setTimeout(o,200)})()}},_cLoc:function(){return"undefined"!=typeof window?void 0!==window.__NAVIGO_WINDOW_LOCATION_MOCK__?window.__NAVIGO_WINDOW_LOCATION_MOCK__:o(window.location.href):""},_findLinks:function(){return[].slice.call(document.querySelectorAll("[data-navigo]"))},_onLocationChange:function(){this.resolve()},_callLeave:function(){var e=this._lastRouteResolved;e&&e.hooks&&e.hooks.leave&&e.hooks.leave(e.params)}},t.PARAMETER_REGEXP=/([:*])(\w+)/g,t.WILDCARD_REGEXP=/\*/g,t.REPLACE_VARIABLE_REGEXP="([^/]+)",t.REPLACE_WILDCARD="(?:.*)",t.FOLLOWED_BY_SLASH_REGEXP="(?:/$|$)",t.MATCH_REGEXP_FLAGS="",t},"object"==(void 0===t?"undefined":a(t))&&void 0!==n?n.exports=r():"function"==typeof define&&define.amd?define(r):o.Navigo=r()},{}],70:[function(e,n,t){var o=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'],r=o.join(","),a="undefined"==typeof Element?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector;function i(e,n){n=n||{};var t,o,i,l=[],u=[],p=new m(e.ownerDocument||e),g=e.querySelectorAll(r);for(n.includeContainer&&a.call(e,r)&&(g=Array.prototype.slice.apply(g)).unshift(e),t=0;t<g.length;t++)s(o=g[t],p)&&(0===(i=c(o))?l.push(o):u.push({documentOrder:t,tabIndex:i,node:o}));return u.sort(d).map(function(e){return e.node}).concat(l)}function s(e,n){return!(!l(e,n)||function(e){return function(e){return p(e)&&"radio"===e.type}(e)&&!function(e){if(!e.name)return!0;var n=function(e){for(var n=0;n<e.length;n++)if(e[n].checked)return e[n]}(e.ownerDocument.querySelectorAll('input[type="radio"][name="'+e.name+'"]'));return!n||n===e}(e)}(e)||c(e)<0)}function l(e,n){return n=n||new m(e.ownerDocument||e),!(e.disabled||function(e){return p(e)&&"hidden"===e.type}(e)||n.isUntouchable(e))}i.isTabbable=function(e,n){if(!e)throw new Error("No node provided");return!1!==a.call(e,r)&&s(e,n)},i.isFocusable=function(e,n){if(!e)throw new Error("No node provided");return!1!==a.call(e,u)&&l(e,n)};var u=o.concat("iframe").join(",");function c(e){var n=parseInt(e.getAttribute("tabindex"),10);return isNaN(n)?function(e){return"true"===e.contentEditable}(e)?0:e.tabIndex:n}function d(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex}function p(e){return"INPUT"===e.tagName}function m(e){this.doc=e,this.cache=[]}m.prototype.hasDisplayNone=function(e,n){if(e.nodeType!==Node.ELEMENT_NODE)return!1;var t=function(e,n){for(var t=0,o=e.length;t<o;t++)if(n(e[t]))return e[t]}(this.cache,function(n){return n===e});if(t)return t[1];var o=!1;return"none"===(n=n||this.doc.defaultView.getComputedStyle(e)).display?o=!0:e.parentNode&&(o=this.hasDisplayNone(e.parentNode)),this.cache.push([e,o]),o},m.prototype.isUntouchable=function(e){if(e===this.doc.documentElement)return!1;var n=this.doc.defaultView.getComputedStyle(e);return!!this.hasDisplayNone(e,n)||"hidden"===n.visibility},n.exports=i},{}]},{},[17]);
//# sourceMappingURL=befunky.core.js.map
